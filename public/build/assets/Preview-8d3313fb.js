import{c as Y,u as ee,r,h as ae,a as le,s as te,Q,b as a,d as H,j as o,f as ie,R as se,T as re,e as oe}from"./main-14f615f5.js";import{I as ne}from"./InfoListComponent-87aca96b.js";import{A as be,I as l}from"./InformationSectionPreview-130d8c00.js";import{M as z}from"./MultipleLineSectionPreview-708fbff5.js";import{T as ce}from"./TableSectionPreview-8f14580e.js";import"./CommonIcons-8e83bba2.js";const _e=()=>{var p,y,h,_,g,f,O,$,S,j,w,N,C,k,P,D,A,T,x,I,L,B,F,R,M,q,E;const{hasPermission:n}=Y(),b=ee(),[i,G]=r.useState(!0),s=ae().id,U=new oe,e=le(t=>t.salesOrderForm);r.useEffect(()=>{b(te("Sales Preview"))});const V=()=>{window.print()},Z=async()=>{const t=await U.fetchSingleSalesOrder(s);if(t.status!=200)return;const X=t.data.data.salesOrder;b(se(X))};r.useEffect(()=>{Z().then(()=>{G(!1)})},[s]);const J=[{value:"none",label:"-None-"},{value:"single_order",label:"Single Order"},{value:"frame_contract",label:"Frame Contract"},{value:"call_off",label:"Call Off"},{value:"forecast",label:"Forecast"}],c={leftObjects:[{label:"Account Name",value:`${(p=e.account)==null?void 0:p.account_name}`},{label:"Contact Name",value:`${e.contact?((y=e.contact)==null?void 0:y.first_name)+" "+((h=e.contact)==null?void 0:h.last_name):""}`},{label:"Quote Name",value:(_=e.qoute)==null?void 0:_.subject},{label:"Currency",value:`${e.currency}`}],rightObjects:[{label:"SO Number",value:`${e.so_number}`},{label:"Deals Name",value:`${(g=e.deal)==null?void 0:g.deal_name}`},{label:"Deal Stage",value:`${(f=e.deal)==null?void 0:f.deal_stage}`},{label:"Lost Reason",value:`${(O=e.lead)==null?void 0:O.lost_reason}`},{label:"Lost Reason Comment",value:`${($=e.lead)==null?void 0:$.lost_reason}`},{label:"SO Date",value:`${e.so_date}`},{label:"Exchange Rate ",value:`${e.exchange_rate}`}]},d={leftObjects:[{label:"Purchase Order",value:`${e.purchase_order}`},{label:"Customer PO date",value:`${e.customer_po_date}`},{label:"PO upload",value:`${e.po_upload} `},{label:"SO Type",value:Q(e.so_type,J)},{label:"Parent SO Nr",value:e.parent_so_nr}],rightObjects:[{label:"Subject",value:`${e.subject}`},{label:"Pending",value:`${e.pending}`},{label:"Status",value:`${Q(e.subject,re)}`},{label:"ZohoBooksId",value:`${e.zoho_books_id}`}]},u={leftObjects:[{label:"Sales Total",value:`${e.total}`},{label:"GP Total",value:parseFloat(e.list_price)-parseFloat((S=e.availability)==null?void 0:S.availability_cost)*parseFloat(e.Quantity)},{label:"Margin",value:(1-parseFloat((j=e.availability)==null?void 0:j.availability_cost)/parseFloat(e.list_price))*100}],rightObjects:[{label:"Resale Price",value:`${e.list_price}`},{label:"Cost Vendor",value:`${(w=e.availability)==null?void 0:w.availability_cost}`}]},m={leftObjects:[{label:"Availability Name",value:`${(N=e.availability)==null?void 0:N.name}`},{label:"Availability No",value:`${(C=e.availability)==null?void 0:C.availability_no}`},{label:"Availability Cost",value:`${(k=e.availability)==null?void 0:k.availability_cost}`}],rightObjects:[{label:"Availability Quantity",value:`${(P=e.availability)==null?void 0:P.quantity}`},{label:"Availability LT",value:`${(D=e.availability)==null?void 0:D.lead_time}`},{label:"Availability DC",value:`${(A=e.availability)==null?void 0:A.date_code}`}]},v={leftObjects:[{label:"Billing Street",value:`${e.billing_street}`},{label:"Billing City",value:`${e.billing_city}`},{label:"Billing State",value:`${e.billing_state}`},{label:"Billing Code",value:`${e.billing_code}`},{label:"Billing Country",value:`${e.billing_country}`}],rightObjects:[{label:"Shipping Street",value:`${e.shipping_street}`},{label:"Shipping City",value:`${e.shipping_city}`},{label:"Shipping State",value:`${e.shipping_state}`},{label:"Shipping Code",value:`${e.shipping_code}`},{label:"Shipping Country",value:`${e.shipping_country}`}]},K=[{key:"product_name",label:"Product Name",model:"product"},{key:"quantity",label:"Quantity"},{key:"customer_part_id",label:"Customer Part ID"},{key:"list_price",label:"List Price"},{key:"date_code",label:"Date Code"},{key:"amount",label:"Amount"},{key:"requested_delivery_date",label:"Requested Delivery Date"},{key:"estimated_delivery_date",label:"Estimated Delivery Date"}],W=[{label:"Sales Order Owner",value:`${((T=e.owner)==null?void 0:T.first_name)??""} ${((x=e.owner)==null?void 0:x.last_name)??""}`},{label:"Sales Person",value:`${((I=e.sales_person)==null?void 0:I.first_name)??""} ${((L=e.sales_person)==null?void 0:L.last_name)??""}`},{label:"Approved By",value:`${((B=e.approved_by)==null?void 0:B.first_name)??""} ${((F=e.approved_by)==null?void 0:F.last_name)??""}`},{label:"Created By",value:`${((R=e.creator)==null?void 0:R.first_name)??""} ${((M=e.creator)==null?void 0:M.last_name)??""}`},{label:"Modified By",value:`${((q=e.modifier)==null?void 0:q.first_name)??""} ${((E=e.modifier)==null?void 0:E.last_name)??""}`}];return i?a(H,{}):!n("read-sales-order")||i?a(H,{}):o("div",{children:[a("div",{className:"flex items-center lg:justify-end justify-center flex-wrap gap-4 mb-6",children:a(be,{loading:i,hasPermission:n,modelId:s,exportTable:V,routeModel:"sales",permissionModel:"sales-order"})}),o("div",{className:"panel",children:[o("div",{className:"flex justify-between flex-wrap gap-4 px-4",children:[a("div",{className:"text-2xl font-semibold uppercase",children:"Sales Order"}),a("div",{className:"shrink-0",children:a("img",{src:ie(e.image_data),alt:"Sales Order image",className:"w-20 ltr:ml-auto rtl:mr-auto"})})]}),a(ne,{data:W}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(l,{title:"Header",leftObjects:c.leftObjects,rightObjects:c.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(l,{title:"Sales Order Information",leftObjects:d.leftObjects,rightObjects:d.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(ce,{title:"Ordered Items",items:e.items,columns:K,total:e.sales_total}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(l,{title:"SO Line",leftObjects:u.leftObjects,rightObjects:u.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(l,{title:"Linked Availability",leftObjects:m.leftObjects,rightObjects:m.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(l,{title:"Address Information",leftObjects:v.leftObjects,rightObjects:v.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(z,{sectionTitle:"Terms And Conditions",data:[{label:"Terms and Conditions",value:e.terms_and_conditions}]}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(z,{sectionTitle:"Description ",data:[{label:"Description",value:e.description}]})]})]})};export{_e as default};
