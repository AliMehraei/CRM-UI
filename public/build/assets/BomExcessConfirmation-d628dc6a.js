import{u as X,c as Z,r as n,d as ee,h as te,S as ae,bf as se,s as M,af as x,j as e,e as ie,F as k,b as i,f as ne,a3 as y,y as E,a as re}from"./main-df5dc7ed.js";const he=()=>{const c=X();Z();const[S,I]=n.useState(""),[P,B]=n.useState(""),[le,F]=n.useState(""),[de,D]=n.useState(""),[oe,T]=n.useState(""),[C,A]=n.useState({}),[a,z]=n.useState({}),[j,d]=n.useState(!1),o=ee(t=>t.contactForm),m=new re,L=te(),l=L.contactId,h=L.id,[f,R]=n.useState("contact"),[H,ce]=n.useState([]),[V,Y]=n.useState([]),u=ae.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:5e3}),W=se(),{pathname:w}=W;n.useEffect(()=>{c(M(S))},[c]),n.useEffect(()=>{q()},[]);const q=async()=>{d(!0);const s=w.split("/");R(s[1]=="availability-vendor"?"vendor":"contact"),I(x(s[1])+" - Confirmation"),B(s[1]),F("Add Your "+x(s[1])+" List"),D("Your "+x(s[1])+" List"),T("You don't have any"+x(s[1])+" List"),c(M(x(s[1])+" - Confirmation")),d(!1)},U=async()=>{d(!0);const t=await m.bomItemSaveHeader(l,f,h,{headers:V});d(!1),t.status==200?window.location.href=`/${P}/process/${l}/${h}`:t.status==302&&u.fire({icon:"error",title:t.data.message,padding:"10px 20px"})},G=async()=>{if(w.split("/")[1]!="availability-vendor"){const t=await m.fetchSingleContact(l);if(t.status!=200)return;const s=t.data.data.contact;c(E(s))}else{const t=await m.fetchSingleVendor(l);if(t.status!=200)return;const s=t.data.data.vendor;c(E(s))}};n.useEffect(()=>{G()},[l]);const J=async()=>{if(!j){d(!0);const t=await m.bomItemConfirmation(l,f,h);d(!1),t.status==302&&(u.fire({icon:"error",title:t.data.message,padding:"10px 20px"}),setTimeout(()=>{const b=w.split("/");window.location.href=`/${b[1]}/list/${l}`},1e3));const s=t.data.data;A(s.configHeaders),z(s.BOMItemDetails.data)}};n.useEffect(()=>{J()},[]);const K=async t=>{const s=t.target.selectedIndex,r=t.target.value,N=t.target.options[s].getAttribute("data-key"),Q={selected_header:r,selected_header_index:N,bom_item_id:h,contact_id:l};t.target,Y(g=>{const v=g.findIndex($=>$.value===r);return v!==-1?(g[v].key=N,[...g]):[...g,{key:N,value:r}]});const p=await m.selectedHeaderValidation(l,f,h,Q);p.status==200?p.data.type==="error"?u.fire({icon:"error",title:p.data.msg,padding:"10px 20px"}):(p.data.type==="warning"&&u.fire({icon:"error",title:p.data.msg,padding:"10px 20px"}),document.querySelectorAll(".header-select").forEach(v=>{v.querySelectorAll("option").forEach((_,O)=>{H.includes(O)&&O!==0?_.setAttribute("disabled","disabled"):_.removeAttribute("disabled")})})):(u.fire({icon:"error",title:"The operation is failed",padding:"10px 20px"}),d(!1))};return j?e(ie,{}):e(k,{children:i("div",{className:"panel px-0 border-white-light dark:border-[#1b2e4b]",children:[i("div",{className:"flex justify-end flex-wrap gap-4 px-4",children:[e("div",{className:"flex",children:i("div",{children:[i("div",{className:"text-sm font-semibold mt-5",children:[o.first_name," ",o.last_name," | ",o.vendor_name]}),e("div",{className:"text-s font-semibold ",children:o.email}),e("div",{className:"text-s font-semibold ",children:o.phone})]})}),i("div",{className:"shrink-0",children:[e("img",{src:ne(o.image_data),alt:"Contact image",className:"w-20 ltr:ml-auto rtl:mr-auto"}),i("a",{className:"text-sm font-semibold mt-5  text-primary ",target:"_blank",href:`/${f}/preview/${l}`,children:["View ",f]})]})]}),e("hr",{className:"border-white-light dark:border-[#849bbc] my-6"}),e("div",{className:"px-4 sm:px-6 lg:px-8",children:e("section",{className:"border-b border-gray-200 pb-4",children:e("div",{className:"sm:flex sm:items-center sm:justify-between",children:e("h3",{className:"title-1",children:e("b",{children:S})})})})}),i("div",{className:"my-4",children:[e("section",{className:" px-4 sm:px-6 lg:px-8 ",children:i("div",{className:"sm:flex sm:items-center sm:justify-between border-b border-gray-200 pb-4",children:[e("h3",{className:"title-1"}),e("div",{className:"flex mt-3 sm:ml-4 sm:mt-0 space-x-1",children:i("button",{id:"confirmlist-next-tour",type:"button",onClick:U,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold flex items-center p-2 space-x-2 text-sm rounded border-primary-500",children:[e("span",{children:"Next step"}),e("svg",{className:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})]})})]})}),e("section",{id:"table-section-list1-tour",className:"dashboard-item-view-page  px-4 sm:px-6 lg:px-8 ",children:e("div",{className:"rounded-lg bg-white overflow-hidden shadow p-6",children:i("div",{className:"",children:[i("div",{className:"flex flex-col h-full",children:[e("div",{className:"flex flex-row items-center justify-between h-full space-x-3",children:e("h3",{className:"text-lg font-bold leading-6 text-gray-900",children:"Step 1: Match your column names"})}),e("p",{className:"text-sm font-medium text-gray-500 mt-4",children:"Please define each column stands for which definition                "})]}),e("form",{id:"save-headers-form",method:"POST",children:e("div",{className:"overflow-x-scroll mt-6",children:e("div",{children:i("div",{className:"grid grid-cols-12 gap-6",children:[i("div",{className:"col-span-2 flex flex-col divide-y",children:[e("div",{className:"bg-gray-100 rounded mb-2 p-2 text-left text-sm text-gray-900 font-bold",children:"Columns in your table"}),a[0]&&a[0].data&&Object.keys(a[0].data).map((t,s)=>e(y.Fragment,{children:e("div",{className:"px-2 h-14 flex items-center text-left truncate text-sm text-gray-900 font-semibold",children:a[0].data[t]})},s))]}),i("div",{className:"col-span-4 flex flex-col divide-y",children:[e("div",{className:"bg-gray-100 rounded mb-2 p-2 text-left text-sm text-gray-900 font-bold",children:"Fields in our system"}),a[0]&&a[0].data&&Object.keys(a[0].data).map((t,s)=>e(y.Fragment,{children:e("div",{className:"p-2 h-14 text-left truncate text-sm text-gray-500",children:i("select",{name:"headers[]",onChange:r=>K(r),className:"header-select w-full h-full border-0 bg-gray-100 rounded-md focus:ring-transparent text-black",children:[e("option",{value:"",children:"Ignore"}),Object.keys(C).map(r=>e("option",{"data-key":t,value:r,children:C[r]},r))]})})},`${s}}_config`))]}),i("div",{className:"col-span-2 flex flex-col divide-y",children:[e("div",{className:"bg-gray-100 rounded mb-2 p-2 text-left text-sm text-gray-900 font-bold",children:"Sample data"}),a[1]&&a[1].data&&Object.keys(a[1].data).map((t,s)=>e(y.Fragment,{children:e("div",{className:"px-2 h-14 flex items-center text-left truncate text-sm text-gray-500",children:a[1].data[t]})},`${s}}_data`))]})]})})})})]})})}),e("section",{id:"table-section-list2-tour",className:"dashboard-item-view-page  px-4 sm:px-6 lg:px-8 mt-6",children:e("div",{className:"rounded-lg bg-white overflow-hidden shadow p-6",children:i("div",{className:"",children:[e("div",{className:"flex flex-row items-center justify-between h-full space-x-3",children:e("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Your uploaded file data"})}),e("div",{className:"overflow-x-scroll mt-6",children:e("div",{className:"flex flex-col",children:e("div",{className:"flex-grow",children:i("table",{children:[e("thead",{children:i("tr",{children:[e("th",{className:"",children:e("button",{"data-bom-item-id":"240",className:"remove-header-btn flex space-x-3 items-center justify-center w-full p-3 rounded hover:bg-gray-100 default-transition",children:e("svg",{className:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),a[0]&&a[0].data&&Object.keys(a[0].data).map((t,s)=>e(k,{children:i("th",{children:[" ",a[0].data[t]]},s)}))]})}),e("tbody",{children:a&&Object.keys(a).filter(t=>!(a[t].is_header||a[t].is_confirmed_header)).map((t,s)=>e(y.Fragment,{children:i("tr",{className:`${a[t].ignored?"":"bg-gray-50"} ${a[t].ignored?"":"bg-white"} ${a[t].ignored?"bg-red-50":""} detail-row`,children:[e("td",{className:"border p-2",children:e("button",{type:"button",className:`${a[t].ignored?"active bg-red-500":"bg-gray-200"} ignored-switch toggle toggle-red bg-gray-200 relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200`,role:"switch","aria-checked":"false",children:i("span",{className:`${a[t].ignored?"translate-x-5":"translate-x-0 "} pointer-events-none relative inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200`,children:[e("span",{className:`${a[t].ignored?"opacity-0":"opacity-100"} toggle-icon-1 ease-in duration-200 absolute inset-0 h-full w-full flex items-center justify-center transition-opacity`,"aria-hidden":"true",children:e("svg",{className:"h-3 w-3 text-gray-400",fill:"currentColor",viewBox:"0 0 12 12",children:e("path",{d:"M3.707 5.293a1 1 0 00-1.414 1.414l1.414-1.414zM5 8l-.707.707a1 1 0 001.414 0L5 8zm4.707-3.293a1 1 0 00-1.414-1.414l1.414 1.414zm-7.414 2l2 2 1.414-1.414-2-2-1.414 1.414zm3.414 2l4-4-1.414-1.414-4 4 1.414 1.414z"})})}),e("span",{className:`${a[t].ignored?"opacity-100":"opacity-0"} toggle-icon-2 ease-out duration-100 absolute inset-0 h-full w-full flex items-center justify-center transition-opacity`,"aria-hidden":"true",children:e("svg",{className:"h-3 w-3 text-red-500",fill:"none",viewBox:"0 0 12 12",children:e("path",{d:"M4 8l2-2m0 0l2-2M6 6L4 4m2 2l2 2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})})}),a[t]&&a[t].data&&Object.keys(a[t].data).map((r,b)=>e(k,{children:e("td",{children:a[t].data[r]},b)}))]})},s))})]})})})}),e("div",{className:"mt-6"})]})})})]})]})})};export{he as default};
