import{c as E,u as $,r as t,h as Q,d as R,s as B,Y as M,j as a,e as _,b as n,f as H,i as L,b7 as W,a as U}from"./main-df5dc7ed.js";import{A as V}from"./ActionButtonsPreview-b8a965fd.js";import{I as w}from"./InformationSectionPreview-f66ace2c.js";import{M as G}from"./MultipleLineSectionPreview-31bef909.js";import{A as Y}from"./AttachmentSection-2b18bb8f.js";import{G as z}from"./GenerateEmailLogList-056f10ce.js";import"./CommonIcons-4af903f4.js";import"./sortBy-4d9efad5.js";import"./_baseIsEqual-9290e441.js";const re=()=>{var m,p,v,f,h,k,g,A,y;const{hasPermission:u}=E(),c=$(),[C,j]=t.useState(""),[r,F]=t.useState({}),[i,x]=t.useState({}),[d,N]=t.useState(!0),s=Q().id,S=new U,e=R(l=>l.taskForm);t.useEffect(()=>{c(B("Task Preview"))});const T=()=>{window.print()},D=async()=>{const l=await S.fetchSingleTask(s);if(l.status!=200)return;const o=l.data.data.task;c(W(o))};t.useEffect(()=>{D().then(()=>{N(!1)})},[s]);const O=[{value:"App\\Models\\Lead",label:"Lead"},{value:"App\\Models\\Contact",label:"Contact"}],P=[{value:"App\\Models\\Account",label:"Account",labelField:"account_name"},{value:"App\\Models\\Vendor",label:"Vendor",labelField:"vendor_name"},{value:"App\\Models\\Quote",label:"Quote",labelField:"subject"},{value:"App\\Models\\Rfq",label:"Rfq",labelField:"rfq_name"},{value:"App\\Models\\Excess",label:"Excess",labelField:"excess_name"},{value:"App\\Models\\Availability",label:"Availability",labelField:"availability_name"},{value:"App\\Models\\Product",label:"Product",labelField:"product_name"},{value:"App\\Models\\Manufacturer",label:"Manufacturer",labelField:"name"},{value:"App\\Models\\Deal",label:"Deals",labelField:"deal_name"},{value:"App\\Models\\SalesOrder",label:"Sales Order",labelField:"subject"},{value:"App\\Models\\PurchaseOrder",label:"Purchase Order",labelField:"subject"},{value:"App\\Models\\Invoice",label:"Invoice",labelField:"subject"},{value:"App\\Models\\VendorRfq",label:"Vendor Rfq",labelField:"vendor_rfq_name"}];t.useEffect(()=>{const l=P.find(o=>o.value===e.moduleable_type);F(l),e.moduleable&&j(e.moduleable[l==null?void 0:l.labelField]),x(O.find(o=>o.value===e.userable_type))},[e.moduleable_type]);const q=[{value:"-None-",label:"-None-"},{value:"Account or Contact exist already",label:"Account or Contact exist already"},{value:"Wrong Branch",label:"Wrong Branch"},{value:"Wrong Department",label:"Wrong Department"},{value:"Does Not Exist Anymore",label:"Does Not Exist Anymore"},{value:"Bankruptcy",label:"Bankruptcy"},{value:"Hoch",label:"Hoch"},{value:"Other",label:"Other"}],I=[{value:"-None-",label:"-None-"},{value:"Abgeschlossen",label:"Abgeschlossen"},{value:"0.0 Cold task / unqualified (CLU)",label:"0.0 Cold task / unqualified (CLU)"},{value:"1.0 Cold task qualified (CLQ)",label:"1.0 Cold task qualified (CLQ)"},{value:"2.0 First contact made (FCM)",label:"2.0 First contact made (FCM)"},{value:"3.0 warm task qualified (WLQ)",label:"3.0 warm task qualified (WLQ)"},{value:"4.0 Hot task (HLQ)",label:"4.0 Hot task (HLQ)"},{value:"Close Task / Lost Task",label:"Close Task / Lost Task"}],b={leftObjects:[{label:"Task Owner",value:`${(m=e.owner)==null?void 0:m.first_name} ${(p=e.owner)==null?void 0:p.last_name}`},{label:"Subject",value:`${e.subject}`},{label:"Due Date",value:e.due_date},{label:"Contact | Contact",value:(i==null?void 0:i.label)+`: ${((v=e.userable)==null?void 0:v.name)??((f=e.userable)==null?void 0:f.first_name)+" "+((h=e.userable)==null?void 0:h.last_name)} `},{label:"Related To",value:(r==null?void 0:r.label)+": "+C},{label:"Status",value:M(e.status,I)}],rightObjects:[{label:"Priority",value:M(e.priority,q)},{label:"Repeat",value:e.repeat},{label:"Created By",value:`${(k=e.creator)==null?void 0:k.first_name} ${(g=e.creator)==null?void 0:g.last_name}`},{label:"Modified By",value:`${(A=e.modifier)==null?void 0:A.first_name} ${(y=e.modifier)==null?void 0:y.last_name}`},{label:"Closed Time",value:`${e.closed_date}`}]};return d?a(_,{}):!u("read-task")||d?a(_,{}):n("div",{children:[a("div",{className:"flex items-center lg:justify-end justify-center flex-wrap gap-4 mb-6",children:a(V,{loading:d,hasPermission:u,modelId:s,exportTable:T,routeModel:"task",permissionModel:"task"})}),n("div",{className:"panel",children:[n("div",{className:"flex justify-between flex-wrap gap-4 px-4",children:[a("div",{className:"text-2xl font-semibold uppercase",children:"Task"}),a("div",{className:"shrink-0",children:a("img",{src:H(e.image_data),alt:"Task image",className:"w-20 ltr:ml-auto rtl:mr-auto"})})]}),a(w,{title:"Task Information",leftObjects:b.leftObjects,rightObjects:b.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(G,{sectionTitle:"Description Information",data:[{label:"Description",value:e.description}]}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(w,{title:"Date information",leftObjects:[{label:"Created Date",value:L(e.created_at)}],rightObjects:[{label:"Modified Date",value:L(e.updated_at)}]}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(Y,{modelId:s,modelName:"task"}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(z,{permissionName:"read-task",type:"email-log",routeName:"fetchTaskEmailLogs",modelId:s,title:"Email Logs"})]})]})};export{re as default};
