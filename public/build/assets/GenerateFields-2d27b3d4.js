import{u as N,a as u,q as w,r as j,V as h,b as e,F as f,j as r,d as E,W as k}from"./main-8a69f85c.js";import{S as y}from"./sweetalert2.all-d4d85d58.js";import{v as C}from"./CommonFunctions-3dfebde0.js";const A=({formState:s,resetForm:i})=>{const a=N(),m=u(n=>n.themeConfig),c=w(),l=new E,t=async(n="save")=>{a(h());const p=y.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:5e3}),d=await(await C(s.api)).call(l,s);if(d.isOk)s.action==="create"&&a(i()),p.fire({icon:"success",timer:2e3,title:"Form submitted successfully",padding:"10px 20px"}).then(()=>{if(n==="save"){const o=s.redirectTo.replace(":id",`${d.data.data.id}`);c(o,{replace:!0})}else if(s.action!=="create"){const o=s.createRoute;c(o,{replace:!0})}});else if(d.status===422){const o=d.data.data,x={hasError:!0,...Object.fromEntries(Object.entries(o).map(([g,b])=>[g,b[0]]))};a(k(x)),p.fire({icon:"error",html:`<h5>Form Validation Error</h5>
                        <span style="font-size: 12px">Please Check fields</span>
                        `,padding:"10px 20px"})}else p.fire({icon:"error",title:"Internal Server Error ,submitting form failed",padding:"10px 20px"})},v=()=>{const n=location.pathname.replace("/add","/list");s.action=="edit"?c(-1):c(n,{replace:!0})};return j.useEffect(()=>{a(h())},[]),e(f,{children:e("div",{className:" sticky top-0 z-10 px-0 flex-1 py-2 ltr:xl:mr-6 rtl:xl:ml-6 px-10",children:e("div",{className:" ",children:r("div",{className:"flex justify-between items-center mb-6",children:[e("div",{className:"flex items-center",children:r("span",{className:"text-xl font-bold",children:[m.pageTitle," : "]})}),r("div",{className:"flex items-center gap-2",children:[e("button",{onClick:v,className:"btn btn-danger gap-2",children:"Back"}),e("button",{onClick:()=>t("new"),className:"btn btn-primary gap-2",children:"Save and new"}),e("button",{onClick:()=>t("save"),className:"btn btn-success gap-2",children:"Save"})]})]})})})})},O=()=>e("span",{className:"text-red-500",children:" *"}),B=({fields:s})=>{const i=u(a=>a.formErrors);return e(f,{children:Object.entries(s).map(([a,m],c)=>e("div",{className:"lg:w-1/2 w-full ltr:lg:mr-6 rtl:lg:ml-6 mb-6",children:r("div",{className:"",children:[e("div",{className:"text-lg",children:a?`${a}:`:e("div",{className:"mt-10"})}),Object.entries(m).map(([l,t])=>e("div",{className:Object.keys(i).length>1&&i[t.props.name]?"mt-4 items-center has-error":"mt-4 items-center",children:r("div",{className:"flex",children:[r("label",{className:"ltr:mr-2 rtl:ml-2 w-1/3 mb-0 mt-2",children:[l,t.props.required&&e(O,{})]},l),r("div",{className:"w-full",children:[t,Object.keys(i).length>1&&i[t.props.name]&&r("div",{className:"text-danger mt-1",children:[" ",i[t.props.name]]})]})]})},l))]},a)},`${a}_${c}`))})};export{A,B as G,O as R};
