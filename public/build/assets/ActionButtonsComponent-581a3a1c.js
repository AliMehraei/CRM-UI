import{r as g,a as b,b as e,F as m,j as s,am as w,u as C,J as y,an as u,e as T,S as j,a8 as A,ao as F}from"./main-abaca463.js";const O=()=>{const[r,p]=g.useState("0"),o=b(t=>t.formErrors),n=t=>{p(a=>a===t?"":t)};return o.hasError?e("div",{className:"mb-5",children:e("div",{className:"space-y-2 font-semibold",children:s("div",{className:"border border-danger rounded dark:border-danger",children:[s("button",{type:"button",className:"p-4 w-full flex items-center text-white-dark dark:bg-[#1b2e4b] !text-danger",onClick:()=>n("1"),children:["You have error on submitting form ,Click here to show",e("div",{className:"ltr:ml-auto rtl:mr-auto rotate-180"})]}),e("div",{children:e(w,{duration:700,height:r==="1"?"auto":0,children:e("div",{className:"space-y-2 p-4 text-white-dark text-[13px] border-t border-danger dark:border-danger",children:Object.entries(o).filter(([t])=>t!=="hasError").map(([t,a])=>e("div",{className:"flex items-center p-3.5 rounded text-danger bg-danger-light dark:bg-danger-dark-light",children:s("span",{className:"ltr:pr-2 rtl:pl-2",children:[s(m,{children:[" ",a," "]}),"."]})},t))})})})]})})}):e(m,{})},B=({formState:r,resetForm:p,disabled:o=!1})=>{const n=C(),t=b(c=>c.themeConfig),a=y(),f=new T,h=async(c="save")=>{n(u());const d=j.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:5e3}),v=await A(r.api);try{const i=await v.call(f,r);if(i.isOk)r.action==="create"&&n(p()),d.fire({icon:"success",timer:2e3,title:"Form submitted successfully",padding:"10px 20px"}).then(()=>{if(c==="save"){const l=r.redirectTo.replace(":id",`${i.data.data.id}`);a(l,{replace:!0})}else if(r.action!=="create"){const l=r.createRoute;a(l,{replace:!0})}});else if(i.status===422){const l=i.data.data,N={hasError:!0,...Object.fromEntries(Object.entries(l).map(([k,E])=>[k,E[0]]))};n(F(N)),d.fire({icon:"error",html:`<h5>Form Validation Error</h5>
                        <span style="font-size: 12px">Please Check fields</span>
                        `,padding:"10px 20px"})}else d.fire({icon:"error",title:"Internal Server Error ,submitting form failed",padding:"10px 20px"})}catch(i){console.error(i),d.fire({icon:"error",title:"Internal Server Error ,submitting form failed",padding:"10px 20px"})}},x=()=>{const c=location.pathname.replace("/add","/list");r.action=="edit"?a(-1):a(c,{replace:!0})};return g.useEffect(()=>{n(u())},[]),s(m,{children:[e("div",{className:" sticky top-0 z-10 px-0 flex-1 py-2 ltr:xl:mr-6 rtl:xl:ml-6 px-10",children:e("div",{className:" ",children:s("div",{className:"flex justify-between items-center mb-6",children:[e("div",{className:"flex items-center",children:s("span",{className:"text-xl font-bold",children:[t.pageTitle," : "]})}),s("div",{className:"flex items-center gap-2",children:[e("button",{onClick:x,className:"btn btn-danger gap-2",children:"Back"}),e("button",{disabled:o,onClick:()=>h("new"),className:"btn btn-primary gap-2",children:"Save and new"}),e("button",{disabled:o,onClick:()=>h("save"),className:"btn btn-success gap-2",children:"Save"})]})]})})}),e("div",{className:"",children:e("div",{className:"item-center",children:e(O,{})})})]})};export{B as A};
