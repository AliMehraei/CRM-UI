import{r as c,b as a,i as B,c as V,u as H,h as A,a as U,s as z,d as k,j as u,f as G,aH as J,e as K}from"./main-14f615f5.js";import{A as W,I as i}from"./InformationSectionPreview-130d8c00.js";import{M as T}from"./MultipleLineSectionPreview-708fbff5.js";import"./CommonIcons-8e83bba2.js";const X=({formAttribute:t,modelName:r,formState:l})=>{const[d,L]=c.useState(!0),o=async()=>{console.log(r,t,l[t]);let n=null;d?n=await B(r,t,l[t]):n=l[`${t}_preview`];const e=document.createElement("a");e.href=n,e.target="_blank",e.download=l[t].split("/").pop(),e.click()};return a("button",{disabled:!l[t],className:"btn btn-outline-primary cursor-pointer",onClick:o,children:"Download"})},te=()=>{var _,f,h,g,$,j,w,y,O,F,R,q,N,Q,x,P,S,C,D;const{hasPermission:t}=V(),r=H(),[l,d]=c.useState(!0),o=A().id,n=new K,e=U(s=>s.rfqFormSlice);c.useEffect(()=>{r(z("RFQ Preview"))});const I=()=>{window.print()},E=async()=>{const s=await n.fetchSingleRfq(o);if(s.status!=200)return;const M=s.data.data.rfq;r(J(M))};c.useEffect(()=>{E().then(()=>{d(!1)})},[o]);const m={leftObjects:[{label:"Account Name",value:`${(_=e.account)==null?void 0:_.account_name}`},{label:"Contact Name",value:`${e.contact?((f=e.contact)==null?void 0:f.first_name)+" "+((h=e.contact)==null?void 0:h.last_name):""}`},{label:"Customer RFQ No",value:(g=e.qoute)==null?void 0:g.customer_rfq_no},{label:"Project Name / Application",value:`${e.project_name}`},{label:" RFQ Source",value:`${e.rfq_source}`},{label:"RFQ Type",value:`${e.rfq_type}`},{label:"RFQ Date",value:`${e.rfq_}`},{label:"Status",value:`${e.status}`},{label:"RFQ Date",value:`${e.created_at}`},{label:"Date History",value:`${e.date_history}`},{label:"Exchange Rate",value:`${e.exchange_rate}`},{label:"Portal BOM id",value:`${e.portal_bom_id}`}],rightObjects:[{label:"RFQ Name",value:`${e.rfq_name}`},{label:"Owner Name",value:`${($=e.owner)==null?void 0:$.first_name} ${(j=e.owner)==null?void 0:j.last_name}`},{label:"Deal Stage",value:`${e.deal_stage}`},{label:"Lost Reason",value:`${(w=e.lead)==null?void 0:w.lost_reason}`},{label:"Lost Reason Comment",value:`${(y=e.lead)==null?void 0:y.lost_reason}`},{label:"PM User",value:`${(O=e.pm_user)==null?void 0:O.first_name} ${(F=e.pm_user)==null?void 0:F.last_name}`},{label:"Customer RFQ File",value:a(X,{formAttribute:"customer_rfq_file",modelName:"rfq",formState:e})},{label:"Created By",value:`${(R=e.creator)==null?void 0:R.first_name} ${(q=e.creator)==null?void 0:q.last_name}`},{label:"Modified By",value:`${(N=e.modifier)==null?void 0:N.first_name} ${(Q=e.modifier)==null?void 0:Q.last_name}`},{label:"RFQ Dead Line",value:`${e.rfq_dead_line}`},{label:"Currency ",value:`${e.currency}`},{label:"Vendor_RFQs_Line",value:`${(x=e.vendor_rfqs_line)==null?void 0:x.map(s=>s.vendor_name)}`}]},b={leftObjects:[{label:"Product Name",value:`${(P=e.product)==null?void 0:P.name}`},{label:"Customer Part Id",value:e.customer_part_id},{label:"Quantity",value:e.quantity},{label:"Target Price",value:e.target_price},{label:"Total",value:parseFloat(e.quantity)*parseFloat(e.target_price)}],rightObjects:[{label:"Alternative Products",value:`${(S=e.rfq_product_alternatives)==null?void 0:S.map(s=>s.product_name)}`}]},p={leftObjects:[{label:"Availability",value:`${(C=e.availability)==null?void 0:C.availability_name}`}],rightObjects:[{label:"Excess",value:`${(D=e.excess)==null?void 0:D.excess_name}`}]},v={leftObjects:[{label:"Processed for VRFQ round 1",value:`${e.processed_for_vrfq_round_1}`},{label:"Processed for VRFQ round 2",value:`${e.processed_for_vrfq_round_2}`},{label:"Open Status Time",value:`${e.open_status_date} ${e.open_status_time}`}]};return l?a(k,{}):!t("read-sales-order")||l?a(k,{}):u("div",{children:[a("div",{className:"flex items-center lg:justify-end justify-center flex-wrap gap-4 mb-6",children:a(W,{loading:l,hasPermission:t,modelId:o,exportTable:I,routeModel:"rfq",permissionModel:"sales-order"})}),u("div",{className:"panel",children:[u("div",{className:"flex justify-between flex-wrap gap-4 px-4",children:[a("div",{className:"text-2xl font-semibold uppercase",children:"RFQ"}),a("div",{className:"shrink-0",children:a("img",{src:G(e.image_data),alt:"RFQ image",className:"w-20 ltr:ml-auto rtl:mr-auto"})})]}),a(i,{title:"Header",leftObjects:m.leftObjects,rightObjects:m.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(i,{title:"RFQ Line",leftObjects:b.leftObjects,rightObjects:b.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(T,{sectionTitle:"Special Instructions",data:[{label:"Special Instructions",value:e.special_instructions}]}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(T,{sectionTitle:"Comment For Vendors ",data:[{label:"Comment For Vendors",value:e.comment}]}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(i,{title:"Convert TO Quote",leftObjects:p.leftObjects,rightObjects:p.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(i,{title:"Development",leftObjects:v.leftObjects,rightObjects:v.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"})]})]})};export{te as default};
