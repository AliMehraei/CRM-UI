import{u as $,c as H,r as o,d as M,h as Y,bb as q,s as y,ad as m,j as e,F as A,b as s,f as U,S as V,q as w,a as O}from"./main-bc7db150.js";const X=()=>{const i=$();H();const[b,v]=o.useState(""),[c,N]=o.useState(""),[f,S]=o.useState(""),[z,_]=o.useState("");o.useState([]);const[G,k]=o.useState(""),[J,u]=o.useState(!0),[F,E]=o.useState(""),l=M(a=>a.contactForm),p=new O,n=Y().contactId,[d,I]=o.useState("contact"),C=q(),{pathname:D}=C;o.useEffect(()=>{i(y(b))},[i]),o.useEffect(()=>{const t=window.location.pathname.split("/");I(t[1]=="availability-vendor"?"vendor":"contact"),v(m(t[1])+" - Import"),N(t[1]),S(m(t[1])+" Import"),_("Your "+m(t[1])+" List"),k("You don't have any"+m(t[1])+" List"),i(y(m(t[1])+" - Import"))},[]);const[h,L]=o.useState(!0),[g,T]=o.useState(0),B=async()=>{const a="https://phpstack-1110393-3914892.cloudwaysapps.com/ALPYN%20electronics%20BOM-List%20Samplefile.xlsx";console.log(a);const t=document.createElement("a");t.href=a,t.target="_blank",t.click()},P=a=>{const t=a.target.files[0];E(t)},j=async a=>{a.preventDefault();const t=V.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:5e3});try{const r=new FormData(a.target);let x=d+"_"+c+"_list";c=="availability-vendor"&&(x=d+"_availability_list"),r.append("has_header",h),r.append("ignored_top_rows",g),r.append("type",x),r.append("excess_bom_file",F),u(!0),(await p.importBomExcess(n,d,r)).status===200?(t.fire({icon:"success",timer:2e3,title:"Form submitted successfully",padding:"10px 20px"}),window.location.href=`/${c}/list/${n}`):t.fire({icon:"error",title:"Internal Server Error ,submitting form failed",padding:"10px 20px"}),u(!1)}catch{u(!1),t.fire({icon:"error",title:"Internal Server Error ,submitting form failed",padding:"10px 20px"})}},R=async()=>{if(D.split("/")[1]!="availability-vendor"){const a=await p.fetchSingleContact(n);if(a.status!=200)return;const t=a.data.data.contact;i(w(t))}else{const a=await p.fetchSingleVendor(n);if(a.status!=200)return;const t=a.data.data.vendor;i(w(t))}};return o.useEffect(()=>{R().then(()=>{u(!1)})},[n]),e(A,{children:s("div",{className:"panel px-0 border-white-light dark:border-[#1b2e4b]",children:[s("div",{className:"flex justify-end flex-wrap gap-4 px-4",children:[e("div",{className:"flex",children:s("div",{children:[s("div",{className:"text-sm font-semibold mt-5",children:[l.first_name," ",l.last_name," | ",l.vendor_name]}),e("div",{className:"text-s font-semibold ",children:l.email}),e("div",{className:"text-s font-semibold ",children:l.phone})]})}),s("div",{className:"shrink-0",children:[e("img",{src:U(l.image_data),alt:"Contact image",className:"w-20 ltr:ml-auto rtl:mr-auto"}),s("a",{className:"text-sm font-semibold mt-5  text-primary ",target:"_blank",href:`/${d}/preview/${n}`,children:["View ",d]})]})]}),e("hr",{className:"border-white-light dark:border-[#849bbc] my-6"}),s("div",{className:"px-4 sm:px-6 lg:px-8",children:[e("section",{className:"border-b border-gray-200 pb-4",children:e("div",{className:"sm:flex sm:items-center sm:justify-between",children:e("h3",{className:"title-1",children:e("b",{children:b})})})}),s("div",{className:" p-6 bg-white shadow-md",children:[e("h1",{className:"text-2xl font-bold mb-5",children:f}),s("form",{onSubmit:j,children:[s("div",{className:"mb-4",children:[e("label",{htmlFor:"title",className:"block text-gray-700 text-sm font-bold mb-2",children:"Title"}),e("input",{type:"text",id:"title",name:"title",placeholder:`Enter your new ${c} list name`,required:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),s("div",{className:"mb-4",children:[s("label",{htmlFor:"file",className:"block text-gray-700 text-sm font-bold mb-2",children:["Upload your ",c," list"]}),e("input",{className:"block w-full py-2 px-3 text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer  dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400",id:"excess-bom-file",type:"file",onChange:P}),e("p",{className:"text-gray-600 text-xs italic mt-2",children:"* Please kindly note that there is a maximum limit of 1000 rows allowed in a single sheet of an Excel file."}),e("button",{type:"button",onClick:B,className:"mt-2 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Download Sample Data"})]}),s("div",{className:"flex items-center justify-between mb-4",children:[e("label",{htmlFor:"has_header",className:"block text-gray-700 text-sm font-bold mb-2",children:"Files has a Header"}),s("div",{className:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in",children:[e("input",{type:"checkbox",name:"has_header",id:"has_header",checked:h,onChange:()=>L(!h),className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),e("label",{htmlFor:"has_header",className:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"})]})]}),s("div",{className:"mb-4",children:[e("label",{htmlFor:"ignored_top_rows",className:"block text-gray-700 text-sm font-bold mb-2",children:"Ignored rows from top"}),e("input",{type:"number",id:"ignored_top_rows",name:"ignored_top_rows",min:"0",value:g,onChange:a=>T(a.target.value),className:"shadow appearance-none border rounded w-20 py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),e("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:f})]})]})]})]})})};export{X as default};
