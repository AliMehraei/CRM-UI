import{u as g,c as _,a as b,b as e,j as i,F as $,k as x,r as h,f as B,s as K,g as Y,l as z}from"./main-23791f1d.js";import{A as s}from"./react-select-async.esm-ffb837fe.js";import{s as H,b as J,d as W,e as X,f as Z,i as ee,j as ae,k as le,a as G,G as U,c as te}from"./CommonFunctions-41741e79.js";import{S as u}from"./react-select.esm-6c13d46a.js";import{F as ne}from"./index-e4de3f7b.js";/* empty css                  */import"./Select-aecb2a80.esm-73517497.js";import"./sweetalert2.all-685335b3.js";const se=()=>{var p,N,y,w,C,S,D,V,O,F,q,T,E,M,j,k,I,A,L,R,P,Q;const c=g();new _;const l=b(a=>a.dealForm),t=(a,v)=>{c(x({[a]:v}))},o=[{value:"none",label:"-None-"},{value:"unangemeldeter",label:"Unangemeldeter Anruf/Besuch"},{value:"mitarbeitervermittlung",label:"Mitarbeitervermittlung"},{value:"kunden",label:"Kunden Vermittlung"},{value:"teilnehmer",label:"Teilnehmer"},{value:"mess",label:"Mess"}],n=[{value:"none",label:"-None-"},{value:"existierendes",label:"Existierendes Geschäft"},{value:"neues",label:"Neues Geschäft"}],r=[{value:"deal",label:"Deal"},{value:"excess",label:"Excess"}];let f=[{value:"qualification",label:"Qualifikation"}];const d={"Deals Information":{"Deals Owner":e(s,{isMulti:!1,id:"owner_id",placeholder:"Type at least 2 characters to search...",name:"owner_id",loadOptions:H,onChange:({value:a})=>{t("owner_id",a)},className:"flex-1",defaultValue:{value:(p=l.owner)==null?void 0:p.id,label:i("div",{className:"flex items-center",children:[e("img",{src:(N=l.owner)==null?void 0:N.avatar,alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}),i("div",{children:[e("div",{className:"text-sm font-bold",children:((y=l.owner)==null?void 0:y.first_name)+" "+((w=l.owner)==null?void 0:w.last_name)}),e("div",{className:"text-xs text-gray-500",children:(C=l.owner)==null?void 0:C.email})]})]},(S=l.owner)==null?void 0:S.id)}}),"Deals Name":e("input",{id:"deal_name",name:"deal_name",className:"form-input flex-1 ",onChange:a=>t(a.target.name,a.target.value),defaultValue:l.deal_name}),"Account Name":e(s,{isMulti:!1,id:"account_id",placeholder:"Type at least 2 characters to search...",name:"account_id",loadOptions:J,onChange:({value:a})=>{t("account_id",a)},className:"flex-1",defaultValue:{value:(D=l.account)==null?void 0:D.id,label:i("div",{className:"flex items-center",children:[e("img",{src:(V=l.account)==null?void 0:V.image,alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}),i("div",{children:[e("div",{className:"text-sm font-bold",children:(O=l.account)==null?void 0:O.account_name}),e("div",{className:"text-xs text-gray-500",children:(F=l.account)==null?void 0:F.email})]})]},(q=l.account)==null?void 0:q.id)}}),Type:e(u,{options:n,name:"deal_type",id:"deal_type",onChange:({value:a})=>{t("deal_type",a)},className:"flex-1",defaultValue:n.find(a=>a.value==l.deal_type)}),"Expected Revenue":e("input",{id:"expected_revenue",name:"expected_revenue",type:"text",value:"1",className:"flex-1 form-input disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",disabled:!0,defaultValue:l.expected_revenue}),"Lead Source":e(u,{options:o,name:"lead_source",id:"lead_source",onChange:({value:a})=>{t("lead_source",a)},className:"flex-1",defaultValue:o.find(a=>a.value==l.lead_source)}),"Contact Name":e(s,{isMulti:!1,id:"contact_id",placeholder:"Type at least 2 characters to search...",name:"contact_id",loadOptions:W,onChange:({value:a})=>{t("contact_id",a)},className:"flex-1",defaultValue:{value:(T=l.contact)==null?void 0:T.id,label:i("div",{className:"flex items-center",children:[e("img",{src:(E=l.contact)==null?void 0:E.image,alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}),i("div",{children:[e("div",{className:"text-sm font-bold",children:((M=l.contact)==null?void 0:M.first_name)+" "+((j=l.account)==null?void 0:j.last_name)}),e("div",{className:"text-xs text-gray-500",children:(k=l.contact)==null?void 0:k.email})]})]},(I=l.contact)==null?void 0:I.id)}}),Lead:e(s,{isMulti:!1,id:"lead_id",placeholder:"Type at least 2 characters to search...",name:"lead_id",loadOptions:X,onChange:({value:a})=>{t("lead_id",a)},className:"flex-1",defaultValue:{value:l.lead_id,label:e("div",{className:"flex items-center",children:e("div",{children:e("div",{className:"text-sm font-bold",children:(A=l.lead)==null?void 0:A.company})})},l.lead_id)}}),RFQ:e(s,{isMulti:!1,id:"rfq_id",placeholder:"Type at least 2 characters to search...",name:"rfq_id",loadOptions:Z,onChange:({value:a})=>{t("rfq_id",a)},className:"flex-1",defaultValue:{value:l.rfq_id,label:e("div",{className:"flex items-center",children:e("div",{children:e("div",{className:"text-sm font-bold",children:(L=l.rfq)==null?void 0:L.rfq_name})})},l.rfq_id)}}),Quote:e(s,{isMulti:!1,id:"quote_id",placeholder:"Type at least 2 characters to search...",name:"quote_id",loadOptions:ee,onChange:({value:a})=>{t("quote_id",a)},className:"flex-1",defaultValue:{value:l.quote_id,label:e("div",{className:"flex items-center",children:e("div",{children:e("div",{className:"text-sm font-bold",children:(R=l.quote)==null?void 0:R.subject})})},l.quote_id)}}),"Sales Order":e(s,{isMulti:!1,id:"sales_order_id",placeholder:"Type at least 2 characters to search...",name:"sales_order_id",loadOptions:ae,onChange:({value:a})=>{t("sales_order_id",a)},className:"flex-1",defaultValue:{value:l.sales_order_id,label:e("div",{className:"flex items-center",children:e("div",{children:e("div",{className:"text-sm font-bold",children:(P=l.sales_order)==null?void 0:P.subject})})},l.sales_order_id)}}),Invoice:e(s,{isMulti:!1,id:"invoice_id",placeholder:"Type at least 2 characters to search...",name:"invoice_id",loadOptions:le,onChange:({value:a})=>{t("invoice_id",a)},className:"flex-1",defaultValue:{value:l.invoice_id,label:e("div",{className:"flex items-center",children:e("div",{children:e("div",{className:"text-sm font-bold",children:(Q=l.invoice)==null?void 0:Q.subject})})},l.invoice_id)}}),Currency:e(u,{options:G,name:"currency",id:"currency",onChange:({value:a})=>{t("currency",a)},className:"flex-1",defaultValue:G.find(a=>a.value==l.currency)})},"":{Amount:e("input",{id:"amount",type:"number",name:"amount",className:"form-input flex-1 ",onChange:a=>t(a.target.name,a.target.value),defaultValue:l.amount}),"Closing Date":e(ne,{options:{dateFormat:"Y-m-d ",position:"auto left",defaultDate:`${l.closing_date?new Date(l.closing_date):""}`},name:"closing_date",value:l.closing_date?new Date(l.closing_date):"",className:"form-input flex-1",onChange:(a,v)=>t("closing_date",v)}),Pipeline:e(u,{options:r,name:"deal_pipeline",id:"deal_pipeline",onChange:({value:a})=>{t("deal_pipeline",a)},className:"flex-1",defaultValue:r.find(a=>a.value==l.deal_pipeline)}),Stage:e(u,{options:f,name:"deal_stage",id:"deal_stage",onChange:({value:a})=>{t("deal_stage",a)},className:"flex-1",defaultValue:f.find(a=>a.value==l.deal_stage)}),"Probability (%)":e("input",{id:"probability",name:"probability",className:"form-input flex-1 ",onChange:a=>t(a.target.name,a.target.value),defaultValue:l.probability}),"Next Step":e("input",{id:"next_step",name:"next_step",className:"form-input flex-1 ",onChange:a=>t(a.target.name,a.target.value),defaultValue:l.next_step}),"Exchange Rate":e("input",{id:"exchange_rate",name:"exchange_rate",type:"text",value:"1",className:"flex-1 form-input disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",disabled:!0,defaultValue:l.exchange_rate}),"Lead Reference":e("input",{id:"lead_reference",name:"lead_reference",className:"form-input flex-1 ",onChange:a=>t(a.target.name,a.target.value),defaultValue:l.lead_reference})}};return e($,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(U,{fields:d})})})},ie=()=>{const c=b(n=>n.dealForm),l=g();new _;const t=(n,r)=>{l(x({[n]:r}))},o={"Description Information":{Description:e("textarea",{id:"description",rows:3,name:"description",className:"form-textarea flex-1",placeholder:"",onChange:n=>t(n.target.name,n.target.value),defaultValue:c.description})},"":{}};return e($,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(U,{fields:o})})})},de=()=>i("div",{className:"mt-8 px-4",children:[e(se,{},"lealInfo"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(ie,{},"description")]}),xe=()=>{const c=b(d=>d.dealForm),[l,t]=h.useState(!0),n=B().id,r=new _,m=g();h.useEffect(()=>{m(K("Deal Edit"))});const f=async()=>{const d=await r.fetchSingleDeal(n);if(d.status!=200)return;const p=d.data.data.deal;m(x(p))};return h.useEffect(()=>{f().then(()=>{t(!1)})},[n]),h.useEffect(()=>{m(x({api:"updateSingleDeal",redirectTo:"updateSingleDeal",action:"edit"}))},[]),l?e(Y,{}):i("div",{className:"px-4",children:[e(te,{formState:c,resetForm:z}),e("div",{className:"flex xl:flex-row flex-col gap-2.5",children:e("div",{className:"panel px-0 flex-1 py-6 ltr:xl:mr-6 rtl:xl:ml-6 overflow-hidden",children:e(de,{})})})]})};export{xe as default};
