import{u as x,d as C,r as i,a as e,j as m,F as _,f as D,l as V,y as E,x as I,n as j,_ as k,B as L,z as G,aM as $,W as Q,V as U,aG as W,U as z,E as B,$ as K,G as H,b4 as Y,b6 as h,c as J,h as X,s as Z,b7 as S,e as O,b as ee}from"./main-053eacbc.js";import{G as N,A as ae}from"./GenerateFields-8203b778.js";import{S as f}from"./react-select.esm-b876113d.js";import{F as le}from"./index-49d1014b.js";/* empty css                  */import"./index-93cedf00.js";const w=[{value:"App\\Models\\Lead",label:"Lead"},{value:"App\\Models\\Contact",label:"Contact"}],v=[{value:"App\\Models\\Account",label:"Account",api:j,labelField:"account_name"},{value:"App\\Models\\Vendor",label:"Vendor",api:k,labelField:"vendor_name"},{value:"App\\Models\\Quote",label:"Quote",api:L,labelField:"subject"},{value:"App\\Models\\Rfq",label:"Rfq",api:G,labelField:"rfq_name"},{value:"App\\Models\\Excess",label:"Excess",api:$,labelField:"excess_name"},{value:"App\\Models\\Availability",label:"Availability",api:Q,labelField:"availability_name"},{value:"App\\Models\\Product",label:"Product",api:U,labelField:"product_name"},{value:"App\\Models\\Manufacturer",label:"Manufacturer",api:W,labelField:"name"},{value:"App\\Models\\Deal",label:"Deals",api:z,labelField:"deal_name"},{value:"App\\Models\\SalesOrder",label:"Sales Order",api:B,labelField:"subject"},{value:"App\\Models\\PurchaseOrder",label:"Purchase Order",api:K,labelField:"subject"},{value:"App\\Models\\Invoice",label:"Invoice",api:H,labelField:"subject"},{value:"App\\Models\\VendorRfq",label:"Vendor Rfq",api:Y,labelField:"vendor_rfq_name"}],P=[{value:"ausgehend",label:"Ausgehend"},{value:"eingehend",label:"Eingehend"},{value:"verpasst",label:"Verpasst"}],te=()=>{var F,A,M;const c=x(),l=C(a=>a.callForm),[n,r]=i.useState(l.callable_type),[b,t]=i.useState(l.relatable_type),[d,u]=i.useState({value:l.callable?l.callable.id:null,label:e("div",{className:"flex items-center",children:l.callable?m(_,{children:[e("img",{src:D((F=l==null?void 0:l.callable)==null?void 0:F.image_data),alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}),m("div",{children:[e("div",{className:"text-sm font-bold",children:`${l.callable.first_name} ${l.callable.last_name}`}),e("div",{className:"text-xs text-gray-500",children:l.callable.email})]})]}):e("div",{className:"text-sm font-bold"})},l.callable?l.callable.id:"default-key")}),y=(A=v.find(a=>a.value===l.relatable_type))==null?void 0:A.labelField,[p,g]=i.useState({value:l.relatable?l.relatable.id:null,label:e("div",{className:"flex items-center",children:e("div",{children:e("div",{className:"text-sm font-bold",children:l.relatable?l.relatable[y]:null})})},(M=l.relatable)==null?void 0:M.id)}),s=(a,o)=>{c(h({[a]:o}))},T=a=>(v.find(q=>q.value===b)??{value:null,label:null,api:j}).api.call(null,a),R={"Call Information":{"Call To":m("div",{className:"flex",children:[e(f,{id:"callable_type",name:"callable_type",onChange:({value:a})=>{r(a),u(null),s("callable_type",a),s("callable_id",null)},defaultValue:w.find(a=>a.value==l.callable_type),className:"flex-none w-64 mr-2",options:w}),e(V,{isMulti:!1,id:"callable_id",placeholder:"Type at least 2 characters to search...",name:"callable_id",value:d,menuPortalTarget:document.body,loadOptions:n==="App\\Models\\Lead"?E:I,onChange:({value:a,label:o})=>{u({value:a,label:o}),s("callable_id",a)},className:"flex-1",required:!0})]}),"Related To":m("div",{className:"flex",children:[e(f,{id:"relatable_type",name:"relatable_type",onChange:({value:a})=>{t(a),g(null),s("relatable_type",a),s("relatable_id",null)},className:"flex-none w-64 mr-2",options:v,defaultValue:v.find(a=>a.value==l.relatable_type)}),e(V,{isMulti:!1,id:"relatable_id",menuPortalTarget:document.body,placeholder:"Type at least 2 characters to search...",name:"relatable_id",loadOptions:a=>T(a),onChange:({value:a,label:o})=>{g({value:a,label:o}),s("relatable_id",a)},value:p,className:"flex-1",required:!0})]}),"Call Type":e(f,{id:"type",name:"type",required:!0,options:P,defaultValue:P.find(a=>a.value==l.type),onChange:({value:a})=>{s("type",a)},className:"flex-1"}),"Outgoing Call Status":e("input",{id:"outgoing_call_status",name:"outgoing_call_status",type:"text",placeholder:"Readonly input here…",className:"flex-1 form-input disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",defaultValue:"Abgeschlossen",disabled:!0}),"Call Start Time":e(le,{required:!0,name:"call_start_time","data-enable-time":!0,options:{enableTime:!0,dateFormat:"Y-m-d H:i",position:"auto left",defaultDate:l.call_start_time?new Date(l.call_start_time):null},onChange:(a,o)=>s("call_start_time",o),className:"form-input flex-1"}),"Call Duration":m("div",{className:"flex",children:[e("input",{id:"call_duration_minutes",required:!0,name:"call_duration_minutes",className:"form-input mr-2 flex-1 ",onChange:a=>s(a.target.name,a.target.value),placeholder:"Minutes",defaultValue:l.call_duration_minutes}),e("input",{id:"call_duration_seconds",required:!0,name:"call_duration_seconds",className:"form-input ml-2 flex-1 ",onChange:a=>s(a.target.name,a.target.value),placeholder:"Seconds",defaultValue:l.call_duration_seconds})]}),Subject:e("input",{required:!0,id:"subject",name:"subject",className:"form-input flex-1 ",defaultValue:l.subject,onChange:a=>s(a.target.name,a.target.value)}),"Voice Recording":e("input",{id:"voice_recording",name:"voice_recording",className:"form-input flex-1 ",defaultValue:l.voice_recording,onChange:a=>s(a.target.name,a.target.value)})}};return e(_,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(N,{fields:R})})})},se=()=>{const c=x(),l=C(t=>t.callForm),n=(t,d)=>{c(h({[t]:d}))},r=[{value:"none",label:"None"},{value:"möglicher_kunde",label:"Möglicher Kunde"},{value:"administrative",label:"Administrativ"},{value:"negotiation",label:"Verhandlung"},{value:"demo",label:"Demo"},{value:"project",label:"Projekt"}],b={"Purpose Of Outgoing Call":{"Call Purpose":e(f,{id:"call_purpose",name:"call_purpose",options:r,menuPortalTarget:document.body,defaultValue:r.find(t=>t.value==l.call_purpose),onChange:({value:t})=>{n("call_purpose",t)},className:"flex-1"}),"Call Agenda":e("input",{id:"call_agenda",name:"call_agenda",className:"form-input flex-1 ",onChange:t=>n(t.target.name,t.target.value),defaultValue:l.call_agenda})}};return e(_,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(N,{fields:b})})})},ne=()=>{const c=x(),l=C(t=>t.callForm),n=(t,d)=>{c(h({[t]:d}))},r=[{value:"none",label:"None - Interessiert"},{value:"interessiert",label:"Interessiert"},{value:"not_interested",label:"Nicht interessiert"},{value:"no_response_busy",label:"Keine Antwort/besetzt"},{value:"more_information",label:"Wünscht mehr Information"},{value:"callback_requested",label:"Wünscht Rückruf"}],b={"Purpose Of Outgoing Call":{"Call Result":e(f,{id:"call_result",name:"call_result",options:r,defaultValue:r.find(t=>t.value==l.call_result),onChange:({value:t})=>{n("call_result",t)},className:"flex-1"}),Description:e("input",{id:"description",name:"description",className:"form-input flex-1 ",defaultValue:l.description,onChange:t=>n(t.target.name,t.target.value)})}};return e(_,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(N,{fields:b})})})},re=()=>m("div",{className:"mt-8 px-4",children:[e(te,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(se,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(ne,{})]}),me=()=>{const{hasPermission:c}=J(),l=C(p=>p.callForm),[n,r]=i.useState(!0),t=X().id,d=new ee,u=x();i.useEffect(()=>{u(Z("Call Edit"))}),i.useEffect(()=>{u(S())},[]);const y=async()=>{const p=await d.fetchSingleCall(t);if(p.status!=200)return;const g=p.data.data.call;u(h(g))};return i.useEffect(()=>{y().then(()=>{r(!1)})},[t]),i.useEffect(()=>{u(h({api:"updateSingleCall",redirectTo:"/call/edit/:id",action:"edit"}))},[]),n?e(O,{}):!c("update-call")||n?e(O,{}):m("div",{className:"px-4",children:[e(ae,{formState:l,resetForm:S}),e("div",{className:"flex xl:flex-row flex-col gap-2.5",children:e("div",{className:"panel px-0 flex-1 py-6 ltr:xl:mr-6 rtl:xl:ml-6 overflow-hidden",children:e(re,{})})})]})};export{me as default};
