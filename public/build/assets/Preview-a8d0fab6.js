import{c as W,u as X,r,h as Y,d as ee,s as ae,T as E,j as a,e as F,b as o,f as le,U as te,V as ie,a as se}from"./main-38fe5343.js";import{I as re}from"./InfoListComponent-5478568b.js";import{A as oe,I as l}from"./InformationSectionPreview-c33d83be.js";import{M as Q}from"./MultipleLineSectionPreview-c762b0ac.js";import{T as ne}from"./TableSectionPreview-b4585c5d.js";import{A as be}from"./AttachmentSection-80fb3b61.js";import"./CommonIcons-7619afcd.js";const ye=()=>{var p,h,g,y,_,f,O,$,S,j,w,N,k,C,P,A,D,I,T,x,L,B,q,M,R;const{hasPermission:n}=W(),b=X(),[s,H]=r.useState(!0),t=Y().id,U=new se,e=ee(i=>i.salesOrderForm);r.useEffect(()=>{b(ae("Sales Preview"))});const V=()=>{window.print()},z=async()=>{const i=await U.fetchSingleSalesOrder(t);if(i.status!=200)return;const K=i.data.data.salesOrder;b(te(K))};r.useEffect(()=>{z().then(()=>{H(!1)})},[t]);const G=[{value:"none",label:"-None-"},{value:"single_order",label:"Single Order"},{value:"frame_contract",label:"Frame Contract"},{value:"call_off",label:"Call Off"},{value:"forecast",label:"Forecast"}],c={leftObjects:[{label:"Account Name",value:`${(p=e.account)==null?void 0:p.account_name}`},{label:"Contact Name",value:`${e.contact?((h=e.contact)==null?void 0:h.first_name)+" "+((g=e.contact)==null?void 0:g.last_name):""}`},{label:"Quote Name",value:(y=e.qoute)==null?void 0:y.subject},{label:"Currency",value:`${e.currency}`}],rightObjects:[{label:"SO Number",value:`${e.so_number}`},{label:"Deals Name",value:`${(_=e.deal)==null?void 0:_.deal_name}`},{label:"Deal Stage",value:`${(f=e.deal)==null?void 0:f.deal_stage}`},{label:"Lost Reason",value:`${(O=e.lead)==null?void 0:O.lost_reason}`},{label:"Lost Reason Comment",value:`${($=e.lead)==null?void 0:$.lost_reason}`},{label:"SO Date",value:`${e.so_date}`},{label:"Exchange Rate ",value:`${e.exchange_rate}`}]},d={leftObjects:[{label:"Purchase Order",value:`${e.purchase_order}`},{label:"Customer PO date",value:`${e.customer_po_date}`},{label:"PO upload",value:`${e.po_upload} `},{label:"SO Type",value:E(e.so_type,G)},{label:"Parent SO Nr",value:e.parent_so_nr}],rightObjects:[{label:"Subject",value:`${e.subject}`},{label:"Pending",value:`${e.pending}`},{label:"Status",value:`${E(e.status,ie)}`},{label:"ZohoBooksId",value:`${e.zoho_books_id}`}]},u={leftObjects:[{label:"Sales Total",value:`${e.sales_total}`},{label:"GP Total",value:`${e.gp_total}`},{label:"Margin",value:`${e.margin}`}],rightObjects:[{label:"Resale Price",value:`${e.resale_price}`},{label:"Cost Vendor",value:`${e.cost_vendor}`}]},m={leftObjects:[{label:"Availability Name",value:`${(S=e.availability)==null?void 0:S.availability_name}`},{label:"Availability No",value:`${(j=e.availability)==null?void 0:j.availability_no}`},{label:"Availability Cost",value:`${(w=e.availability)==null?void 0:w.cost}`}],rightObjects:[{label:"Availability Quantity",value:((N=e.availability)==null?void 0:N.quantity)!==null?`${(k=e.availability)==null?void 0:k.quantity}`:null},{label:"Availability LT",value:`${(C=e.availability)==null?void 0:C.lead_time}`},{label:"Availability DC",value:`${(P=e.availability)==null?void 0:P.date_code}`}]},v={leftObjects:[{label:"Billing Street",value:`${e.billing_street}`},{label:"Billing City",value:`${e.billing_city}`},{label:"Billing State",value:`${e.billing_state}`},{label:"Billing Code",value:`${e.billing_code}`},{label:"Billing Country",value:`${e.billing_country}`}],rightObjects:[{label:"Shipping Street",value:`${e.shipping_street}`},{label:"Shipping City",value:`${e.shipping_city}`},{label:"Shipping State",value:`${e.shipping_state}`},{label:"Shipping Code",value:`${e.shipping_code}`},{label:"Shipping Country",value:`${e.shipping_country}`}]},Z=[{key:"product_name",label:"Product Name",model:"product"},{key:"quantity",label:"Quantity"},{key:"customer_part_id",label:"Customer Part ID"},{key:"list_price",label:"List Price"},{key:"date_code",label:"Date Code"},{key:"amount",label:"Amount"},{key:"requested_delivery_date",label:"Requested Delivery Date"},{key:"estimated_delivery_date",label:"Estimated Delivery Date"}],J=[{label:"Sales Order Owner",value:`${((A=e.owner)==null?void 0:A.first_name)??""} ${((D=e.owner)==null?void 0:D.last_name)??""}`},{label:"Sales Person",value:`${((I=e.sales_person)==null?void 0:I.first_name)??""} ${((T=e.sales_person)==null?void 0:T.last_name)??""}`},{label:"Approved By",value:`${((x=e.approved_by)==null?void 0:x.first_name)??""} ${((L=e.approved_by)==null?void 0:L.last_name)??""}`},{label:"Created By",value:`${((B=e.creator)==null?void 0:B.first_name)??""} ${((q=e.creator)==null?void 0:q.last_name)??""}`},{label:"Modified By",value:`${((M=e.modifier)==null?void 0:M.first_name)??""} ${((R=e.modifier)==null?void 0:R.last_name)??""}`}];return s?a(F,{}):!n("read-sales-order")||s?a(F,{}):o("div",{children:[a("div",{className:"flex items-center lg:justify-end justify-center flex-wrap gap-4 mb-6",children:a(oe,{loading:s,hasPermission:n,modelId:t,exportTable:V,routeModel:"sales",permissionModel:"sales-order"})}),o("div",{className:"panel",children:[o("div",{className:"flex justify-between flex-wrap gap-4 px-4",children:[a("div",{className:"text-2xl font-semibold uppercase",children:"Sales Order"}),a("div",{className:"shrink-0",children:a("img",{src:le(e.image_data),alt:"Sales Order image",className:"w-20 ltr:ml-auto rtl:mr-auto"})})]}),a(re,{data:J}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(l,{title:"Header",leftObjects:c.leftObjects,rightObjects:c.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(l,{title:"Sales Order Information",leftObjects:d.leftObjects,rightObjects:d.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(ne,{title:"Ordered Items",items:e.items,columns:Z,total:e.sales_total}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(l,{title:"SO Line",leftObjects:u.leftObjects,rightObjects:u.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(l,{title:"Linked Availability",leftObjects:m.leftObjects,rightObjects:m.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(l,{title:"Address Information",leftObjects:v.leftObjects,rightObjects:v.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(Q,{sectionTitle:"Terms And Conditions",data:[{label:"Terms and Conditions",value:e.terms_and_conditions}]}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(Q,{sectionTitle:"Description ",data:[{label:"Description",value:e.description}]}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(be,{modelId:t,modelName:"salesOrder"})]})]})};export{ye as default};
