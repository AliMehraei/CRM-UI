import{u as U,d as j,c as Y,a as I,r as t,h as O,j as e,e as se,F as T,S as P,b as r,ac as ae,bb as re,s as G,ad as _,f as oe,N as ne,q as H}from"./main-d8a5bb6c.js";import{C as ie}from"./CommonIcons-2d80fe0b.js";import{s as q,Q as ce}from"./sortBy-b97195a6.js";import"./_baseIsEqual-080469de.js";const le=({tableColumns:c,reload:l,frontRoute:y})=>{U(),j(o=>o.filters),Y();const C=new I,B=j(o=>o.themeConfig.theme)==="dark",[b,R]=t.useState([]),[w,L]=t.useState([]),[g,v]=t.useState(1),[E,m]=t.useState(!0),n=[50,100],[d,s]=t.useState(n[0]),u=O().id,[x,f]=t.useState(q(b,"id")),[M,A]=t.useState(x),[h,i]=t.useState([]),[Q,Z]=t.useState(0),[N,J]=t.useState({columnAccessor:"id",direction:"desc"}),$=(o="",p="success")=>{P.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,customClass:{container:"toast"}}).fire({icon:p,title:o,padding:"10px 20px"})},D=async(o=1,p=n[0],S=[],X={})=>{m(!0);const{columnAccessor:ee="",direction:te=""}=X;try{await C[y](u,{page:o,pageSize:p,sortField:ee,sortDirection:te}).then(k=>{var F,W,z,V;R((W=(F=k.data)==null?void 0:F.data)==null?void 0:W.data),Z((V=(z=k.data)==null?void 0:z.data)==null?void 0:V.total),m(!1)}).catch(k=>{console.error("Error fetching data: ",k),m(!1),$("Error fetching data.","error")})}catch(k){$("Error fetching data.","error"),console.error("Error fetching data: ",k),m(!1)}},K=o=>{const{columnAccessor:p,direction:S="asc"}=o;J({columnAccessor:p,direction:S}),v(1),D(g,d,w,{columnAccessor:p,direction:S})};return t.useEffect(()=>{const o=q(b,N.columnAccessor),p=N.direction!=="asc"?o.reverse():o;f(p)},[b,N]),t.useEffect(()=>{v(1)},[d]),t.useEffect(()=>{A([...x.slice(0,d)])},[g,d,x]),t.useEffect(()=>{D(g,d,w,N)},[g,d,N,l]),E?e(se,{}):e(T,{children:e("div",{className:"panel px-0 border-white-light dark:border-[#1b2e4b]",children:e("div",{className:"bom-excess-table",children:e("div",{className:"grid grid-cols-1 gap-6 mb-6",children:e("div",{className:"panel col-span-12",children:e("div",{className:"datatables pagination-padding",children:E?e("div",{className:"flex justify-center",children:e("span",{className:"animate-spin border-4 my-4 border-success border-l-transparent rounded-full w-12 h-12 inline-block align-middle m-auto mb-10"})}):e(ce,{className:`${B} whitespace-nowrap table-hover`,records:M,columns:c,highlightOnHover:!0,totalRecords:Q,recordsPerPage:d,page:g,onPageChange:v,recordsPerPageOptions:n,onRecordsPerPageChange:s,sortStatus:N,onSortStatusChange:K,selectedRecords:h,onSelectedRecordsChange:i,paginationText:({from:o,to:p,totalRecords:S})=>`Showing ${o} to ${p} of ${S} entries`})})})})})})})},de=({contactId:c,btnRoute:l})=>{const[y,C]=t.useState([]),[B,b]=t.useState(1),[R,w]=t.useState(!0),[L,g]=t.useState(!0),v=new I,E=(s=null)=>{P.fire({icon:"warning",title:"Are you sure?",text:"Are you sure delete Rows!",showCancelButton:!0,confirmButtonText:"Delete",padding:"2em",customClass:"sweet-alerts"}).then(a=>{a.value&&(s?(n(s),C([])):((y||[]).map(f=>f.id).forEach(f=>n(f)),C([]),b(1)),P.fire({title:"Deleted!",text:"Row has been deleted.",icon:"success",customClass:"sweet-alerts"}))})},m=(s="",a="success")=>{P.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,customClass:{container:"toast"}}).fire({icon:a,title:s,padding:"10px 20px"})},n=async s=>{try{w(!0),ae("deleteSingleBomItem").call(v,s).then(a=>{const u=a.data;u.status?(g(!L),m("Successful deleting the Bom Item: "+u.message,"success")):(m("Error deleting the Bom Item: "+u.message,"error"),console.error("Error deleting the Bom Item : ",u.message))}),w(!1)}catch(a){m("Error making delete request","error"),console.error("Error making delete request",a),w(!1)}};return e("div",{className:"pt-5 flex-1",children:e("div",{className:"grid  gap-6 mb-6",children:e("div",{className:"panel h-full xl:col-span-2",children:r("div",{className:"relative",children:[r("h5",{className:"font-semibold text-lg",children:["List ",l]}),e("div",{className:"bg-white dark:bg-black rounded-lg",children:e(le,{tableColumns:[{accessor:"id",sortable:!0,render:({id:s})=>e("div",{className:"font-semibold",children:s})},{accessor:"title",sortable:!0,render:({title:s})=>e("div",{className:"font-semibold",children:s})},{accessor:"status",title:"Status",sortable:!0,render:({status:s})=>e("div",{className:"font-semibold",children:`${s}`})},{accessor:"created_at",title:"Created At",sortable:!0,render:({created_at:s})=>e("div",{className:"font-semibold",children:s})},{accessor:"action",title:"Actions",sortable:!1,textAlignment:"center",render:({id:s,status:a})=>e(T,{children:r("div",{className:"flex gap-4 items-center w-max mx-auto",children:[["new","header_selected"].includes(a)&&r("a",{href:"/"+l+"/confirmation/"+c+"/"+s,className:"bg-white p-2 rounded-md text-primary-500 border border-primary-500 hover:text-white hover:bg-sky-600 default-transition pulse-primary flex items-center justify-center",children:[e("span",{className:"text-sm",children:"Go to header selection page"}),e("svg",{className:"w-5 h-5 ml-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"})})]}),["pre_processing","pre_processed_with_failures","pre_processed_successfully"].includes(a)&&r("a",{href:"/"+l+"/process/"+c+"/"+s,className:"bg-white p-2 rounded-md text-primary-500 border border-primary-500 hover:text-white hover:bg-sky-600 default-transition pulse-primary flex items-center justify-center",children:[e("span",{className:"text-sm",children:"Go to the pre-process page"}),e("svg",{className:"w-5 h-5 ml-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"})})]}),["processed_successfully","processed_with_failures"].includes(a)&&e("a",{href:"/"+l+"/complete/"+c+"/"+s,className:"bg-white p-2 rounded-md text-primary-500 border border-primary-500 hover:text-white hover:bg-sky-600 default-transition pulse-primary",children:r("svg",{className:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:[e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),r("button",{type:"button",className:"btn btn-danger gap-2",onClick:()=>E(s),children:[r("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",children:[e("path",{d:"M20.5001 6H3.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),e("path",{d:"M18.8334 8.5L18.3735 15.3991C18.1965 18.054 18.108 19.3815 17.243 20.1907C16.378 21 15.0476 21 12.3868 21H11.6134C8.9526 21 7.6222 21 6.75719 20.1907C5.89218 19.3815 5.80368 18.054 5.62669 15.3991L5.16675 8.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),e("path",{opacity:"0.5",d:"M9.5 11L10 16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),e("path",{opacity:"0.5",d:"M14.5 11L14 16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),e("path",{opacity:"0.5",d:"M6.5 6C6.55588 6 6.58382 6 6.60915 5.99936C7.43259 5.97849 8.15902 5.45491 8.43922 4.68032C8.44784 4.65649 8.45667 4.62999 8.47434 4.57697L8.57143 4.28571C8.65431 4.03708 8.69575 3.91276 8.75071 3.8072C8.97001 3.38607 9.37574 3.09364 9.84461 3.01877C9.96213 3 10.0932 3 10.3553 3H13.6447C13.9068 3 14.0379 3 14.1554 3.01877C14.6243 3.09364 15.03 3.38607 15.2493 3.8072C15.3043 3.91276 15.3457 4.03708 15.4286 4.28571L15.5257 4.57697C15.5433 4.62992 15.5522 4.65651 15.5608 4.68032C15.841 5.45491 16.5674 5.97849 17.3909 5.99936C17.4162 6 17.4441 6 17.5 6",stroke:"currentColor",strokeWidth:"1.5"})]}),"Delete"]})]})})}],reload:L,frontRoute:`${l=="availability-vendor"?"availabilityVendor":l}ItemList`})})]})})})})},ge=()=>{const c=U();Y();const[l,y]=t.useState(""),[C,B]=t.useState("bom"),[b,R]=t.useState(""),[w,L]=t.useState("");t.useState([]);const[g,v]=t.useState(""),[E,m]=t.useState(!0),n=j(h=>h.contactForm),d=new I,a=O().id,u=re(),{pathname:x}=u,[f,M]=t.useState("contact");t.useEffect(()=>{c(G(l))},[c]);const A=async()=>{if(x.split("/")[1]!="availability-vendor"){const h=await d.fetchSingleContact(a);if(h.status!=200)return;const i=h.data.data.contact;c(H(i))}else{const h=await d.fetchSingleVendor(a);if(h.status!=200)return;const i=h.data.data.vendor;c(H(i))}};return t.useEffect(()=>{const i=window.location.pathname.split("/");M(i[1]=="availability-vendor"?"vendor":"contact"),y(_(i[1])+" - File Upload"),B(i[1]),R("Add Your "+_(i[1])+" List"),L("Your "+_(i[1])+" List"),v("You don't have any"+_(i[1])+" List"),c(G(_(i[1])+" - File Upload"))},[]),t.useEffect(()=>{A().then(()=>{m(!1)})},[a]),e(T,{children:r("div",{className:"panel px-0 border-white-light dark:border-[#1b2e4b]",children:[r("div",{className:"flex justify-end flex-wrap gap-4 px-4",children:[e("div",{className:"flex",children:r("div",{children:[r("div",{className:"text-sm font-semibold mt-5",children:[n.first_name," ",n.last_name," | ",n.vendor_name]}),e("div",{className:"text-s font-semibold ",children:n.email}),e("div",{className:"text-s font-semibold ",children:n.phone})]})}),r("div",{className:"shrink-0",children:[e("img",{src:oe(n.image_data),alt:"Contact image",className:"w-20 ltr:ml-auto rtl:mr-auto"}),r("a",{className:"text-sm font-semibold mt-5  text-primary ",target:"_blank",href:`/${f}/preview/${a}`,children:["View ",f]})]})]}),e("hr",{className:"border-white-light dark:border-[#849bbc] my-6"}),r("div",{className:"px-4 sm:px-6 lg:px-8",children:[e("section",{className:"border-b border-gray-200 pb-4",children:r("div",{className:"sm:flex sm:items-center sm:justify-between",children:[e("h3",{className:"title-1",children:e("b",{children:l})}),e("div",{className:"mt-3 sm:mt-0 sm:ml-4",id:"bom-file-upload-tour",children:r(ne,{to:`/${C}/import/${a}`,className:"flex btn btn-primary pulse-primary",children:[e(ie,{}),b]})})]})}),e(de,{contactId:a,btnRoute:x.split("/")[1]})]})]})})};export{ge as default};
