import{u as w,a as f,T as F,b as s,F as b,j as i,c as p,U as _,V as O}from"./main-23791f1d.js";import{S as j}from"./sweetalert2.all-685335b3.js";const k=({formState:t,resetForm:a})=>{const e=w(),l=f(o=>o.themeConfig),n=F(),d=new p,c=async(o="save")=>{e(_());const v=j.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:5e3}),h=d[t.api];if(typeof h!="function"){console.log("fds","error api");return}const u=await h.call(d,t);if(u.isOk)t.action==="create"&&e(a()),v.fire({icon:"success",timer:2e3,title:"Form submitted successfully",padding:"10px 20px"}).then(()=>{if(o==="save"){const m=t.redirectTo.replace(":id",`${u.data.data.id}`);n(m,{replace:!0})}else if(t.action!=="create"){const m=t.createRoute;n(m,{replace:!0})}});else if(u.status===422){const m=u.data.data,N={hasError:!0,...Object.fromEntries(Object.entries(m).map(([g,y])=>[g,y[0]]))};e(O(N)),v.fire({icon:"error",html:`<h5>Form Validation Error</h5>
                        <span style="font-size: 12px">Please Check fields</span>
                        `,padding:"10px 20px"})}else v.fire({icon:"error",title:"Internal Server Error ,submitting form failed",padding:"10px 20px"})},x=()=>{const o=location.pathname.replace("/add","/list");t.action=="edit"?n(-1):n(o,{replace:!0})};return s(b,{children:s("div",{className:" sticky top-0 z-10 px-0 flex-1 py-2 ltr:xl:mr-6 rtl:xl:ml-6 px-10",children:s("div",{className:" ",children:i("div",{className:"flex justify-between items-center mb-6",children:[s("div",{className:"flex items-center",children:i("span",{className:"text-xl font-bold",children:[l.pageTitle," : "]})}),i("div",{className:"flex items-center gap-2",children:[s("button",{onClick:x,className:"btn btn-danger gap-2",children:"Back"}),s("button",{onClick:()=>c("new"),className:"btn btn-primary gap-2",children:"Save and new"}),s("button",{onClick:()=>c("save"),className:"btn btn-success gap-2",children:"Save"})]})]})})})})},A=()=>s("span",{className:"text-red-500",children:" *"}),S=({fields:t})=>{const a=f(e=>e.formErrors);return s(b,{children:Object.entries(t).map(([e,l],n)=>s("div",{className:"lg:w-1/2 w-full ltr:lg:mr-6 rtl:lg:ml-6 mb-6",children:i("div",{className:"",children:[s("div",{className:"text-lg",children:e?`${e}:`:s("div",{className:"mt-10"})}),Object.entries(l).map(([d,c])=>s("div",{className:Object.keys(a).length>1&&a[c.props.name]?"mt-4 items-center has-error":"mt-4 items-center",children:i("div",{className:"flex",children:[i("label",{className:"ltr:mr-2 rtl:ml-2 w-1/3 mb-0 mt-2",children:[d,c.props.required&&s(A,{})]},d),i("div",{className:"w-full",children:[c,Object.keys(a).length>1&&a[c.props.name]&&i("div",{className:"text-danger mt-1",children:[" ",a[c.props.name]]})]})]})},d))]},e)},`${e}_${n}`))})},r=new p,q=[{value:"none",label:"-None-"},{value:"waiting",label:"Waiting"},{value:"confirmed",label:"Confirmed"},{value:"rejected",label:"Rejected"}],D=[{value:"EUR",label:"EUR"},{value:"USD",label:"USD"}],R=[{value:"none",label:"-None-"},{value:"yes",label:"Yes"},{value:"no",label:"No"}],P=[{value:"draft",label:"Draft"},{value:"approved",label:"Approved"},{value:"confirmed",label:"Confirmed"},{value:"closed",label:"Closed"}],U=[{value:"none",label:"-None-"},{value:"draft",label:"Draft"},{value:"no_feedback",label:"No Feedback"},{value:"negotiation_price",label:"Negotiation Price"},{value:"negotiation_conditions",label:"Negotiation Conditions"},{value:"open",label:"Open"},{value:"lost",label:"Lost"},{value:"won",label:"Won"}],I=(t,a)=>{t.target.files&&t.target.files.length>0&&r.uploadFile(t.target.files[0]).then(e=>{a(e)}).catch()},M=[{value:"none",label:"-None-"},{value:"ems",label:"EMS"},{value:"odm",label:"ODM(EMS + Development)"},{value:"oem",label:"OEM"},{value:"reseller",label:"Reseller"},{value:"systemintegrator_it",label:"System-Integrator It"},{value:"other",label:"Other"}],T=[{value:"nda",label:"NDA"},{value:"quality_agreement",label:"Quality Agreement"},{value:"logistic_agreement",label:"Logistic Agreement"},{value:"other_agreement",label:"Other Agreement"}],V=async t=>{const a=await r.searchProduct({query:t});if(a.status){const e="id",l="product_name";return a.data.data.map(n=>({value:n[e],label:s("div",{className:"flex items-center",children:s("div",{className:"text-sm font-bold",children:n[l]})},n[e])}))}},Q=async t=>{const a=await r.searchRfq({query:t});if(a.status)return a.data.data.map(e=>({value:e.id,label:s("div",{className:"flex items-center",children:s("div",{className:"text-sm font-bold",children:e.rfq_name})},e.id)}))},L=async t=>{const a=await r.searchVendorRfq({query:t});if(a.status)return a.data.data.map(e=>({value:e.id,label:s("div",{className:"flex items-center",children:s("div",{className:"text-sm font-bold",children:e.vendor_rfq_name})},e.id)}))},$=async t=>{const a=await r.searchDeal({query:t});if(a.status)return a.data.data.map(e=>({value:e.id,label:s("div",{className:"flex items-center",children:s("div",{className:"text-sm font-bold",children:e.deal_name})},e.id)}))},B=async t=>{const a=await r.searchVendor({query:t});if(a.status)return a.data.data.map(e=>({value:e.id,label:s("div",{className:"flex items-center",children:s("div",{className:"text-sm font-bold",children:e.vendor_name})},e.id)}))},z=async t=>{const a=await r.searchAvailability({query:t});if(a.status)return a.data.data.map(e=>({value:e.id,label:s("div",{className:"flex items-center",children:s("div",{className:"text-sm font-bold",children:e.availability_name})},e.id)}))},G=async t=>{const a=await r.searchQuote({query:t});if(a.status)return a.data.data.map(e=>({value:e.id,label:s("div",{className:"flex items-center",children:s("div",{className:"text-sm font-bold",children:e.subject})},e.id)}))},W=async t=>{const a=await r.searchInvoice({query:t});if(a.status)return a.data.data.map(e=>({value:e.id,label:s("div",{className:"flex items-center",children:s("div",{className:"text-sm font-bold",children:e.subject})},e.id)}))},Y=async t=>{const a=await r.searchPurchaseOrder({query:t});if(a.status)return a.data.data.map(e=>({value:e.id,label:s("div",{className:"flex items-center",children:s("div",{className:"text-sm font-bold",children:e.subject})},e.id)}))},H=async t=>{const a=await r.searchAvailability({query:t});if(a.status)return a.data.data.map(e=>({value:e.id,label:s("div",{className:"flex items-center",children:s("div",{className:"text-sm font-bold",children:e.availability_name})},e.id)}))},J=async t=>{const a=await r.loadAdminUsers(t),e="userId",l="first_name",n="avatar",d="email";if(a.status)return a.data.map(c=>({value:c[e],label:i("div",{className:"flex items-center",children:[s("img",{src:c[n],alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}),i("div",{children:[s("div",{className:"text-sm font-bold",children:c[l]+" "+c.last_name}),s("div",{className:"text-xs text-gray-500",children:c[d]})]})]},c[e])}))},K=async t=>{const a=await r.searchAccount({query:t}),e="id",l="account_name",n="image",d="email";if(a.status===200)return a.data.data.map(c=>({value:c[e],label:i("div",{className:"flex items-center",children:[s("img",{src:c[n],alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}),i("div",{children:[s("div",{className:"text-sm font-bold",children:c[l]}),s("div",{className:"text-xs text-gray-500",children:c[d]})]})]},c[e])}))},X=async t=>{const a=await r.searchLead({query:t}),e="id";if(a.status===200)return a.data.data.map(l=>({value:l[e],label:i("div",{className:"flex items-center",children:[s("img",{src:l.image,alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}),i("div",{children:[s("div",{className:"text-sm font-bold",children:l.company}),s("div",{className:"text-xs text-gray-500",children:l.email})]})]},l[e])}))},Z=async t=>{const a=await r.searchContact({query:t}),e="id";if(a.status===200)return a.data.data.map(l=>({value:l[e],label:i("div",{className:"flex items-center",children:[s("img",{src:l.image,alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}),i("div",{children:[i("div",{className:"text-sm font-bold",children:[l.first_name," ",l.last_name]}),s("div",{className:"text-xs text-gray-500",children:l.email})]})]},l[e])}))},ee=async t=>{const a="id",e="name",l=await r.searchManufacturer({query:t});if(l.status)return l.data.data.map(n=>({value:n[a],label:s("div",{className:"flex items-center",children:s("div",{children:s("div",{className:"text-sm font-bold",children:n[e]})})},n[a])}))},ae=async t=>{const a="id",e="subject",l=await r.searchSalesOrder({query:t});if(l.status)return l.data.data.map(n=>({value:n[a],label:s("div",{className:"flex items-center",children:s("div",{children:s("div",{className:"text-sm font-bold",children:n[e]})})},n[a])}))},se=t=>t&&t!==""?t:"https://www.nbmchealth.com/wp-content/uploads/2018/04/default-placeholder.png",te=async t=>{const a="id",e="excess_name",l=await r.searchExcess({query:t});if(l.status)return l.data.data.map(n=>({value:n[a],label:s("div",{className:"flex items-center",children:s("div",{children:s("div",{className:"text-sm font-bold",children:n[e]})})},n[a])}))};export{M as A,T as C,S as G,q as P,A as R,P as S,D as a,K as b,k as c,Z as d,X as e,Q as f,se as g,I as h,G as i,ae as j,W as k,$ as l,V as m,z as n,R as o,B as p,Y as q,ee as r,J as s,H as t,te as u,U as v,L as w};
