import{c as q,u as I,r as t,h as $,d as E,s as Q,O as y,j as a,e as _,b as d,f as R,b3 as B,a as H}from"./main-cfd27acf.js";import{A as W,I as U}from"./InformationSectionPreview-8fb7776a.js";import{M as V}from"./MultipleLineSectionPreview-926932f3.js";import{A as z}from"./AttachmentSection-3760d3c6.js";import"./CommonIcons-8a302a15.js";const ee=()=>{var m,p,v,f,h,k,A,M,g;const{hasPermission:u}=q(),c=I(),[C,w]=t.useState(""),[r,F]=t.useState({}),[i,L]=t.useState({}),[n,x]=t.useState(!0),o=$().id,S=new H,e=E(l=>l.taskForm);t.useEffect(()=>{c(Q("Task Preview"))});const j=()=>{window.print()},T=async()=>{const l=await S.fetchSingleTask(o);if(l.status!=200)return;const s=l.data.data.task;c(B(s))};t.useEffect(()=>{T().then(()=>{x(!1)})},[o]);const N=[{value:"App\\Models\\Lead",label:"Lead"},{value:"App\\Models\\Contact",label:"Contact"}],D=[{value:"App\\Models\\Account",label:"Account",labelField:"account_name"},{value:"App\\Models\\Vendor",label:"Vendor",labelField:"vendor_name"},{value:"App\\Models\\Quote",label:"Quote",labelField:"subject"},{value:"App\\Models\\Rfq",label:"Rfq",labelField:"rfq_name"},{value:"App\\Models\\Excess",label:"Excess",labelField:"excess_name"},{value:"App\\Models\\Availability",label:"Availability",labelField:"availability_name"},{value:"App\\Models\\Product",label:"Product",labelField:"product_name"},{value:"App\\Models\\Manufacturer",label:"Manufacturer",labelField:"name"},{value:"App\\Models\\Deal",label:"Deals",labelField:"deal_name"},{value:"App\\Models\\SalesOrder",label:"Sales Order",labelField:"subject"},{value:"App\\Models\\PurchaseOrder",label:"Purchase Order",labelField:"subject"},{value:"App\\Models\\Invoice",label:"Invoice",labelField:"subject"},{value:"App\\Models\\VendorRfq",label:"Vendor Rfq",labelField:"vendor_rfq_name"}];t.useEffect(()=>{const l=D.find(s=>s.value===e.moduleable_type);F(l),e.moduleable&&w(e.moduleable[l==null?void 0:l.labelField]),L(N.find(s=>s.value===e.userable_type))},[e.moduleable_type]);const O=[{value:"-None-",label:"-None-"},{value:"Account or Contact exist already",label:"Account or Contact exist already"},{value:"Wrong Branch",label:"Wrong Branch"},{value:"Wrong Department",label:"Wrong Department"},{value:"Does Not Exist Anymore",label:"Does Not Exist Anymore"},{value:"Bankruptcy",label:"Bankruptcy"},{value:"Hoch",label:"Hoch"},{value:"Other",label:"Other"}],P=[{value:"-None-",label:"-None-"},{value:"Abgeschlossen",label:"Abgeschlossen"},{value:"0.0 Cold task / unqualified (CLU)",label:"0.0 Cold task / unqualified (CLU)"},{value:"1.0 Cold task qualified (CLQ)",label:"1.0 Cold task qualified (CLQ)"},{value:"2.0 First contact made (FCM)",label:"2.0 First contact made (FCM)"},{value:"3.0 warm task qualified (WLQ)",label:"3.0 warm task qualified (WLQ)"},{value:"4.0 Hot task (HLQ)",label:"4.0 Hot task (HLQ)"},{value:"Close Task / Lost Task",label:"Close Task / Lost Task"}],b={leftObjects:[{label:"Task Owner",value:`${(m=e.owner)==null?void 0:m.first_name} ${(p=e.owner)==null?void 0:p.last_name}`},{label:"Subject",value:`${e.subject}`},{label:"Due Date",value:e.due_date},{label:"Contact | Contact",value:(i==null?void 0:i.label)+`: ${((v=e.userable)==null?void 0:v.name)??((f=e.userable)==null?void 0:f.first_name)+" "+((h=e.userable)==null?void 0:h.last_name)} `},{label:"Related To",value:(r==null?void 0:r.label)+": "+C},{label:"Status",value:y(e.status,P)}],rightObjects:[{label:"Priority",value:y(e.priority,O)},{label:"Repeat",value:e.repeat},{label:"Created By",value:`${(k=e.creator)==null?void 0:k.first_name} ${(A=e.creator)==null?void 0:A.last_name}`},{label:"Modified By",value:`${(M=e.modifier)==null?void 0:M.first_name} ${(g=e.modifier)==null?void 0:g.last_name}`},{label:"Closed Time",value:`${e.closed_date}`}]};return n?a(_,{}):!u("read-task")||n?a(_,{}):d("div",{children:[a("div",{className:"flex items-center lg:justify-end justify-center flex-wrap gap-4 mb-6",children:a(W,{loading:n,hasPermission:u,modelId:o,exportTable:j,routeModel:"task",permissionModel:"task"})}),d("div",{className:"panel",children:[d("div",{className:"flex justify-between flex-wrap gap-4 px-4",children:[a("div",{className:"text-2xl font-semibold uppercase",children:"Task"}),a("div",{className:"shrink-0",children:a("img",{src:R(e.image_data),alt:"Task image",className:"w-20 ltr:ml-auto rtl:mr-auto"})})]}),a(U,{title:"Task Information",leftObjects:b.leftObjects,rightObjects:b.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(V,{sectionTitle:"Description Information",data:[{label:"Description",value:e.description}]}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(z,{modelId:o,modelName:"task"})]})]})};export{ee as default};
