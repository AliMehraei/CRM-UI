import{d as S,u as q,a as ie,j as e,A as N,v as ce,b as u,F as h,f as Q,x as C,G as de,I as me,n as I,t as X,$ as ue,aP as f,a0 as se,aD as pe,aQ as he,r as w,h as re,c as fe,T as ge,s as be,aR as Z,e as ee,S as ve,U as _e,V as te,W as xe}from"./main-df5dc7ed.js";import{S as T}from"./react-select.esm-9f2a3f32.js";import{G as F,R as ye}from"./GenerateFields-3c7eab22.js";import{F as Ne}from"./FileUploadComponent-5d2a0917.js";import{Q as ae,J as le,K as ne}from"./SelectOptions-b97727f8.js";import{F as Ce}from"./index-948d32bd.js";import{A as we}from"./AttachmentSection-2b18bb8f.js";/* empty css                  */import{A as Se}from"./ActionButtonsComponent-1d92025d.js";import"./ClearButtonComponent-638f0936.js";import"./index-e120b408.js";const qe=()=>{var p,m,b,_,a,c,i,x,r,y,O,k,V,D,j,A,E,M,P,U,$,L,R,B,Y,G,H,W;const t=S(l=>l.quoteForm),o=q(),n=new ie,s=(l,v)=>{o(f({[l]:v}))},d=async l=>{const v=await n.fetchSingleAccount(l);if(v.status!=200)return;const z=v.data.data.account;o(f({account:z}));const oe=["billing_street","billing_city","billing_state","billing_code","billing_country","shipping_street","shipping_city","shipping_state","shipping_code","shipping_country"],J={};oe.forEach(K=>{J[K]=z[K]??null}),o(f(J))},g={Header:{"Account Name":e(N,{defaultOptions:!0,isMulti:!1,id:"account_id",name:"account_id",placeholder:"Type at least 2 characters to search...",loadOptions:ce,onChange:({value:l})=>{s("account_id",l),d(l)},defaultValue:{value:(p=t.account)==null?void 0:p.id,label:e("div",{className:"flex items-center",children:t.account?u(h,{children:[e("img",{src:Q(t.account.image_data),alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}),u("div",{children:[e("div",{className:"text-sm font-bold",children:(m=t.account)==null?void 0:m.account_name}),e("div",{className:"text-xs text-gray-500",children:(b=t.account)==null?void 0:b.email})]}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var l;return C(`${(l=t.account)==null?void 0:l.account_name}`)},children:"Copy & Select"})]}):null},(_=t.account)==null?void 0:_.id)},className:"flex-1"}),"Contact Name":e(N,{defaultOptions:!0,isMulti:!1,id:"contact_id",name:"contact_id",placeholder:"Type at least 2 characters to search...",loadOptions:de,onChange:({value:l})=>{s("contact_id",l)},defaultValue:{value:(a=t.contact)==null?void 0:a.id,label:e("div",{className:"flex items-center",children:t.contact?u(h,{children:[e("img",{src:Q(t.contact.image_data),alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}),u("div",{children:[e("div",{className:"text-sm font-bold",children:((c=t.contact)==null?void 0:c.first_name)+" "+((i=t.contact)==null?void 0:i.last_name)}),e("div",{className:"text-xs text-gray-500",children:(x=t.contact)==null?void 0:x.email})]}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var l,v;return C(`${((l=t.contact)==null?void 0:l.first_name)+" "+((v=t.contact)==null?void 0:v.last_name)}`)},children:"Copy & Select"})]}):null},(r=t.contact)==null?void 0:r.id)},className:"flex-1"}),RFQ:e(N,{defaultOptions:!0,isMulti:!1,id:"rfq_id",name:"rfq_id",placeholder:"Type at least 2 characters to search...",loadOptions:me,onChange:({value:l})=>{s("rfq_id",l)},defaultValue:{value:(y=t.rfq)==null?void 0:y.id,label:e("div",{className:"flex items-center",children:t.rfq?u(h,{children:[e("div",{className:"text-sm font-bold",children:(O=t.rfq)==null?void 0:O.rfq_name}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var l;return C(`${(l=t.rfq)==null?void 0:l.rfq_name}`)},children:"Copy & Select"})]}):null},(k=t.rfq)==null?void 0:k.id)},className:"flex-1"}),"Customer RFQ No":e("input",{id:"customer_rfq_no",type:"text",name:"customer_rfq_no",className:"form-input flex-1 ",onChange:l=>s(l.target.name,l.target.value),defaultValue:t.customer_rfq_no}),Subject:e("input",{required:!0,id:"subject",name:"subject",type:"text",className:"form-input flex-1 ",onChange:l=>s(l.target.name,l.target.value),defaultValue:t.subject}),"Converted by":e(N,{defaultOptions:!0,isMulti:!1,id:"converted_by_id",name:"converted_by_id",placeholder:"Type at least 2 characters to search...",loadOptions:I,className:"flex-1",onChange:({value:l})=>{s("converted_by_id",l)},defaultValue:t.converted_by?{value:(V=t.converted_by)==null?void 0:V.id,label:u("div",{className:"flex items-center",children:[u("div",{className:"text-sm font-bold",children:[(D=t.converted_by)==null?void 0:D.first_name," ",(j=t.converted_by)==null?void 0:j.last_name]}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var l,v;return C(`${((l=t.converted_by)==null?void 0:l.first_name)+((v=t.converted_by)==null?void 0:v.last_name)}`)},children:"Copy & Select"})]},(A=t.converted_by)==null?void 0:A.id)}:{value:null,lable:null}}),"Quote Chance":e(T,{name:"quote_chance",required:!0,options:ae,className:"flex-1",onChange:({value:l})=>{s("quote_chance",l)},defaultValue:ae.find(l=>l.value==t.quote_chance)}),Currency:e(T,{name:"currency",options:X,className:"flex-1",onChange:({value:l})=>{s("currency",l)},defaultValue:X.find(l=>l.value==t.currency)})},"":{"Quote Owner":e(N,{defaultOptions:!0,isMulti:!1,id:"owner_id",name:"owner_id",placeholder:"Type at least 2 characters to search...",loadOptions:I,onChange:({value:l})=>{s("owner_id",l)},defaultValue:{value:(E=t.owner)==null?void 0:E.id,label:u("div",{className:"flex items-center",children:[t.owner?e("img",{src:Q(t.owner.avatar_data),alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}):null,u("div",{children:[e("div",{className:"text-sm font-bold",children:((M=t.owner)==null?void 0:M.first_name)+" "+((P=t.owner)==null?void 0:P.last_name)}),e("div",{className:"text-xs text-gray-500",children:(U=t.owner)==null?void 0:U.email})]}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var l,v;return C(`${((l=t.owner)==null?void 0:l.first_name)+" "+((v=t.owner)==null?void 0:v.last_name)}`)},children:"Copy & Select"})]},($=t.owner)==null?void 0:$.id)},className:"flex-1"}),"PM User":e(N,{defaultOptions:!0,isMulti:!1,id:"pm_user_id",name:"pm_user_id",placeholder:"Type at least 2 characters to search...",loadOptions:I,onChange:({value:l})=>{s("pm_user_id",l)},defaultValue:{value:(L=t.pmUser)==null?void 0:L.id,label:e("div",{className:"flex items-center",children:t.pmUser?u(h,{children:[e("img",{src:Q(t.pmUser.avatar_data),alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}),u("div",{children:[e("div",{className:"text-sm font-bold",children:(R=t.pmUser)==null?void 0:R.name}),e("div",{className:"text-xs text-gray-500",children:(B=t.pmUser)==null?void 0:B.email})]}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var l;return C(`${(l=t.pmUser)==null?void 0:l.name}`)},children:"Copy & Select"})]}):null},(Y=t.pmUser)==null?void 0:Y.id)},className:"flex-1"}),"Deals Name":e(N,{defaultOptions:!0,isMulti:!1,id:"deal_id",name:"deal_id",placeholder:"Type at least 2 characters to search...",loadOptions:ue,onChange:({value:l})=>{s("deal_id",l)},defaultValue:{value:(G=t.deal)==null?void 0:G.id,label:e("div",{className:"flex items-center",children:t.deal?u(h,{children:[e("div",{className:"text-sm font-bold",children:(H=t.deal)==null?void 0:H.deal_name}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var l;return C(`${(l=t.deal)==null?void 0:l.deal_name}`)},children:"Copy & Select"})]}):null},(W=t.deal)==null?void 0:W.id)},className:"flex-1"}),"Quote Stage":e(T,{name:"quote_stage",required:!0,options:le,className:"flex-1",onChange:({value:l})=>{s("quote_stage",l)},defaultValue:le.find(l=>l.value==t.quote_stage)}),"Quote File(Excel)":e(Ne,{id:"quote_file",modelName:"quote",formState:t,formAttribute:"quote_file",updateFormData:f}),"Exchange Rate":e("input",{id:"exchangeRate",type:"text",value:"1",placeholder:"readOnly input here…",className:"flex-1 form-input disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",disabled:!0})}};return e(h,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(F,{fields:g})})})},Ve=()=>{const t=q(),o=S(d=>d.quoteForm),n=(d,g)=>{t(f({[d]:g}))},s={Status:{"Quote valid":e(T,{options:ne,name:"quote_valid",id:"quote_valid",onChange:({value:d})=>{n("converted_by_id",d)},defaultValue:ne.find(d=>d.value==o.quote_valid),className:"flex-1"}),"Proactive Offer":e("input",{id:"proactive_offer",type:"checkbox",name:"proactive_offer",className:"form-checkbox",onChange:d=>n(d.target.name,d.target.checked),checked:o.proactive_offer})},"":{Rating:e("input",{id:"rating",name:"rating",className:"form-input flex-1 ",onChange:d=>n(d.target.name,d.target.value),defaultValue:o.rating})}};return e(h,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(F,{fields:s})})})},ke=()=>{var d,g,p;const t=q(),o=S(m=>m.quoteForm),n=(m,b)=>{t(f({[m]:b}))},s={"Quote Line":{"Product Name":e(N,{defaultOptions:!1,isMulti:!1,id:"product_id",name:"product_id",placeholder:"Type at least 2 characters to search...",loadOptions:se,onChange:({value:m})=>{n("product_id",m)},defaultValue:{value:(d=o.product)==null?void 0:d.id,label:e("div",{className:"flex items-center",children:o.product?u(h,{children:[e("div",{className:"text-sm font-bold",children:(g=o.product)==null?void 0:g.product_name}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var m;return C(`${(m=o.product)==null?void 0:m.product_name}`)},children:"Copy & Select"})]}):null},(p=o.product)==null?void 0:p.id)},className:"flex-1"}),"Customer part ID":e("input",{id:"customer_part_id",name:"customer_part_id",className:"form-input flex-1 ",onChange:m=>n(m.target.name,m.target.value),defaultValue:o.customer_part_id})},"":{Quantity:e("input",{id:"quantity",name:"quantity",className:"form-input flex-1 ",defaultValue:o.quantity,onChange:m=>n(m.target.name,m.target.value)}),"List Price":e("input",{id:"list_price",name:"list_price",className:"form-input flex-1 ",defaultValue:o.list_price,onChange:m=>n(m.target.name,m.target.value)}),"Lead Time":e("input",{id:"lead_time",name:"lead_time",className:"form-input flex-1 ",defaultValue:o.lead_time,onChange:m=>n(m.target.name,m.target.value)})}};return e(h,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(F,{fields:s})})})},Fe=()=>{var d,g,p,m,b,_;const t=S(a=>a.quoteForm),o=q(),n=(a,c)=>{o(f({[a]:c}))},s={Source:{Vendor:e(N,{defaultOptions:!0,isMulti:!1,id:"vendor_id",name:"vendor_id",placeholder:"Type at least 2 characters to search...",loadOptions:pe,onChange:({value:a})=>{n("vendor_id",a)},defaultValue:{value:(d=t.vendor)==null?void 0:d.id,label:e("div",{className:"flex items-center",children:t.vendor?u(h,{children:[e("div",{className:"text-sm font-bold",children:(g=t.vendor)==null?void 0:g.vendor_name}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var a;return C(`${(a=t.vendor)==null?void 0:a.vendor_name}`)},children:"Copy & Select"})]}):null},(p=t.vendor)==null?void 0:p.id)},className:"flex-1"}),"Availability No":e("input",{id:"availability_no",name:"availability_no",className:"form-input flex-1 ",defaultValue:t.availability_no,onChange:a=>n(a.target.name,a.target.value)}),"Availability Date":e(Ce,{name:"availability_date",options:{dateFormat:"Y-m-d ",defaultDate:t.availability_date?new Date(t.availability_date):null},defaultValue:t.availability_date,className:"form-input flex-1",placeholder:"YYYY-MM-DD",onChange:(a,c)=>n("availability_date",c)}),Availability:e(N,{defaultOptions:!0,isMulti:!1,id:"availability_id",name:"availability_id",placeholder:"Type at least 2 characters to search...",loadOptions:he,onChange:({value:a})=>{n("availability_id",a)},defaultValue:{value:(m=t.availability)==null?void 0:m.id,label:e("div",{className:"flex items-center",children:t.availability?u(h,{children:[e("div",{className:"text-sm font-bold",children:(b=t.availability)==null?void 0:b.availability_name}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var a;return C(`${(a=t.availability)==null?void 0:a.availability_name}`)},children:"Copy & Select"})]}):null},(_=t.availability)==null?void 0:_.id)},className:"flex-1"})},"":{Cost:e("input",{id:"cost",name:"cost",className:"form-input flex-1 ",defaultValue:t.cost,onChange:a=>n(a.target.name,a.target.value)}),"LT vendor":e("input",{id:"lt_vendor",name:"lt_vendor",className:"form-input flex-1 ",defaultValue:t.lt_vendor,onChange:a=>n(a.target.name,a.target.value)}),SPQ:e("input",{id:"spq",name:"spq",className:"form-input flex-1 ",defaultValue:t.spq,onChange:a=>n(a.target.name,a.target.value)}),"Quantity in Stock":e("input",{id:"quantity_in_stock",name:"quantity_in_stock",defaultValue:t.quantity_in_stock,className:"form-input flex-1 ",onChange:a=>n(a.target.name,a.target.value)})}};return e(h,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(F,{fields:s})})})},Oe=()=>{var d,g,p,m,b,_,a,c,i,x;const t=S(r=>r.quoteForm),o=q(),n=(r,y)=>{o(f({[r]:y}))},s={"Address Information":{"Billing Street":e("input",{id:"billing_street",name:"billing_street",onChange:r=>n(r.target.name,r.target.value),value:t.billing_street||((d=t.account)==null?void 0:d.billing_street)||"",className:"form-input flex-1"}),"Billing City":e("input",{id:"billing_city",name:"billing_city",value:t.billing_city||((g=t.account)==null?void 0:g.billing_city)||"",onChange:r=>n(r.target.name,r.target.value),className:"form-input flex-1"}),"Billing State":e("input",{id:"billing_state",name:"billing_state",value:t.billing_state||((p=t.account)==null?void 0:p.billing_state)||"",onChange:r=>n(r.target.name,r.target.value),className:"form-input flex-1"}),"Billing Code":e("input",{id:"billing_code",name:"billing_code",value:t.billing_code||((m=t.account)==null?void 0:m.billing_code)||"",onChange:r=>n(r.target.name,r.target.value),className:"form-input flex-1"}),"Billing Country":e("input",{id:"billing_country",name:"billing_country",value:t.billing_country||((b=t.account)==null?void 0:b.billing_country)||"",onChange:r=>n(r.target.name,r.target.value),className:"form-input flex-1"})},"":{"Shipping Street":e("input",{id:"shipping_street",name:"shipping_street",value:t.shipping_street||((_=t.account)==null?void 0:_.shipping_street)||"",onChange:r=>n(r.target.name,r.target.value),className:"form-input flex-1"}),"Shipping City":e("input",{id:"shipping_city",name:"shipping_city",value:t.shipping_city||((a=t.account)==null?void 0:a.shipping_city)||"",onChange:r=>n(r.target.name,r.target.value),className:"form-input flex-1"}),"Shipping State":e("input",{id:"shipping_state",name:"shipping_state",value:t.shipping_state||((c=t.account)==null?void 0:c.shipping_state)||"",onChange:r=>n(r.target.name,r.target.value),className:"form-input flex-1"}),"Shipping Code":e("input",{id:"shipping_code",name:"shipping_code",value:t.shipping_code||((i=t.account)==null?void 0:i.shipping_code)||"",onChange:r=>n(r.target.name,r.target.value),className:"form-input flex-1"}),"Shipping Country":e("input",{id:"shipping_country",name:"shipping_country",value:t.shipping_country||((x=t.account)==null?void 0:x.shipping_country)||"",onChange:r=>n(r.target.name,r.target.value),className:"form-input flex-1"})}};return e(h,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(F,{fields:s})})})},Qe=()=>{const t=S(s=>s.quoteForm),o=q(),n=(s,d)=>{o(f({[s]:d}))};return e(h,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e("div",{className:"lg:w-1/2 w-full ltr:lg:mr-6 rtl:lg:ml-6 mb-6",children:u("div",{className:"",children:[e("div",{className:"text-lg",children:"Terms and Conditions :"}),u("div",{className:"mt-4 flex items-center",children:[e("label",{className:"ltr:mr-2 rtl:ml-2 w-1/3 mb-0",children:"Terms and Conditions"}),e("textarea",{id:"terms_conditions",rows:3,name:"terms_conditions",className:"form-textarea flex-1",defaultValue:t.terms_conditions,placeholder:"",onChange:s=>n(s.target.name,s.target.value)})]},"terms_conditions")]},"Terms and Conditions")})})})},Te=()=>{const t=S(s=>s.quoteForm),o=q(),n=(s,d)=>{o(f({[s]:d}))};return e(h,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e("div",{className:"lg:w-1/2 w-full ltr:lg:mr-6 rtl:lg:ml-6 mb-6",children:u("div",{className:"",children:[e("div",{className:"text-lg",children:"Description Information :"}),u("div",{className:"mt-4 flex items-center",children:[e("label",{className:"ltr:mr-2 rtl:ml-2 w-1/3 mb-0",children:"Description"}),e("textarea",{id:"description",rows:3,name:"description",className:"form-textarea flex-1",placeholder:"",onChange:s=>n(s.target.name,s.target.value),defaultValue:t.description})]},"description")]},"Terms and Conditions")})})})},Ie=()=>{const t=S(a=>a.quoteForm),o=q(),[n,s]=w.useState([]),[d,g]=w.useState({total:0,...t.summary}),p=(a,c,i)=>{const x=n.find(V=>V.id===i),r=n.findIndex(V=>V.id===i),y={...x,[a]:c},O=(parseFloat(y.quantity)||0)*(parseFloat(y.list_price)||0);y.amount=O;const k={...n,[r]:y};s(Object.values(k)),o(f({items:k}))};w.useEffect(()=>{s(Object.values(t.items))},[]);const m=()=>{let a;a=n!=null&&n.length?n.reduce((i,x)=>x.id>i?x.id:i,n[0].id):0;let c=[...n,{id:a+1,name:"",part_id:"",quantity:1,SPQ:"",list_price:"",lead_time:"",date_code:"",comment:"",amount:0}];s(c),o(f({items:c}))};w.useEffect(()=>{o(f({summary:d}))},[d]);const b=(a=null)=>{const c=n.filter(i=>i.id!=a.id);s(c),o(f({items:c}))},_=()=>{const a=n.reduce((c,i)=>c+(parseFloat(i.amount)||0),0);g({total:a})};return w.useEffect(()=>{_()},[n]),e(h,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e("div",{className:" w-full ltr:lg:mr-12 rtl:lg:ml-12 mb-12",children:u("div",{className:"",children:[u("div",{className:"text-lg",children:["Quote Items ",e(ye,{})," :"]}),u("div",{className:"mt-8",children:[e("div",{className:"overflow-x-auto	w-11/12",children:u("table",{className:"table-auto",children:[e("thead",{children:u("tr",{children:[e("th",{className:"w-1",children:"Product Name"}),e("th",{className:"w-1",children:"Customer Part ID"}),e("th",{className:"w-1",children:"Quantity"}),e("th",{className:"w-1",children:"SPQ"}),e("th",{className:"w-1",children:"List Price"}),e("th",{className:"w-1",children:"Lead Time"}),e("th",{className:"w-1",children:"Date Code"}),e("th",{className:"w-1",children:"Comment"}),e("th",{className:"w-1",children:"Amount"})]})}),e("tbody",{children:n==null?void 0:n.map(a=>{var c;return u("tr",{className:"align-top",children:[u("td",{children:[e(N,{defaultOptions:!1,isMulti:!1,id:"product_id",name:"product_id",placeholder:"Type at least 2 characters to search...",loadOptions:se,onChange:({value:i})=>{p("product_id",i,a.id)},className:"flex-1  min-w-[200px]",defaultValue:{value:a.id,label:e("div",{className:"flex items-center",children:e("div",{children:e("div",{className:"text-sm font-bold",children:(c=a.product)==null?void 0:c.product_name})})},a.id)}}),",",e("textarea",{name:"description",className:"form-textarea mt-4",placeholder:"Enter Description",onChange:i=>p(i.target.name,i.target.value,a.id),defaultValue:a.description})]}),e("td",{children:e("input",{name:"customer_part_id",type:"text",className:"form-input min-w-[200px]",onChange:i=>p(i.target.name,i.target.value,a.id),defaultValue:a.customer_part_id})}),e("td",{children:e("input",{type:"number",className:"form-input w-32",placeholder:"Quantity",name:"quantity",min:0,onChange:i=>p(i.target.name,i.target.value,a.id),defaultValue:a.quantity})}),e("td",{children:e("input",{name:"spq",type:"text",className:"form-input min-w-[200px]",onChange:i=>p(i.target.name,i.target.value,a.id),defaultValue:a.spq})}),e("td",{children:e("input",{type:"number",className:"form-input w-32",placeholder:"Price",name:"list_price",min:0,defaultValue:a.list_price,onChange:i=>p(i.target.name,i.target.value,a.id)})}),e("td",{children:e("input",{name:"lead_time",type:"text",className:"form-input min-w-[200px]",defaultValue:a.lead_time,onChange:i=>p(i.target.name,i.target.value,a.id)})}),e("td",{children:e("input",{name:"date_code",type:"text",className:"form-input min-w-[200px]",defaultValue:a.date_code,onChange:i=>p(i.target.name,i.target.value,a.id)})}),e("td",{children:e("input",{name:"comment",type:"text",className:"form-input min-w-[200px]",defaultValue:a.comment,onChange:i=>p(i.target.name,i.target.value,a.id)})}),e("td",{children:e("input",{disabled:!0,name:"amount",type:"text",className:"form-input min-w-[200px] disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",value:a.amount,onChange:i=>p(i.target.name,i.target.value,a.id)})}),e("td",{children:e("button",{type:"button",onClick:()=>b(a),children:u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})})]},a.id)})})]})}),u("div",{className:"flex justify-between sm:flex-row flex-col mt-6 px-4",children:[e("div",{className:"sm:mb-0 mb-6",children:e("button",{type:"button",className:"btn btn-primary",onClick:()=>m(),children:"Add Item"})}),e("div",{className:"sm:w-2/5",children:u("div",{className:"flex items-center justify-between mt-4 font-semibold",children:[e("div",{className:"flex-1",children:"Total(€)"}),e("input",{id:"total",name:"total",type:"text",value:d.total,className:"w-64 form-input disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",disabled:!0})]})})]})]})]},"Quote Items")})})})},De=()=>{const o=re().id;return u("div",{className:"mt-8 px-4",children:[e(qe,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(Ve,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(Ie,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(ke,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(Fe,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(Oe,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(Qe,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(Te,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(we,{modelId:o,modelName:"quote"})]})},Ge=()=>{const{hasPermission:t}=fe(),o=q(),n=S(c=>c.quoteForm),[s,d]=w.useState(!0),p=re().id,m=new ie,b=ge();w.useEffect(()=>{o(be("Quotes Edit"))}),w.useEffect(()=>{o(Z())},[]),w.useEffect(()=>{_().then(()=>{d(!1)})},[p]),w.useEffect(()=>{o(f({api:"updateSingleQuote",redirectTo:"/quotes/edit/:id",action:"edit"}))},[]);const _=async()=>{const c=await m.fetchSingleQuote(p);if(c.status!=200)return;const i=c.data.data.quote;o(f(i))},a=async()=>{try{const c=await m.convertQuoteToSalesOrder({id:n.id});if(c.status==200)ve.fire({title:"Quote Converted Successfully.",html:`
                <span class="text-blue-500">Do you want to redirect to created SalesOrder ? </span>
                `,showCancelButton:!0,icon:"success",confirmButtonText:"Redirect",denyButtonText:"Close",customClass:{title:"text-blue-500"}}).then(i=>{i.isConfirmed&&b(`/sales/edit/${c.data.salesOrder.id}`,{replace:!0})});else if(c.status===422){const i=c.data.errors,x={titleMessage:"You have validation error on converting Sales Order",hasError:!0,...Object.fromEntries(Object.entries(i).map(([r,y])=>[r,y[0]]))};o(_e(x)),te.fire({icon:"error",html:`<h5>Convert Validation Error</h5>
                        <span style="font-size: 12px">Please Check fields</span>
                        `,padding:"10px 20px"})}else te.fire({icon:"error",title:"Internal Server Error ,Converting Sales Order failed failed",padding:"10px 20px"})}catch(c){xe("Failed to convert sales order"),console.error(c);return}};return s?e(ee,{}):!t("update-quote")||s?e(ee,{}):u("div",{className:"px-4",children:[e(Se,{formState:n,resetForm:Z}),e("div",{className:"flex xl:flex-row flex-col gap-2.5",children:u("div",{className:"panel px-0 flex-1 py-6 ltr:xl:mr-6 rtl:xl:ml-6 overflow-hidden",children:[e("button",{onClick:a,className:"mx-5 btn btn-secondary gap-2",children:"Convert Quote to Sales Order"}),e(De,{})]})})]})};export{Ge as default};
