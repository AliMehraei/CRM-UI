import{u as Y,d as j,c as q,a as A,r as s,j as e,e as K,F as I,S as P,b as r,ac as X,h as ee,bb as te,s as V,ad as E,f as se,N as ae,q as G}from"./main-bc7db150.js";import{C as re}from"./CommonIcons-210a608f.js";import{s as H,Q as oe}from"./sortBy-62bf2f2b.js";import"./_baseIsEqual-fb869812.js";const ne=({tableColumns:i,frontRoute:c})=>{Y(),j(n=>n.filters),q();const S=new A,b=j(n=>n.themeConfig.theme)==="dark",[w,k]=s.useState([]),[y,L]=s.useState([]),[h,v]=s.useState(1),[p,g]=s.useState(!0),x=[50,100],[t,o]=s.useState(x[0]),[l,u]=s.useState(H(w,"id")),[f,_]=s.useState(l),[B,R]=s.useState([]),[M,d]=s.useState(0),[a,U]=s.useState({columnAccessor:"id",direction:"desc"}),T=(n="",m="success")=>{P.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,customClass:{container:"toast"}}).fire({icon:m,title:n,padding:"10px 20px"})},$=async(n=1,m=x[0],C=[],Q={})=>{g(!0);const{columnAccessor:Z="",direction:J=""}=Q;try{await S[c]({page:n,pageSize:m,sortField:Z,sortDirection:J}).then(N=>{var D,F,W,z;k((F=(D=N.data)==null?void 0:D.data)==null?void 0:F.data),d((z=(W=N.data)==null?void 0:W.data)==null?void 0:z.total),g(!1)}).catch(N=>{console.error("Error fetching data: ",N),g(!1),T("Error fetching data.","error")})}catch(N){T("Error fetching data.","error"),console.error("Error fetching data: ",N),g(!1)}},O=n=>{const{columnAccessor:m,direction:C="asc"}=n;U({columnAccessor:m,direction:C}),v(1),$(h,t,y,{columnAccessor:m,direction:C})};return s.useEffect(()=>{const n=H(w,a.columnAccessor),m=a.direction!=="asc"?n.reverse():n;u(m)},[w,a]),s.useEffect(()=>{v(1)},[t]),s.useEffect(()=>{_([...l.slice(0,t)])},[h,t,l]),s.useEffect(()=>{$(h,t,y,a)},[h,t,a]),p?e(K,{}):e(I,{children:e("div",{className:"panel px-0 border-white-light dark:border-[#1b2e4b]",children:e("div",{className:"bom-excess-table",children:e("div",{className:"grid grid-cols-1 gap-6 mb-6",children:e("div",{className:"panel col-span-12",children:e("div",{className:"datatables pagination-padding",children:p?e("div",{className:"flex justify-center",children:e("span",{className:"animate-spin border-4 my-4 border-success border-l-transparent rounded-full w-12 h-12 inline-block align-middle m-auto mb-10"})}):e(oe,{className:`${b} whitespace-nowrap table-hover`,records:f,columns:i,highlightOnHover:!0,totalRecords:M,recordsPerPage:t,page:h,onPageChange:v,recordsPerPageOptions:x,onRecordsPerPageChange:o,sortStatus:a,onSortStatusChange:O,selectedRecords:B,onSelectedRecordsChange:R,paginationText:({from:n,to:m,totalRecords:C})=>`Showing ${n} to ${m} of ${C} entries`})})})})})})})},ie=({contactId:i,btnRoute:c})=>{const[S,b]=s.useState([]),[w,k]=s.useState(1),[y,L]=s.useState(!0),h=new A,v=(t=null)=>{P.fire({icon:"warning",title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonText:"Delete",padding:"2em",customClass:"sweet-alerts"}).then(o=>{o.value&&(t?(g(t),b([])):((S||[]).map(f=>f.id).forEach(f=>g(f)),b([]),k(1)),P.fire({title:"Deleted!",text:"Row has been deleted.",icon:"success",customClass:"sweet-alerts"}))})},p=(t="",o="success")=>{P.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,customClass:{container:"toast"}}).fire({icon:o,title:t,padding:"10px 20px"})},g=async t=>{try{L(!0),X("deleteSingleBomItem").call(h,t).then(o=>{const l=o.data;l.status?p("Successful deleting the Bom Item: "+l.message,"success"):(p("Error deleting the Bom Item: "+l.message,"error"),console.error("Error deleting the Bom Item : ",l.message))}),L(!1)}catch(o){p("Error making delete request","error"),console.error("Error making delete request",o),L(!1)}};return e("div",{className:"pt-5 flex-1",children:e("div",{className:"grid  gap-6 mb-6",children:e("div",{className:"panel h-full xl:col-span-2",children:r("div",{className:"relative",children:[r("h5",{className:"font-semibold text-lg",children:["List ",c]}),e("div",{className:"bg-white dark:bg-black rounded-lg",children:e(ne,{tableColumns:[{accessor:"id",sortable:!0,render:({id:t})=>e("div",{className:"font-semibold",children:t})},{accessor:"title",sortable:!0,render:({title:t})=>e("div",{className:"font-semibold",children:t})},{accessor:"status",title:"Status",sortable:!0,render:({status:t})=>e("div",{className:"font-semibold",children:`${t}`})},{accessor:"created_at",title:"Created At",sortable:!0,render:({created_at:t})=>e("div",{className:"font-semibold",children:t})},{accessor:"action",title:"Actions",sortable:!1,textAlignment:"center",render:({id:t,status:o})=>e(I,{children:r("div",{className:"flex gap-4 items-center w-max mx-auto",children:[["new","header_selected"].includes(o)&&r("a",{href:"/"+c+"/confirmation/"+i+"/"+t,className:"bg-white p-2 rounded-md text-primary-500 border border-primary-500 hover:text-white hover:bg-sky-600 default-transition pulse-primary flex items-center justify-center",children:[e("span",{className:"text-sm",children:"Go to header selection page"}),e("svg",{className:"w-5 h-5 ml-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"})})]}),["pre_processing","pre_processed_with_failures","pre_processed_successfully"].includes(o)&&r("a",{href:"/"+c+"/process/"+i+"/"+t,className:"bg-white p-2 rounded-md text-primary-500 border border-primary-500 hover:text-white hover:bg-sky-600 default-transition pulse-primary flex items-center justify-center",children:[e("span",{className:"text-sm",children:"Go to the pre-process page"}),e("svg",{className:"w-5 h-5 ml-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"})})]}),["processed_successfully","processed_with_failures"].includes(o)&&e("a",{href:"/"+c+"/complete/"+i+"/"+t,className:"bg-white p-2 rounded-md text-primary-500 border border-primary-500 hover:text-white hover:bg-sky-600 default-transition pulse-primary",children:r("svg",{className:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:[e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),r("button",{type:"button",className:"btn btn-danger gap-2",onClick:()=>v(),children:[r("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",children:[e("path",{d:"M20.5001 6H3.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),e("path",{d:"M18.8334 8.5L18.3735 15.3991C18.1965 18.054 18.108 19.3815 17.243 20.1907C16.378 21 15.0476 21 12.3868 21H11.6134C8.9526 21 7.6222 21 6.75719 20.1907C5.89218 19.3815 5.80368 18.054 5.62669 15.3991L5.16675 8.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),e("path",{opacity:"0.5",d:"M9.5 11L10 16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),e("path",{opacity:"0.5",d:"M14.5 11L14 16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),e("path",{opacity:"0.5",d:"M6.5 6C6.55588 6 6.58382 6 6.60915 5.99936C7.43259 5.97849 8.15902 5.45491 8.43922 4.68032C8.44784 4.65649 8.45667 4.62999 8.47434 4.57697L8.57143 4.28571C8.65431 4.03708 8.69575 3.91276 8.75071 3.8072C8.97001 3.38607 9.37574 3.09364 9.84461 3.01877C9.96213 3 10.0932 3 10.3553 3H13.6447C13.9068 3 14.0379 3 14.1554 3.01877C14.6243 3.09364 15.03 3.38607 15.2493 3.8072C15.3043 3.91276 15.3457 4.03708 15.4286 4.28571L15.5257 4.57697C15.5433 4.62992 15.5522 4.65651 15.5608 4.68032C15.841 5.45491 16.5674 5.97849 17.3909 5.99936C17.4162 6 17.4441 6 17.5 6",stroke:"currentColor",strokeWidth:"1.5"})]}),"Delete"]})]})})}],frontRoute:`${c=="availability-vendor"?"availabilityVendor":c}ItemList`})})]})})})})},he=()=>{const i=Y();q();const[c,S]=s.useState(""),[b,w]=s.useState("bom"),[k,y]=s.useState(""),[L,h]=s.useState("");s.useState([]);const[v,p]=s.useState(""),[g,x]=s.useState(!0),t=j(d=>d.contactForm),o=new A,u=ee().id,f=te(),{pathname:_}=f,[B,R]=s.useState("contact");s.useEffect(()=>{i(V(c))},[i]);const M=async()=>{if(_.split("/")[1]!="availability-vendor"){const d=await o.fetchSingleContact(u);if(d.status!=200)return;const a=d.data.data.contact;i(G(a))}else{const d=await o.fetchSingleVendor(u);if(d.status!=200)return;const a=d.data.data.vendor;i(G(a))}};return s.useEffect(()=>{const a=window.location.pathname.split("/");R(a[1]=="availability-vendor"?"vendor":"contact"),S(E(a[1])+" - File Upload"),w(a[1]),y("Add Your "+E(a[1])+" List"),h("Your "+E(a[1])+" List"),p("You don't have any"+E(a[1])+" List"),i(V(E(a[1])+" - File Upload"))},[]),s.useEffect(()=>{M().then(()=>{x(!1)})},[u]),e(I,{children:r("div",{className:"panel px-0 border-white-light dark:border-[#1b2e4b]",children:[r("div",{className:"flex justify-end flex-wrap gap-4 px-4",children:[e("div",{className:"flex",children:r("div",{children:[r("div",{className:"text-sm font-semibold mt-5",children:[t.first_name," ",t.last_name," | ",t.vendor_name]}),e("div",{className:"text-s font-semibold ",children:t.email}),e("div",{className:"text-s font-semibold ",children:t.phone})]})}),r("div",{className:"shrink-0",children:[e("img",{src:se(t.image_data),alt:"Contact image",className:"w-20 ltr:ml-auto rtl:mr-auto"}),r("a",{className:"text-sm font-semibold mt-5  text-primary ",target:"_blank",href:`/${B}/preview/${u}`,children:["View ",B]})]})]}),e("hr",{className:"border-white-light dark:border-[#849bbc] my-6"}),r("div",{className:"px-4 sm:px-6 lg:px-8",children:[e("section",{className:"border-b border-gray-200 pb-4",children:r("div",{className:"sm:flex sm:items-center sm:justify-between",children:[e("h3",{className:"title-1",children:e("b",{children:c})}),e("div",{className:"mt-3 sm:mt-0 sm:ml-4",id:"bom-file-upload-tour",children:r(ae,{to:`/${b}/import/${u}`,className:"flex btn btn-primary pulse-primary",children:[e(re,{}),k]})})]})}),e(ie,{contactId:u,btnRoute:_.split("/")[1]})]})]})})};export{he as default};
