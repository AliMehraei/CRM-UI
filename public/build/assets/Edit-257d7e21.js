import{d as y,u as C,a as te,j as e,l as x,n as se,b as p,f as k,w as re,y as oe,m as T,k as X,V as de,aI as f,F as w,W as le,_ as ce,aJ as ue,r as N,h as ne,c as me,J as pe,s as he,aK as Z,e as ee,S as fe,K as ge,M as ae,O as ve}from"./main-fb19eb09.js";import{S as Q}from"./react-select.esm-8668e882.js";import{G as V,R as be,A as _e}from"./GenerateFields-c40cef71.js";import{F as xe}from"./FileUploadComponent-889010cf.js";import{F as Ne}from"./index-5a1fde46.js";import{A as ye}from"./AttachmentSection-c4324de7.js";/* empty css                  */import"./index-f5f709e9.js";import"./ClearButtonComponent-292bb5e9.js";const Ce=()=>{var g,v,t,d,n,b,i,_,F,q,S,I,D,j,E,A,M,P,L,R,B,U,Y,W,$,H,G;const a=y(r=>r.quoteForm),o=C(),l=new te,c=[{value:"none",label:"-None-"},{value:"high",label:"High"},{value:"unknown",label:"Unknown"},{value:"low",label:"Low"}],h=[{value:"draft",label:"Draft"},{value:"no_feedback",label:"No Feedback"},{value:"negotiation_price",label:"Negotiation Price"},{value:"negotiation_conditions",label:"Negotiation Conditions"},{value:"open",label:"Open"},{value:"lost",label:"Lost"},{value:"won",label:"Won"}],s=(r,O)=>{o(f({[r]:O}))},m=async r=>{const O=await l.fetchSingleAccount(r);if(O.status!=200)return;const J=O.data.data.account;o(f({account:J}));const ie=["billing_street","billing_city","billing_state","billing_code","billing_country","shipping_street","shipping_city","shipping_state","shipping_code","shipping_country"],K={};ie.forEach(z=>{K[z]=J[z]??null}),o(f(K))},u={Header:{"Account Name":e(x,{defaultOptions:!0,isMulti:!1,id:"account_id",name:"account_id",placeholder:"Type at least 2 characters to search...",loadOptions:se,onChange:({value:r})=>{s("account_id",r),m(r)},defaultValue:{value:(g=a.account)==null?void 0:g.id,label:p("div",{className:"flex items-center",children:[a.account?e("img",{src:k(a.account.image_data),alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}):null,p("div",{children:[e("div",{className:"text-sm font-bold",children:(v=a.account)==null?void 0:v.account_name}),e("div",{className:"text-xs text-gray-500",children:(t=a.account)==null?void 0:t.email})]})]},(d=a.account)==null?void 0:d.id)},className:"flex-1"}),"Contact Name":e(x,{defaultOptions:!0,isMulti:!1,id:"contact_id",name:"contact_id",placeholder:"Type at least 2 characters to search...",loadOptions:re,onChange:({value:r})=>{s("contact_id",r)},defaultValue:{value:(n=a.contact)==null?void 0:n.id,label:p("div",{className:"flex items-center",children:[a.contact?e("img",{src:k(a.contact.image_data),alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}):null,p("div",{children:[e("div",{className:"text-sm font-bold",children:(b=a.contact)==null?void 0:b.name}),e("div",{className:"text-xs text-gray-500",children:(i=a.contact)==null?void 0:i.email})]})]},(_=a.contact)==null?void 0:_.id)},className:"flex-1"}),RFQ:e(x,{defaultOptions:!0,isMulti:!1,id:"rfq_id",name:"rfq_id",placeholder:"Type at least 2 characters to search...",loadOptions:oe,onChange:({value:r})=>{s("rfq_id",r)},defaultValue:{value:(F=a.rfq)==null?void 0:F.id,label:e("div",{className:"flex items-center",children:e("div",{children:e("div",{className:"text-sm font-bold",children:(q=a.rfq)==null?void 0:q.rfq_name})})},(S=a.rfq)==null?void 0:S.id)},className:"flex-1"}),"Customer RFQ No":e("input",{id:"customer_rfq_no",type:"text",name:"customer_rfq_no",className:"form-input flex-1 ",onChange:r=>s(r.target.name,r.target.value),defaultValue:a.customer_rfq_no}),Subject:e("input",{required:!0,id:"subject",name:"subject",type:"text",className:"form-input flex-1 ",onChange:r=>s(r.target.name,r.target.value),defaultValue:a.subject}),"Converted by":e(x,{defaultOptions:!0,isMulti:!1,id:"converted_by_id",name:"converted_by_id",placeholder:"Type at least 2 characters to search...",loadOptions:T,className:"flex-1",onChange:({value:r})=>{s("converted_by_id",r)},defaultValue:a.converted_by?{value:(I=a.converted_by)==null?void 0:I.id,label:e("div",{className:"flex items-center",children:e("div",{className:"text-sm font-bold",children:((D=a.converted_by)==null?void 0:D.first_name)??" "+((j=a.converted_by)==null?void 0:j.last_name)??""})},(E=a.converted_by)==null?void 0:E.id)}:{value:null,lable:null}}),"Quote Chance":e(Q,{name:"quote_chance",required:!0,options:c,className:"flex-1",onChange:({value:r})=>{s("quote_chance",r)},defaultValue:c.find(r=>r.value==a.quote_chance)}),Currency:e(Q,{name:"currency",options:X,className:"flex-1",onChange:({value:r})=>{s("currency",r)},defaultValue:X.find(r=>r.value==a.currency)})},"":{"Quote Owner":e(x,{defaultOptions:!0,isMulti:!1,id:"owner_id",name:"owner_id",placeholder:"Type at least 2 characters to search...",loadOptions:T,onChange:({value:r})=>{s("owner_id",r)},defaultValue:{value:(A=a.owner)==null?void 0:A.id,label:p("div",{className:"flex items-center",children:[a.owner?e("img",{src:k(a.owner.avatar_data),alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}):null,p("div",{children:[e("div",{className:"text-sm font-bold",children:((M=a.owner)==null?void 0:M.first_name)+" "+((P=a.owner)==null?void 0:P.last_name)}),e("div",{className:"text-xs text-gray-500",children:(L=a.owner)==null?void 0:L.email})]})]},(R=a.owner)==null?void 0:R.id)},className:"flex-1"}),"PM User":e(x,{defaultOptions:!0,isMulti:!1,id:"pm_user_id",name:"pm_user_id",placeholder:"Type at least 2 characters to search...",loadOptions:T,onChange:({value:r})=>{s("pm_user_id",r)},defaultValue:{value:(B=a.pm_user)==null?void 0:B.id,label:p("div",{className:"flex items-center",children:[a.pm_user?e("img",{src:k(a.pm_user.avatar_data),alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}):null,p("div",{children:[e("div",{className:"text-sm font-bold",children:(U=a.pm_user)==null?void 0:U.name}),e("div",{className:"text-xs text-gray-500",children:(Y=a.pm_user)==null?void 0:Y.email})]})]},(W=a.pm_user)==null?void 0:W.id)},className:"flex-1"}),"Deals Name":e(x,{defaultOptions:!0,isMulti:!1,id:"deal_id",name:"deal_id",placeholder:"Type at least 2 characters to search...",loadOptions:de,onChange:({value:r})=>{s("deal_id",r)},defaultValue:{value:($=a.deal)==null?void 0:$.id,label:e("div",{className:"flex items-center",children:e("div",{className:"text-sm font-bold",children:(H=a.deal)==null?void 0:H.deal_name})},(G=a.deal)==null?void 0:G.id)},className:"flex-1"}),"Quote Stage":e(Q,{name:"quote_stage",required:!0,options:h,className:"flex-1",onChange:({value:r})=>{s("quote_stage",r)},defaultValue:h.find(r=>r.value==a.quote_stage)}),"Quote File(Excel)":e(xe,{id:"quote_file",modelName:"quote",formState:a,formAttribute:"quote_file",updateFormData:f}),"Exchange Rate":e("input",{id:"exchangeRate",type:"text",value:"1",placeholder:"Readonly input here…",className:"flex-1 form-input disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",disabled:!0})}};return e(w,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(V,{fields:u})})})},we=()=>{const a=C(),o=y(s=>s.quoteForm),l=(s,m)=>{a(f({[s]:m}))},c=[{value:"none",label:"-None-"},{value:"1_day",label:"1 Day"},{value:"3_day",label:"3 Days"},{value:"1_week",label:"1 Week"}],h={Status:{"Quote valid":e(Q,{options:c,name:"quote_valid",id:"quote_valid",onChange:({value:s})=>{l("converted_by_id",s)},defaultValue:c.find(s=>s.value==o.quote_valid),className:"flex-1"}),"Proactive Offer":e("input",{id:"proactive_offer",type:"checkbox",name:"proactive_offer",className:"form-checkbox",onChange:s=>l(s.target.name,s.target.checked),checked:o.proactive_offer})},"":{Rating:e("input",{id:"rating",name:"rating",className:"form-input flex-1 ",onChange:s=>l(s.target.name,s.target.value),defaultValue:o.rating})}};return e(w,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(V,{fields:h})})})},Se=()=>{var h,s,m;const a=C(),o=y(u=>u.quoteForm),l=(u,g)=>{a(f({[u]:g}))},c={"Quote Line":{"Product Name":e(x,{defaultOptions:!1,isMulti:!1,id:"product_id",name:"product_id",placeholder:"Type at least 2 characters to search...",loadOptions:le,onChange:({value:u})=>{l("product_id",u)},defaultValue:{value:(h=o.product)==null?void 0:h.id,label:e("div",{className:"flex items-center",children:e("div",{children:e("div",{className:"text-sm font-bold",children:(s=o.product)==null?void 0:s.product_name})})},(m=o.product)==null?void 0:m.id)},className:"flex-1"}),"Customer part ID":e("input",{id:"customer_part_id",name:"customer_part_id",className:"form-input flex-1 ",onChange:u=>l(u.target.name,u.target.value),defaultValue:o.customer_part_id})},"":{Quantity:e("input",{id:"quantity",name:"quantity",className:"form-input flex-1 ",defaultValue:o.quantity,onChange:u=>l(u.target.name,u.target.value)}),"List Price":e("input",{id:"list_price",name:"list_price",className:"form-input flex-1 ",defaultValue:o.list_price,onChange:u=>l(u.target.name,u.target.value)}),"Lead Time":e("input",{id:"lead_time",name:"lead_time",className:"form-input flex-1 ",defaultValue:o.lead_time,onChange:u=>l(u.target.name,u.target.value)})}};return e(w,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(V,{fields:c})})})},qe=()=>{var h,s,m,u,g,v;const a=y(t=>t.quoteForm),o=C(),l=(t,d)=>{o(f({[t]:d}))},c={Source:{Vendor:e(x,{defaultOptions:!0,isMulti:!1,id:"vendor_id",name:"vendor_id",placeholder:"Type at least 2 characters to search...",loadOptions:ce,onChange:({value:t})=>{l("vendor_id",t)},defaultValue:{value:(h=a.vendor)==null?void 0:h.id,label:e("div",{className:"flex items-center",children:e("div",{className:"text-sm font-bold",children:(s=a.vendor)==null?void 0:s.vendor_name})},(m=a.vendor)==null?void 0:m.id)},className:"flex-1"}),"Availability No":e("input",{id:"availability_no",name:"availability_no",className:"form-input flex-1 ",defaultValue:a.availability_no,onChange:t=>l(t.target.name,t.target.value)}),"Availability Date":e(Ne,{name:"availability_date",options:{dateFormat:"Y-m-d ",defaultDate:a.availability_date?new Date(a.availability_date):null},defaultValue:a.availability_date,className:"form-input flex-1",placeholder:"YYYY-MM-DD",onChange:(t,d)=>l("availability_date",d)}),Availability:e(x,{defaultOptions:!0,isMulti:!1,id:"availability_id",name:"availability_id",placeholder:"Type at least 2 characters to search...",loadOptions:ue,onChange:({value:t})=>{l("availability_id",t)},defaultValue:{value:(u=a.availability)==null?void 0:u.id,label:e("div",{className:"flex items-center",children:e("div",{className:"text-sm font-bold",children:(g=a.availability)==null?void 0:g.availability_name})},(v=a.availability)==null?void 0:v.id)},className:"flex-1"})},"":{Cost:e("input",{id:"cost",name:"cost",className:"form-input flex-1 ",defaultValue:a.cost,onChange:t=>l(t.target.name,t.target.value)}),"LT vendor":e("input",{id:"lt_vendor",name:"lt_vendor",className:"form-input flex-1 ",defaultValue:a.lt_vendor,onChange:t=>l(t.target.name,t.target.value)}),SPQ:e("input",{id:"spq",name:"spq",className:"form-input flex-1 ",defaultValue:a.spq,onChange:t=>l(t.target.name,t.target.value)}),"Quantity in Stock":e("input",{id:"quantity_in_stock",name:"quantity_in_stock",defaultValue:a.quantity_in_stock,className:"form-input flex-1 ",onChange:t=>l(t.target.name,t.target.value)})}};return e(w,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(V,{fields:c})})})},Ve=()=>{var h,s,m,u,g,v,t,d,n,b;const a=y(i=>i.quoteForm),o=C(),l=(i,_)=>{o(f({[i]:_}))},c={"Address Information":{"Billing Street":e("input",{id:"billing_street",name:"billing_street",onChange:i=>l(i.target.name,i.target.value),value:a.billing_street||((h=a.account)==null?void 0:h.billing_street)||"",className:"form-input flex-1"}),"Billing City":e("input",{id:"billing_city",name:"billing_city",value:a.billing_city||((s=a.account)==null?void 0:s.billing_city)||"",onChange:i=>l(i.target.name,i.target.value),className:"form-input flex-1"}),"Billing State":e("input",{id:"billing_state",name:"billing_state",value:a.billing_state||((m=a.account)==null?void 0:m.billing_state)||"",onChange:i=>l(i.target.name,i.target.value),className:"form-input flex-1"}),"Billing Code":e("input",{id:"billing_code",name:"billing_code",value:a.billing_code||((u=a.account)==null?void 0:u.billing_code)||"",onChange:i=>l(i.target.name,i.target.value),className:"form-input flex-1"}),"Billing Country":e("input",{id:"billing_country",name:"billing_country",value:a.billing_country||((g=a.account)==null?void 0:g.billing_country)||"",onChange:i=>l(i.target.name,i.target.value),className:"form-input flex-1"})},"":{"Shipping Street":e("input",{id:"shipping_street",name:"shipping_street",value:a.shipping_street||((v=a.account)==null?void 0:v.shipping_street)||"",onChange:i=>l(i.target.name,i.target.value),className:"form-input flex-1"}),"Shipping City":e("input",{id:"shipping_city",name:"shipping_city",value:a.shipping_city||((t=a.account)==null?void 0:t.shipping_city)||"",onChange:i=>l(i.target.name,i.target.value),className:"form-input flex-1"}),"Shipping State":e("input",{id:"shipping_state",name:"shipping_state",value:a.shipping_state||((d=a.account)==null?void 0:d.shipping_state)||"",onChange:i=>l(i.target.name,i.target.value),className:"form-input flex-1"}),"Shipping Code":e("input",{id:"shipping_code",name:"shipping_code",value:a.shipping_code||((n=a.account)==null?void 0:n.shipping_code)||"",onChange:i=>l(i.target.name,i.target.value),className:"form-input flex-1"}),"Shipping Country":e("input",{id:"shipping_country",name:"shipping_country",value:a.shipping_country||((b=a.account)==null?void 0:b.shipping_country)||"",onChange:i=>l(i.target.name,i.target.value),className:"form-input flex-1"})}};return e(w,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(V,{fields:c})})})},Fe=()=>{const a=y(c=>c.quoteForm),o=C(),l=(c,h)=>{o(f({[c]:h}))};return e(w,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e("div",{className:"lg:w-1/2 w-full ltr:lg:mr-6 rtl:lg:ml-6 mb-6",children:p("div",{className:"",children:[e("div",{className:"text-lg",children:"Terms and Conditions :"}),p("div",{className:"mt-4 flex items-center",children:[e("label",{className:"ltr:mr-2 rtl:ml-2 w-1/3 mb-0",children:"Terms and Conditions"}),e("textarea",{id:"terms_conditions",rows:3,name:"terms_conditions",className:"form-textarea flex-1",defaultValue:a.terms_conditions,placeholder:"",onChange:c=>l(c.target.name,c.target.value)})]},"terms_conditions")]},"Terms and Conditions")})})})},Oe=()=>{const a=y(c=>c.quoteForm),o=C(),l=(c,h)=>{o(f({[c]:h}))};return e(w,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e("div",{className:"lg:w-1/2 w-full ltr:lg:mr-6 rtl:lg:ml-6 mb-6",children:p("div",{className:"",children:[e("div",{className:"text-lg",children:"Description Information :"}),p("div",{className:"mt-4 flex items-center",children:[e("label",{className:"ltr:mr-2 rtl:ml-2 w-1/3 mb-0",children:"Description"}),e("textarea",{id:"description",rows:3,name:"description",className:"form-textarea flex-1",placeholder:"",onChange:c=>l(c.target.name,c.target.value),defaultValue:a.description})]},"description")]},"Terms and Conditions")})})})},ke=()=>{const a=y(t=>t.quoteForm),o=C(),[l,c]=N.useState([]),[h,s]=N.useState({total:0,...a.summary}),m=(t,d,n)=>{const b=l.find(S=>S.id===n),i=l.findIndex(S=>S.id===n),_={...b,[t]:d},F=(parseFloat(_.quantity)||0)*(parseFloat(_.list_price)||0);_.amount=F;const q={...l,[i]:_};c(Object.values(q)),o(f({items:q}))};N.useEffect(()=>{c(Object.values(a.items))},[]);const u=()=>{let t;t=l!=null&&l.length?l.reduce((n,b)=>b.id>n?b.id:n,l[0].id):0;let d=[...l,{id:t+1,name:"",part_id:"",quantity:1,SPQ:"",list_price:"",lead_time:"",date_code:"",comment:"",amount:0}];c(d),o(f({items:d}))};N.useEffect(()=>{o(f({summary:h}))},[h]);const g=(t=null)=>{const d=l.filter(n=>n.id!=t.id);c(d),o(f({items:d}))},v=()=>{const t=l.reduce((d,n)=>d+(parseFloat(n.amount)||0),0);s({total:t})};return N.useEffect(()=>{v()},[l]),e(w,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e("div",{className:" w-full ltr:lg:mr-12 rtl:lg:ml-12 mb-12",children:p("div",{className:"",children:[p("div",{className:"text-lg",children:["Quote Items ",e(be,{})," :"]}),p("div",{className:"mt-8",children:[e("div",{className:"overflow-x-auto	w-11/12",children:p("table",{className:"table-auto",children:[e("thead",{children:p("tr",{children:[e("th",{className:"w-1",children:"Product Name"}),e("th",{className:"w-1",children:"Customer Part ID"}),e("th",{className:"w-1",children:"Quantity"}),e("th",{className:"w-1",children:"SPQ"}),e("th",{className:"w-1",children:"List Price"}),e("th",{className:"w-1",children:"Lead Time"}),e("th",{className:"w-1",children:"Date Code"}),e("th",{className:"w-1",children:"Comment"}),e("th",{className:"w-1",children:"Amount"})]})}),e("tbody",{children:l==null?void 0:l.map(t=>{var d;return p("tr",{className:"align-top",children:[p("td",{children:[e(x,{defaultOptions:!1,isMulti:!1,id:"product_id",name:"product_id",placeholder:"Type at least 2 characters to search...",loadOptions:le,onChange:({value:n})=>{m("product_id",n,t.id)},className:"flex-1  min-w-[200px]",defaultValue:{value:t.id,label:e("div",{className:"flex items-center",children:e("div",{children:e("div",{className:"text-sm font-bold",children:(d=t.product)==null?void 0:d.product_name})})},t.id)}}),",",e("textarea",{name:"description",className:"form-textarea mt-4",placeholder:"Enter Description",onChange:n=>m(n.target.name,n.target.value,t.id),defaultValue:t.description})]}),e("td",{children:e("input",{name:"customer_part_id",type:"text",className:"form-input min-w-[200px]",onChange:n=>m(n.target.name,n.target.value,t.id),defaultValue:t.customer_part_id})}),e("td",{children:e("input",{type:"number",className:"form-input w-32",placeholder:"Quantity",name:"quantity",min:0,onChange:n=>m(n.target.name,n.target.value,t.id),defaultValue:t.quantity})}),e("td",{children:e("input",{name:"spq",type:"text",className:"form-input min-w-[200px]",onChange:n=>m(n.target.name,n.target.value,t.id),defaultValue:t.spq})}),e("td",{children:e("input",{type:"number",className:"form-input w-32",placeholder:"Price",name:"list_price",min:0,defaultValue:t.list_price,onChange:n=>m(n.target.name,n.target.value,t.id)})}),e("td",{children:e("input",{name:"lead_time",type:"text",className:"form-input min-w-[200px]",defaultValue:t.lead_time,onChange:n=>m(n.target.name,n.target.value,t.id)})}),e("td",{children:e("input",{name:"date_code",type:"text",className:"form-input min-w-[200px]",defaultValue:t.date_code,onChange:n=>m(n.target.name,n.target.value,t.id)})}),e("td",{children:e("input",{name:"comment",type:"text",className:"form-input min-w-[200px]",defaultValue:t.comment,onChange:n=>m(n.target.name,n.target.value,t.id)})}),e("td",{children:e("input",{disabled:!0,name:"amount",type:"text",className:"form-input min-w-[200px] disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",value:t.amount,onChange:n=>m(n.target.name,n.target.value,t.id)})}),e("td",{children:e("button",{type:"button",onClick:()=>g(t),children:p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})})]},t.id)})})]})}),p("div",{className:"flex justify-between sm:flex-row flex-col mt-6 px-4",children:[e("div",{className:"sm:mb-0 mb-6",children:e("button",{type:"button",className:"btn btn-primary",onClick:()=>u(),children:"Add Item"})}),e("div",{className:"sm:w-2/5",children:p("div",{className:"flex items-center justify-between mt-4 font-semibold",children:[e("div",{className:"flex-1",children:"Total(€)"}),e("input",{id:"total",name:"total",type:"text",value:h.total,className:"w-64 form-input disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",disabled:!0})]})})]})]})]},"Quote Items")})})})},Qe=()=>{const o=ne().id;return p("div",{className:"mt-8 px-4",children:[e(Ce,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(we,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(ke,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(Se,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(qe,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(Ve,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(Fe,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(Oe,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(ye,{modelId:o,modelName:"quote"})]})},Re=()=>{const{hasPermission:a}=me(),o=C(),l=y(d=>d.quoteForm),[c,h]=N.useState(!0),m=ne().id,u=new te,g=pe();N.useEffect(()=>{o(he("Quotes Edit"))}),N.useEffect(()=>{o(Z())},[]),N.useEffect(()=>{v().then(()=>{h(!1)})},[m]),N.useEffect(()=>{o(f({api:"updateSingleQuote",redirectTo:"/quotes/edit/:id",action:"edit"}))},[]);const v=async()=>{const d=await u.fetchSingleQuote(m);if(d.status!=200)return;const n=d.data.data.quote;o(f(n))},t=async()=>{try{const d=await u.convertQuoteToSalesOrder({id:l.id});if(d.status==200)fe.fire({title:"Quote Converted Successfully.",html:`
                <span class="text-blue-500">Do you want to redirect to created SalesOrder ? </span>
                `,showCancelButton:!0,icon:"success",confirmButtonText:"Redirect",denyButtonText:"Close",customClass:{title:"text-blue-500"}}).then(n=>{n.isConfirmed&&g(`/sales/edit/${d.data.salesOrder.id}`,{replace:!0})});else if(d.status===422){const n=d.data.errors,b={titleMessage:"You have validation error on converting Sales Order",hasError:!0,...Object.fromEntries(Object.entries(n).map(([i,_])=>[i,_[0]]))};o(ge(b)),ae.fire({icon:"error",html:`<h5>Convert Validation Error</h5>
                        <span style="font-size: 12px">Please Check fields</span>
                        `,padding:"10px 20px"})}else ae.fire({icon:"error",title:"Internal Server Error ,Converting Sales Order failed failed",padding:"10px 20px"})}catch(d){ve("Failed to convert sales order"),console.error(d);return}};return c?e(ee,{}):!a("update-quote")||c?e(ee,{}):p("div",{className:"px-4",children:[e(_e,{formState:l,resetForm:Z}),e("div",{className:"flex xl:flex-row flex-col gap-2.5",children:p("div",{className:"panel px-0 flex-1 py-6 ltr:xl:mr-6 rtl:xl:ml-6 overflow-hidden",children:[e("button",{onClick:t,className:"mx-5 btn btn-secondary gap-2",children:"Convert Quote to Sales Order"}),e(Qe,{})]})})]})};export{Re as default};
