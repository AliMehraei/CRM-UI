import{u as v,b as C,d as y,a as e,F as x,l as _,n as T,x as j,B as P,k as L,U as M,m as k,R as p,T as B,r as A,j as b,V as D,W as Y,X as E,c as Q,s as R,Y as q,e as V}from"./main-053eacbc.js";import{G as N,R as U,A as H}from"./GenerateFields-8203b778.js";import{S as O}from"./react-select.esm-b876113d.js";import{F}from"./index-49d1014b.js";import{F as W}from"./FileUploadComponent-644367b5.js";/* empty css                  */import"./index-93cedf00.js";import"./ClearButtonComponent-4894bd20.js";const $=()=>{const o=v(),t=new C;y(r=>r.salesOrderForm);const n=(r,h)=>{o(p({[r]:h}))},a=async r=>{const h=await t.fetchSingleAccount(r);if(h.status!=200)return;const d=h.data.data.account;o(p({account:d}));const i=["billing_street","billing_city","billing_state","billing_code","billing_country","shipping_street","shipping_city","shipping_state","shipping_code","shipping_country"],u={};i.forEach(s=>{u[s]=d[s]??null}),o(p(u))};return e(x,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(N,{fields:{Header:{"Account Name":e(_,{defaultOptions:!0,isMulti:!1,required:!0,id:"account_id",placeholder:"Type at least 2 characters to search...",name:"account_id",loadOptions:T,onChange:({value:r})=>{n("account_id",r),a(r)},className:"flex-1"}),"Contact Name":e(_,{defaultOptions:!0,isMulti:!1,required:!0,id:"contact_id",placeholder:"Type at least 2 characters to search...",name:"contact_id",loadOptions:j,onChange:({value:r})=>{n("contact_id",r)},className:"flex-1"}),"Quote Name":e(_,{defaultOptions:!0,isMulti:!1,id:"quote_id",placeholder:"Type at least 2 characters to search...",name:"quote_id",loadOptions:P,onChange:({value:r})=>{n("quote_id",r)},className:"flex-1"}),Currency:e(O,{options:L,name:"currency",id:"currency",onChange:({value:r})=>{n("currency",r)},className:"flex-1"})},"":{"Deals Name":e(_,{defaultOptions:!0,isMulti:!1,required:!0,id:"deal_id",placeholder:"Type at least 2 characters to search...",name:"deal_id",loadOptions:M,onChange:({value:r})=>{n("deal_id",r)},className:"flex-1"}),"Deal Stage":e(O,{options:[{value:"none",label:"-None-"},{value:"draft",label:"Draft"},{value:"no_feedback",label:"No Feedback"},{value:"open",label:"open"},{value:"lost",label:"lost"}],name:"deal_stage",id:"deal_stage",onChange:({value:r})=>{n("deal_stage",r)},className:"flex-1"}),"SalesOrders Owner":e(_,{defaultOptions:!0,isMulti:!1,required:!0,id:"owner_id",placeholder:"Type at least 2 characters to search...",name:"owner_id",loadOptions:k,onChange:({value:r})=>{n("owner_id",r)},className:"flex-1"}),"Sales Person":e(_,{defaultOptions:!0,isMulti:!1,required:!0,id:"sales_person_id",placeholder:"Type at least 2 characters to search...",name:"sales_person_id",loadOptions:k,onChange:({value:r})=>{n("sales_person_id",r)},className:"flex-1"}),"Approved By":e(_,{defaultOptions:!0,isMulti:!1,required:!0,id:"approved_by_id",placeholder:"Type at least 2 characters to search...",name:"approved_by_id",loadOptions:k,onChange:({value:r})=>{n("approved_by_id",r)},className:"flex-1"}),"Exchange Rate":e("input",{id:"exchange_rate",name:"exchange_rate",type:"text",value:"1",className:"flex-1 form-input disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",disabled:!0})}}})})})},z=()=>{const o=v();new C;const t=y(c=>c.salesOrderForm),n=(c,r)=>{o(p({[c]:r}))};return e(x,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(N,{fields:{"Sales Orders Information":{"Purchase Order":e("input",{id:"purchase_order",name:"purchase_order",className:"form-input flex-1 ",onChange:c=>n(c.target.name,c.target.value)}),"Customer PO Date":e(F,{options:{dateFormat:"Y-m-d ",position:"auto left"},name:"customer_po_date",value:"",className:"form-input flex-1",onChange:(c,r)=>n("customer_po_date",r)}),"PO Upload":e(W,{id:"po_upload",modelName:"salesOrder",formState:t,formAttribute:"po_upload",updateFormData:p}),"SO Type":e(O,{options:[{value:"none",label:"-None-"},{value:"single_order",label:"Single Order"},{value:"frame_contract",label:"Frame Contract"},{value:"call_off",label:"Call Off"},{value:"forecast",label:"Forecast"}],name:"so_type",id:"so_type",onChange:({value:c})=>{n("so_type",c)},className:"flex-1"}),"Parent SO Nr.":e("input",{id:"parent_so_nr",name:"parent_so_nr",className:"form-input flex-1 ",onChange:c=>n(c.target.name,c.target.value)})},"":{Subject:e("input",{id:"subject",required:!0,name:"subject",className:"form-input flex-1 ",onChange:c=>n(c.target.name,c.target.value)}),Pending:e("input",{id:"pending",name:"pending",className:"form-input flex-1 ",onChange:c=>n(c.target.name,c.target.value)}),Status:e(O,{options:B,name:"status",id:"status",onChange:({value:c})=>{n("status",c)},className:"flex-1"}),ZohoBooksID:e("input",{id:"zoho_books_id",name:"zoho_books_id",className:"form-input flex-1 ",onChange:c=>n(c.target.name,c.target.value)})}}})})})},G=()=>{y(d=>d.salesOrderForm);const[o,t]=A.useState([{id:1,amount:0,list_price:0}]),n=v(),a=new C,m=(d,i,u)=>{const s=o.find(S=>S.id===u),g=o.findIndex(S=>S.id===u),f={...s,[d]:i},l={...f,amount:parseInt(f.quantity??0)*parseFloat(f.list_price??0)},w={...o,[g]:l};t(Object.values(w)),n(p({items:w}))},c=async(d,i)=>{const u=await a.fetchSingleProduct(d);if(u.status!==200)return;const s=u.data.data.product,g=o.find(I=>I.id===i),f=o.findIndex(I=>I.id===i),l={...g,product_id:d,list_price:s.unit_price??0,description:s.description},w={...l,amount:parseInt(l.quantity??0)*parseFloat(l.list_price??0)},S={...o,[f]:w};t(Object.values(S)),n(p({items:S}))},r=()=>{let d;d=o!=null&&o.length?o.reduce((u,s)=>s.id>u?s.id:u,o[0].id):0;let i=[...o,{id:d+1,amount:0,list_price:0}];t(i),n(p({items:i}))},h=(d=null)=>{const i=o.filter(u=>u.id!=d.id);t(i),n(p({items:i}))};return e(x,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e("div",{className:" w-full ltr:lg:mr-12 rtl:lg:ml-12 mb-12 ",children:b("div",{className:"",children:[b("div",{className:"text-lg",children:["Ordered Items",e(U,{})," :"]}),b("div",{className:"mt-8",children:[e("div",{className:"overflow-x-auto	w-11/12",children:b("table",{className:"table-auto w-5",children:[e("thead",{children:b("tr",{children:[e("th",{className:"w-1",children:"Product Name"}),e("th",{className:"w-1",children:"Quantity"}),e("th",{className:"w-1",children:"Customer Part ID"}),e("th",{className:"w-1",children:"List Price"}),e("th",{className:"w-1",children:"Date Code"}),e("th",{className:"w-1",children:"Amount"}),e("th",{className:"w-1",children:"Requested Delivery Date"}),e("th",{className:"w-1",children:"Estimated Delivery Date"})]})}),e("tbody",{children:o.map(d=>b("tr",{className:"align-top",children:[b("td",{children:[e(_,{defaultOptions:!0,isMulti:!1,id:"product_id",name:"product_id",placeholder:"Type at least 2 characters to search...",loadOptions:D,onChange:({value:i})=>{c(i,d.id)},className:"flex-1  min-w-[200px]"}),e("textarea",{name:"description",className:"form-textarea mt-4",placeholder:"Enter Description",onChange:i=>m(i.target.name,i.target.value,d.id)})]}),e("td",{children:e("input",{type:"number",className:"form-input w-32",placeholder:"Quantity",name:"quantity",min:0,onChange:i=>m(i.target.name,i.target.value,d.id)})}),e("td",{children:e("input",{name:"customer_part_id",type:"text",className:"form-input min-w-[200px]",onChange:i=>m(i.target.name,i.target.value,d.id)})}),e("td",{children:e("input",{type:"number",className:"form-input w-32",placeholder:"Price",name:"list_price",min:0,onChange:i=>m(i.target.name,i.target.value,d.id)})}),e("td",{children:e("input",{name:"date_code",type:"text",className:"form-input min-w-[200px]",onChange:i=>m(i.target.name,i.target.value,d.id)})}),e("td",{children:e("input",{name:"amount",type:"text",value:d.amount,className:"flex-1 form-input min-w-[200px] disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",disabled:!0,onChange:i=>m(i.target.name,i.target.value,d.id)})}),e("td",{children:e(F,{name:"requested_delivery_date",options:{dateFormat:"Y-m-d",position:"auto left"},placeholder:"Y-m-d",className:"form-input flex-1 min-w-[200px]",onChange:(i,u)=>m("requested_delivery_date",u,d.id)})}),e("td",{children:e(F,{name:"estimated_delivery_date",options:{dateFormat:"Y-m-d",position:"auto left"},placeholder:"Y-m-d",className:"form-input flex-1 min-w-[200px]",onChange:(i,u)=>m("estimated_delivery_date",u,d.id)})}),e("td",{children:e("button",{type:"button",onClick:()=>h(d),children:b("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})})]},d.id))})]})}),e("div",{className:"flex justify-between sm:flex-row flex-col mt-6 px-4",children:e("div",{className:"sm:mb-0 mb-6",children:e("button",{type:"button",className:"btn btn-primary",onClick:()=>r(),children:"Add Item"})})})]})]},"Quote Items")})})})},X=()=>{const o=v(),t=(a,m)=>{o(p({[a]:m}))};return e(x,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(N,{fields:{"SO line":{"Requested Delivery Date":e(F,{options:{dateFormat:"Y-m-d ",position:"auto left"},placeholder:"Y-m-d",name:"requested_delivery_date",value:"",className:"form-input flex-1",onChange:(a,m)=>t("requested_delivery_date",m)}),"Product Name":e(_,{defaultOptions:!0,isMulti:!1,required:!0,id:"product_id",placeholder:"Type at least 2 characters to search...",name:"product_id",loadOptions:D,onChange:({value:a})=>{t("product_id",a)},className:"flex-1"}),"Customer part Id":e("input",{id:"customer_part_id",name:"customer_part_id",className:"form-input flex-1 ",onChange:a=>t(a.target.name,a.target.value)}),Quantity:e("input",{id:"quantity",name:"quantity",className:"form-input flex-1 ",type:"number",onChange:a=>t(a.target.name,a.target.value)}),"List Price":e("input",{type:"number",id:"list_price",name:"list_price",className:"form-input flex-1 ",onChange:a=>t(a.target.name,a.target.value)})},"":{"Estimated Delivery Date":e(F,{options:{dateFormat:"Y-m-d ",position:"auto left"},placeholder:"Y-m-d",name:"estimated_delivery_date",value:"",className:"form-input flex-1",onChange:(a,m)=>t("estimated_delivery_date",m)}),"Date Code":e("input",{id:"date_code",name:"date_code",className:"form-input flex-1 ",onChange:a=>t(a.target.name,a.target.value)}),SPQ:e("input",{id:"spq",name:"spq",className:"form-input flex-1 ",onChange:a=>t(a.target.name,a.target.value)}),comment:e("input",{id:"comment",name:"comment",className:"form-input flex-1 ",onChange:a=>t(a.target.name,a.target.value)})}}})})})},Z=()=>{var r,h,d,i,u;const o=v(),t=new C,n=y(s=>s.salesOrderForm),a=(s,g)=>{o(p({[s]:g}))},m=async s=>{const g=await t.fetchSingleAvailability(s);if(g.status!=200)return;const f=g.data.data.availability;o(p({availability:f}))},c={"Linked Availability":{"Availability Name":e(_,{defaultOptions:!0,isMulti:!1,id:"availability_id",placeholder:"Type at least 2 characters to search...",name:"availability_id",loadOptions:Y,onChange:({value:s})=>{a("availability_id",s),m(s)},className:"flex-1"}),"Availability No":e("input",{id:"availability_no",name:"availability_no",className:"form-input flex-1 disabled:pointer-events-none bg-[#eee] ",disabled:!0,onChange:s=>a(s.target.name,s.target.value),defaultValue:(r=n.availability)==null?void 0:r.availability_no}),"Availability Cost":e("input",{type:"number",id:"availability_cost",name:"availability_cost",className:"form-input flex-1  disabled:pointer-events-none bg-[#eee]",disabled:!0,onChange:s=>a(s.target.name,s.target.value),defaultValue:(h=n.availability)==null?void 0:h.cost})},"":{"Availability Quantity":e("input",{type:"number",disabled:!0,id:"availability_quantity",name:"availability_quantity",className:"form-input flex-1 disabled:pointer-events-none bg-[#eee]",onChange:s=>a(s.target.name,s.target.value),defaultValue:(d=n.availability)==null?void 0:d.quantity}),"Availability LT":e("input",{id:"availability_lt",name:"availability_lt",disabled:!0,className:"form-input flex-1 disabled:pointer-events-none bg-[#eee] ",onChange:s=>a(s.target.name,s.target.value),defaultValue:(i=n.availability)==null?void 0:i.lead_time}),"Availability DC":e("input",{disabled:!0,id:"availability_dc",name:"availability_dc",className:"form-input flex-1 disabled:pointer-events-none bg-[#eee]",onChange:s=>a(s.target.name,s.target.value),defaultValue:(u=n.availability)==null?void 0:u.date_code})}};return e(x,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(N,{fields:c})})})},J=()=>{var m,c,r,h,d,i,u,s,g,f;const o=v();new C;const t=y(l=>l.salesOrderForm),n=(l,w)=>{o(p({[l]:w}))},a={"Address Information":{"Billing Street":e("input",{id:"billing_street",name:"billing_street",required:!0,value:t.billing_street||((m=t.account)==null?void 0:m.billing_street)||"",onChange:l=>n(l.target.name,l.target.value),className:"form-input flex-1"}),"Billing City":e("input",{id:"billing_city",name:"billing_city",required:!0,value:t.billing_city||((c=t.account)==null?void 0:c.billing_city)||"",onChange:l=>n(l.target.name,l.target.value),className:"form-input flex-1"}),"Billing State":e("input",{id:"billing_state",name:"billing_state",value:t.billing_state||((r=t.account)==null?void 0:r.billing_state)||"",onChange:l=>n(l.target.name,l.target.value),className:"form-input flex-1"}),"Billing Code":e("input",{id:"billing_code",name:"billing_code",required:!0,value:t.billing_code||((h=t.account)==null?void 0:h.billing_code)||"",onChange:l=>n(l.target.name,l.target.value),className:"form-input flex-1"}),"Billing Country":e("input",{id:"billing_country",name:"billing_country",required:!0,value:t.billing_country||((d=t.account)==null?void 0:d.billing_country)||"",onChange:l=>n(l.target.name,l.target.value),className:"form-input flex-1"})},"":{"Shipping Street":e("input",{id:"shipping_street",name:"shipping_street",value:t.shipping_street||((i=t.account)==null?void 0:i.shipping_street)||"",onChange:l=>n(l.target.name,l.target.value),className:"form-input flex-1"}),"Shipping City":e("input",{id:"shipping_city",name:"shipping_city",value:t.shipping_city||((u=t.account)==null?void 0:u.shipping_city)||"",onChange:l=>n(l.target.name,l.target.value),className:"form-input flex-1"}),"Shipping State":e("input",{id:"shipping_state",name:"shipping_state",value:t.shipping_state||((s=t.account)==null?void 0:s.shipping_state)||"",onChange:l=>n(l.target.name,l.target.value),className:"form-input flex-1"}),"Shipping Code":e("input",{id:"shipping_code",name:"shipping_code",value:t.shipping_code||((g=t.account)==null?void 0:g.shipping_code)||"",onChange:l=>n(l.target.name,l.target.value),className:"form-input flex-1"}),"Shipping Country":e("input",{id:"shipping_country",name:"shipping_country",value:t.shipping_country||((f=t.account)==null?void 0:f.shipping_country)||"",onChange:l=>n(l.target.name,l.target.value),className:"form-input flex-1"})}};return e(x,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(N,{fields:a})})})},K=()=>{y(a=>a.salesOrderForm);const o=v();new C;const t=(a,m)=>{o(p({[a]:m}))};return e(x,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(N,{fields:{"Terms and Conditions":{"Terms and Conditions":e("textarea",{id:"terms_conditions",rows:3,name:"terms_conditions",className:"form-textarea flex-1",placeholder:"",onChange:a=>t(a.target.name,a.target.value)})},"":{}}})})})},ee=()=>{y(a=>a.salesOrderForm);const o=v();new C;const t=(a,m)=>{o(p({[a]:m}))};return e(x,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(N,{fields:{"Description Information":{Description:e("textarea",{id:"description",rows:3,name:"description",className:"form-textarea flex-1",placeholder:"",onChange:a=>t(a.target.name,a.target.value)})},"":{}}})})})},ae=()=>{const o=v();y(a=>a.salesOrderForm);const t=(a,m)=>{o(p({[a]:m}))};return e(x,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(N,{fields:{"Technical information":{"Waiting for approval":e("input",{id:"waiting_approval",type:"checkbox",name:"waiting_approval",className:"form-checkbox",onChange:a=>t(a.target.name,a.target.checked)}),Approval:e("input",{id:"approval",type:"checkbox",name:"approval",className:"form-checkbox",onChange:a=>t(a.target.name,a.target.checked)}),"Approve Changes":e(O,{options:E,name:"approval_changes",id:"approval_changes",onChange:({value:a})=>{t("approval_changes",a)},className:"flex-1"}),Tech:e("input",{id:"tech",type:"checkbox",name:"tech",className:"form-checkbox",onChange:a=>t(a.target.name,a.target.checked)})},"":{"Technical info":e("textarea",{id:"tech_info",rows:2,name:"tech_info",className:"form-textarea flex-1",placeholder:"",onChange:a=>t(a.target.name,a.target.value)}),Subform:e("textarea",{id:"subform",rows:2,name:"subform",className:"form-textarea flex-1",placeholder:"",onChange:a=>t(a.target.name,a.target.value)})}}})})})},te=()=>b("div",{className:"mt-8 px-4",children:[e($,{},"HeaderSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(z,{},"SalesOrderInformationSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(G,{},"SalesItemsSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(X,{},"SOLineSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(Z,{},"LinkedAvailabilitySection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(J,{},"AddressInformationSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(K,{},"TermsConditionsSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(ee,{},"DescriptionInformationSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(ae,{},"TechnicalInformationSection")]}),me=()=>{const{hasPermission:o}=Q(),t=y(a=>a.salesOrderForm),n=v();return A.useEffect(()=>{n(R("Sales Order Add"))}),A.useEffect(()=>{n(q())},[]),o("create-sales-order")?b("div",{className:"px-4",children:[e(H,{formState:t,resetForm:q}),e("div",{className:"flex xl:flex-row flex-col gap-2.5",children:e("div",{className:"panel px-0 flex-1 py-6 ltr:xl:mr-6 rtl:xl:ml-6 overflow-hidden",children:e(te,{})})})]}):e(V,{})};export{me as default};
