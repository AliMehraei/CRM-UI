import{u as N,d as y,j as e,aC as u,l as g,n as P,b as o,f as k,p as _,x as $,k as q,m as M,F as v,X as U,h as D,c as L,r as x,s as Q,aD as A,e as I,a as R}from"./main-38fe5343.js";import{S as b}from"./react-select.esm-c9ae4ddb.js";import{G as C}from"./GenerateFields-93e4149c.js";import{I as G}from"./ImageUploadComponent-b1c70ca1.js";import{F as H}from"./FileUploadComponent-c3b5f94f.js";import{E as T,x as j}from"./SelectOptions-c7baecc3.js";import{A as B}from"./AttachmentSection-80fb3b61.js";import{A as X}from"./ActionButtonsComponent-85ee23fd.js";import"./ClearButtonComponent-b4d8730d.js";import"./index-ee82f402.js";const z=()=>{var l,c,m,s,p,i,f,w,S,E,V,F,O;const r=N(),a=y(t=>t.excessForm),n=(t,h)=>{r(u({[t]:h}))},d={Header:{"Excess Image":e(G,{id:"image",modelName:"excess",formState:a,formAttribute:"image",updateFormData:u}),"Account Name":e(g,{defaultOptions:!0,isMulti:!1,id:"account_id",name:"account_id",required:!0,placeholder:"Type at least 2 characters to search...",loadOptions:P,onChange:({value:t})=>{n("account_id",t)},defaultValue:{value:(l=a.account)==null?void 0:l.id,label:o("div",{className:"flex items-center",children:[a.account?e("img",{src:k(a.account.image),alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}):null,o("div",{children:[e("div",{className:"text-sm font-bold",children:(c=a.account)==null?void 0:c.account_name}),e("div",{className:"text-xs text-gray-500",children:(m=a.account)==null?void 0:m.email})]}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var t;return _(`${(t=a.account)==null?void 0:t.account_name}`)},children:"Copy & Select"})]},(s=a.account)==null?void 0:s.id)},className:"flex-1"}),Contact:e(g,{defaultOptions:!0,isMulti:!1,id:"contact_id",name:"contact_id",placeholder:"Type at least 2 characters to search...",loadOptions:$,onChange:({value:t})=>{n("contact_id",t)},defaultValue:{value:(p=a.contact)==null?void 0:p.id,label:o("div",{className:"flex items-center",children:[a.contact?e("img",{src:a.contact.image??"/assets/images/user-profile.jpeg",alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}):null,o("div",{children:[e("div",{className:"text-sm font-bold",children:(i=a.contact)==null?void 0:i.name}),e("div",{className:"text-xs text-gray-500",children:(f=a.contact)==null?void 0:f.email})]}),a.contact?e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var t;return _(`${(t=a.contact)==null?void 0:t.name}`)},children:"Copy & Select"}):null]},(w=a.contact)==null?void 0:w.id)},className:"flex-1"}),Email:e("input",{id:"email",type:"text",name:"email",className:"form-input flex-1 ",defaultValue:a.email,onChange:t=>n(t.target.name,t.target.value)}),Currency:e(b,{options:q,onChange:({value:t})=>{n("currency",t)},defaultValue:q.find(t=>t.value==a.currency),className:"flex-1"}),"Portal Excess Id":e("input",{id:"portal_excess_id",type:"text",name:"portal_excess_id",className:"form-input flex-1 ",defaultValue:a.portal_excess_id,onChange:t=>n(t.target.name,t.target.value)})},"":{"Excess Owner":e(g,{defaultOptions:!0,isMulti:!1,id:"owner_id",name:"owner_id",placeholder:"Type at least 2 characters to search...",loadOptions:M,onChange:({value:t})=>{n("owner_id",t)},defaultValue:{value:(S=a.owner)==null?void 0:S.id,label:o("div",{className:"flex items-center",children:[a.owner?e("img",{src:k(a.owner.avatar_data),alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}):null,o("div",{children:[e("div",{className:"text-sm font-bold",children:((E=a.owner)==null?void 0:E.first_name)+" "+((V=a.owner)==null?void 0:V.last_name)}),e("div",{className:"text-xs text-gray-500",children:(F=a.owner)==null?void 0:F.email})]}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var t,h;return _(`${((t=a.owner)==null?void 0:t.first_name)+" "+((h=a.owner)==null?void 0:h.last_name)}`)},children:"Copy & Select"})]},(O=a.owner)==null?void 0:O.id)},className:"flex-1"}),"Excess File":e(H,{id:"excess_file",modelName:"excess",formState:a,formAttribute:"excess_file",updateFormData:u}),"Excess Source":e(b,{name:"excess_source",id:"excess_source",options:T,onChange:({value:t})=>{n("excess_source",t)},defaultValue:T.find(t=>t.value==a.excess_source),className:"flex-1"}),"Secondary Email":e("input",{id:"secondary_email",type:"text",name:"secondary_email",defaultValue:a.secondary_email,className:"form-input flex-1 ",onChange:t=>n(t.target.name,t.target.value)}),"Email Opt Out":e("input",{id:"email_opt_out",type:"checkbox",name:"email_opt_out",className:"form-checkbox",checked:a.email_opt_out,onChange:t=>n(t.target.name,t.target.checked)}),"Exchange Rate":e("input",{id:"exchangeRate",type:"text",value:"1",placeholder:"readOnly input hereâ€¦",className:"flex-1 form-input disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",disabled:!0})}};return e(v,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(C,{fields:d})})})},J=()=>{const r=N(),a=y(l=>l.excessForm),n=(l,c)=>{r(u({[l]:c}))},d={Status:{"Excess Type":e(b,{options:j,name:"excess_type",id:"excess_type",onChange:({value:l})=>{n("excess_type",l)},defaultValue:j.find(l=>l.value==a.excess_type),className:"flex-1"})},"":{"Excess Name":e("input",{id:"excess_name",type:"text",name:"excess_name",className:"form-input flex-1 ",defaultValue:a.excess_name,onChange:l=>n(l.target.name,l.target.value)})}};return e(v,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(C,{fields:d})})})},K=()=>{var l,c,m;const r=N(),a=y(s=>s.excessForm),n=(s,p)=>{r(u({[s]:p}))},d={"Excess Line":{"Product name":e(g,{defaultOptions:!1,isMulti:!1,id:"product_name",name:"product_name",required:!0,placeholder:"Type at least 2 characters to search...",loadOptions:U,onChange:({value:s})=>{n("product_id",s)},defaultValue:{value:(l=a.product)==null?void 0:l.id,label:o("div",{className:"flex items-center",children:[e("div",{className:"text-sm font-bold",children:(c=a.product)==null?void 0:c.product_name}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var s;return _(`${(s=a.product)==null?void 0:s.product_name}`)},children:"Copy & Select"})]},(m=a.product)==null?void 0:m.id)},className:"flex-1"}),"Customer Internal No.":e("input",{id:"customer_internal_no",type:"text",name:"customer_internal_no",className:"form-input flex-1 ",defaultValue:a.customer_internal_no,onChange:s=>n(s.target.name,s.target.value)}),Quantity:e("input",{id:"quantity",type:"text",name:"quantity",className:"form-input flex-1 ",defaultValue:a.quantity,required:!0,onChange:s=>n(s.target.name,s.target.value)}),Cost:e("input",{id:"cost",type:"text",name:"cost",className:"form-input flex-1 ",defaultValue:a.cost,required:!0,onChange:s=>n(s.target.name,s.target.value)})},"":{"Date Code":e("input",{id:"date_code",type:"text",name:"date_code",className:"form-input flex-1 ",defaultValue:a.date_code,onChange:s=>n(s.target.name,s.target.value)}),SPQ:e("input",{id:"spq",type:"text",name:"spq",className:"form-input flex-1 ",defaultValue:a.spq,onChange:s=>n(s.target.name,s.target.value)}),MOQ:e("input",{id:"moq",type:"text",name:"moq",defaultValue:a.moq,className:"form-input flex-1 ",onChange:s=>n(s.target.name,s.target.value)}),Comment:e("input",{id:"comment",type:"text",name:"comment",defaultValue:a.comment,className:"form-input flex-1 ",onChange:s=>n(s.target.name,s.target.value)})}};return e(v,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(C,{fields:d})})})},W=()=>{const a=D().id;return o("div",{className:"mt-8 px-4",children:[e(z,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(J,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(K,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(B,{modelId:a,modelName:"excess"})]})},re=()=>{const{hasPermission:r}=L(),a=y(i=>i.excessForm),[n,d]=x.useState(!0),c=D().id,m=new R,s=N();x.useEffect(()=>{s(Q("Excess Edit"))}),x.useEffect(()=>{s(A())},[]);const p=async()=>{const i=await m.fetchSingleExcess(c);if(i.status!=200)return;const f=i.data.data.excess;f.oldImage=f.image,s(u(f))};return x.useEffect(()=>{p().then(()=>{d(!1)})},[c]),x.useEffect(()=>{s(u({api:"updateSingleExcess",redirectTo:"/excess/edit/:id",action:"edit"}))},[]),n?e(I,{}):!r("update-excess")||n?e(I,{}):o("div",{className:"px-4",children:[e(X,{formState:a,resetForm:A}),e("div",{className:"flex xl:flex-row flex-col gap-2.5",children:e("div",{className:"panel px-0 flex-1 py-6 ltr:xl:mr-6 rtl:xl:ml-6 overflow-hidden",children:e(W,{})})})]})};export{re as default};
