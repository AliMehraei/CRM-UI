import{u as H,r as t,j as e,F as U,b as r,l as K,$ as ee,aH as te,L as ae,d as W,c as J,a as se,e as ne,S as re,N as oe,s as ie}from"./main-cf3c5856.js";import{F as G}from"./index-0e3f8098.js";/* empty css                  */import{s as X,Q as le}from"./sortBy-1e48ec3e.js";import"./_baseIsEqual-818113ec.js";const ce=({setDateRfqStartFilter:c,setDateRfqEndFilter:v,setDateVendorRfqStartFilter:N,setDateVendorRfqEndFilter:C,setDateAvailabilityStartFilter:w,setDateAvailabilityEndFilter:x,setVendorNameFilter:y,setManufacturerNameFilter:p})=>{H();const[d,R]=t.useState([]),[s,m]=t.useState([]),[q,T]=t.useState([]),[M,u]=t.useState([]),[F,f]=t.useState(""),[h,$]=t.useState(""),[A,O]=t.useState(""),[L,E]=t.useState(""),[P,I]=t.useState(""),[z,j]=t.useState(""),[g,V]=t.useState(""),[_,D]=t.useState(""),[B,n]=t.useState(""),o=a=>{m(a);const i=a.map(l=>l.value);R(i)},S=a=>{u(a);const i=a.map(l=>l.value);T(i)},Q=a=>{if(Array.isArray(a)&&a.length===2){const i=new Date(a[0].getTime()-a[0].getTimezoneOffset()*6e4).toISOString().split("T")[0],l=new Date(a[1].getTime()-a[1].getTimezoneOffset()*6e4).toISOString().split("T")[0],b=`${i} to ${l}`;f(b)}},Z=a=>{if(Array.isArray(a)&&a.length===2){const i=new Date(a[0].getTime()-a[0].getTimezoneOffset()*6e4).toISOString().split("T")[0],l=new Date(a[1].getTime()-a[1].getTimezoneOffset()*6e4).toISOString().split("T")[0],b=`${i} to ${l}`;E(b)}},Y=a=>{if(Array.isArray(a)&&a.length===2){const i=new Date(a[0].getTime()-a[0].getTimezoneOffset()*6e4).toISOString().split("T")[0],l=new Date(a[1].getTime()-a[1].getTimezoneOffset()*6e4).toISOString().split("T")[0],b=`${i} to ${l}`;V(b)}};return e(U,{children:e("div",{className:"panel  border-white-light dark:border-[#1b2e4b]",children:r("div",{className:"grid sm:grid-cols-12 md:grid-cols-6 gap-3 mb-10",children:[r("div",{className:"inline-block gap-3",children:[e("label",{className:"sm:col-span-4 mt-2 block text-[16px] font-semibold text-gray-800",children:"Select Vendor Name :"}),e(K,{defaultOptions:!0,isMulti:!0,loadOptions:ee,name:"vendor_name",id:"vendor_name",onChange:o,className:"sm:col-span-8 lg:col-span-2",placeholder:"Select Vendor Name"})]}),r("div",{className:"inline-block gap-3",children:[e("label",{className:"sm:col-span-4 mt-2 block text-[16px] font-semibold text-gray-800",children:"Select Manufacturer Name :"}),e(K,{defaultOptions:!0,isMulti:!0,id:"manufacturer_name",placeholder:"Select Manufacturer Name",loadOptions:te,onChange:S,className:"sm:col-span-8 lg:col-span-2"})]}),r("div",{className:"inline-block gap-3",children:[e("label",{className:"sm:col-span-4 mt-2 block text-[16px] font-semibold text-gray-800",children:"Select Date Rfq:"}),r("div",{className:"inline-flex",children:[e(G,{options:{mode:"range",dateFormat:"Y-m-d",position:"auto left"},value:F,className:"sm:col-span-8 form-input w-56",onChange:a=>Q(a)}),e("a",{className:"input-button ml-2 cursor-pointer",title:"Clear",onClick:()=>{f(""),$(""),O("")},children:r("svg",{width:"35",height:"35",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{opacity:"0.5",d:"M2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12Z",stroke:"#1C274C","stroke-width":"1.5"}),e("path",{d:"M14.5 9.50002L9.5 14.5M9.49998 9.5L14.5 14.5",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"})]})})]})]}),r("div",{className:"inline-block gap-3",children:[e("label",{className:"sm:col-span-4 mt-2 block text-[16px] font-semibold text-gray-800",children:"Select Date VendorRfq:"}),r("div",{className:"inline-flex",children:[e(G,{options:{mode:"range",dateFormat:"Y-m-d",position:"auto left"},value:L,className:"sm:col-span-8 form-input w-56",onChange:a=>Z(a)}),e("a",{className:"input-button ml-2 cursor-pointer",title:"Clear",onClick:()=>{E(""),I(""),j("")},children:r("svg",{width:"35",height:"35",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{opacity:"0.5",d:"M2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12Z",stroke:"#1C274C","stroke-width":"1.5"}),e("path",{d:"M14.5 9.50002L9.5 14.5M9.49998 9.5L14.5 14.5",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"})]})})]})]}),r("div",{className:"inline-block gap-3",children:[e("label",{className:"sm:col-span-4 mt-2 block text-[16px] font-semibold text-gray-800",children:"Select Date Availability:"}),r("div",{className:"inline-flex",children:[e(G,{options:{mode:"range",dateFormat:"Y-m-d",position:"auto left"},value:g,className:"sm:col-span-8 form-input w-56",onChange:a=>Y(a)}),e("a",{className:"input-button ml-2 cursor-pointer",title:"Clear",onClick:()=>{V(""),D(""),n("")},children:r("svg",{width:"35",height:"35",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{opacity:"0.5",d:"M2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12Z",stroke:"#1C274C","stroke-width":"1.5"}),e("path",{d:"M14.5 9.50002L9.5 14.5M9.49998 9.5L14.5 14.5",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"})]})})]})]}),r("div",{className:"inline-block lg:justify-end  lg:mt-9",children:[e("button",{type:"button",onClick:()=>{y(d),p(q),c(h),v(A),N(P),C(z),w(_),x(B)},className:"sm:col-span-12 lg:col-span-2 float-right block items-center  px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:" Filter"}),e(ae,{type:"button",className:"sm:col-span-12 lg:col-span-2 float-right block items-center  mx-3 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",to:"/admin-analytics/sales-order",reloadDocument:!0,children:"Reset"})]})]})})})},de=({permissionName:c,tableColumns:v,frontRoute:N,filterParam:C})=>{H(),W(n=>n.filters);const{hasPermission:w,isLoading:x,isLoggedIn:y}=J(),[p,d]=t.useState(!0);t.useState(!1);const R=new se,s=W(n=>n.themeConfig.theme)==="dark",[m,q]=t.useState([]);t.useState([]),t.useState([]),t.useState("");const[T,M]=t.useState([]),[u,F]=t.useState(1),f=[50,100],[h,$]=t.useState(f[0]),[A,O]=t.useState(X(m,"id")),[L,E]=t.useState(A),[P,I]=t.useState([]),[z,j]=t.useState(0),[g,V]=t.useState({columnAccessor:"id",direction:"asc"}),_=(n="",o="success")=>{re.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,customClass:{container:"toast"}}).fire({icon:o,title:n,padding:"10px 20px"})},D=async(n=1,o=f[0],S=[],Q={})=>{d(!0);const{columnAccessor:Z="",direction:Y=""}=Q;try{await R[N]({page:n,pageSize:o,sortField:Z,sortDirection:Y,filterParam:C}).then(k=>{var a,i,l,b;q((i=(a=k.data)==null?void 0:a.data)==null?void 0:i.data),j((b=(l=k.data)==null?void 0:l.data)==null?void 0:b.total),d(!1)}).catch(k=>{console.error("Error fetching data: ",k),d(!1),_(`Error fetching  ${c} data.`,"error")})}catch(k){_(`Error fetching ${c} data.`,"error"),console.error("Error fetching data: ",k),d(!1)}},B=n=>{const{columnAccessor:o,direction:S="asc"}=n;V({columnAccessor:o,direction:S}),F(1),D(u,h,T,{columnAccessor:o,direction:S})};return t.useEffect(()=>{const n=X(m,g.columnAccessor),o=g.direction!=="asc"?n.reverse():n;O(o)},[m,g]),t.useEffect(()=>{F(1)},[h]),t.useEffect(()=>{E([...A.slice(0,h)])},[u,h,A]),t.useEffect(()=>{D(u,h,T,g)},[u,h,g]),!w(`${c}`)||p?e(ne,{}):e(U,{children:e("div",{className:"panel px-0 border-white-light dark:border-[#1b2e4b]",children:e("div",{className:`${c}-table`,children:e("div",{className:"grid grid-cols-1 gap-6 mb-6",children:e("div",{className:"panel col-span-12",children:e("div",{className:"datatables pagination-padding",children:p?e("div",{className:"flex justify-center",children:e("span",{className:"animate-spin border-4 my-4 border-success border-l-transparent rounded-full w-12 h-12 inline-block align-middle m-auto mb-10"})}):e(le,{className:`${s} whitespace-nowrap table-hover`,records:L,columns:v,highlightOnHover:!0,totalRecords:z,recordsPerPage:h,page:u,onPageChange:F,recordsPerPageOptions:f,onRecordsPerPageChange:$,sortStatus:g,onSortStatusChange:B,selectedRecords:P,onSelectedRecordsChange:I,paginationText:({from:n,to:o,totalRecords:S})=>`Showing ${n} to ${o} of ${S} entries`})})})})})})})},me=({dateRfqStartFilter:c,dateRfqEndFilter:v,dateVendorRfqStartFilter:N,dateVendorRfqEndFilter:C,dateAvailabilityStartFilter:w,dateAvailabilityEndFilter:x,vendorNameFilter:y,manufacturerNameFilter:p})=>{const{hasPermission:d}=J();return e("div",{className:"pt-5 flex-1",children:e("div",{className:"grid  gap-6 mb-6",children:e("div",{className:"panel h-full xl:col-span-2",children:r("div",{className:"relative",children:[e("h5",{className:"font-semibold text-lg",children:"List Vendor"}),e("div",{className:"bg-white dark:bg-black rounded-lg",children:e(de,{permissionName:"admin-vendor-list-analytics",tableColumns:[{accessor:"id",sortable:!0,render:({id:s})=>e("div",{className:"font-semibold",children:s})},{accessor:"vendor Name",sortable:!0,render:({vendor_name:s,id:m})=>d("update-vendor")?e(oe,{to:`/vendor/edit/${m}`,children:e("div",{className:"text-primary underline hover:no-underline font-semibold",children:`#${s}`})}):e("div",{className:"font-semibold",children:`#${s}`})},{accessor:"Manufacturer Name",title:"Manufacturer Name",sortable:!0,render:({manufacturer_name:s})=>e("div",{className:"font-semibold",children:`${s}`})},{accessor:"sent_rfqs_count",title:"Sent RFQs count",sortable:!1,render:({sent_rfqs_count:s})=>e("div",{className:"font-semibold",children:s})},{accessor:"sent_v_rfqs_count",title:"Sent VRFQs Count",sortable:!0,render:({sent_v_rfqs_count:s})=>e("div",{className:"font-semibold",children:s})},{accessor:"received_avas_count",title:"Received AVAs Count",sortable:!0,render:({received_avas_count:s})=>e("div",{className:"font-semibold",children:s})}],frontRoute:"reportVendorList",filterParam:{manufacturer_name:p,date_start_vrfq:N??"",date_end_vrfq:C??"",date_start_rfq:c??"",date_end_rfq:v??"",date_start_ava:w??"",date_end_ava:x??"",vendor_name:y}})})]})})})})},Se=()=>{const c=H(),{hasPermission:v}=J();t.useEffect(()=>{c(ie("Vendor Performance Analytics"))},[c]);const[N,C]=t.useState(""),[w,x]=t.useState(""),[y,p]=t.useState(""),[d,R]=t.useState(""),[s,m]=t.useState(""),[q,T]=t.useState(""),[M,u]=t.useState([]),[F,f]=t.useState([]);return e("div",{className:"panel  border-white-light dark:border-[#1b2e4b]",children:v("admin-vendor-list-analytics")?r(U,{children:[e(ce,{setDateRfqStartFilter:C,setDateRfqEndFilter:x,setDateVendorRfqStartFilter:p,setDateVendorRfqEndFilter:R,setDateAvailabilityStartFilter:m,setDateAvailabilityEndFilter:T,setVendorNameFilter:u,setManufacturerNameFilter:f}),e(me,{dateRfqStartFilter:N,dateRfqEndFilter:w,dateVendorRfqStartFilter:y,dateVendorRfqEndFilter:d,dateAvailabilityStartFilter:s,dateAvailabilityEndFilter:q,vendorNameFilter:M,manufacturerNameFilter:F})]}):null})};export{Se as default};
