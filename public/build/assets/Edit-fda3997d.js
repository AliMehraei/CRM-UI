import{u as O,a as D,d as k,j as e,A as w,v as ie,b as u,x as I,G as se,F as b,J as re,t as W,$ as oe,n as P,f as de,Z as v,r as S,a0 as le,a1 as ce,h as ne,c as me,T as ue,s as pe,a2 as Z,e as J,S as he,U as fe,V as K,W as ge}from"./main-cc930730.js";import{G as q,R as be}from"./GenerateFields-ca92ba6c.js";import{S as j}from"./react-select.esm-777eacc9.js";import{S as X,r as ee,s as ae,t as te}from"./SelectOptions-2f384ec2.js";import{F as E}from"./index-32e02fa5.js";import{F as ve}from"./FileUploadComponent-5f7f9dd0.js";import{A as _e}from"./AttachmentSection-9e25cbd6.js";import{A as ye}from"./ActionButtonsComponent-f2bdc3c7.js";/* empty css                  */import"./ClearButtonComponent-11583262.js";import"./index-ccdbb5d1.js";const xe=()=>{var l,m,_,s,g,y,x,p,i,d,t,f,o,N,F,A,V,T,$,M,B,L,Q,Y,R,U,z,G,H;const h=O();new D;const a=k(r=>r.salesOrderForm),n=(r,C)=>{h(v({[r]:C}))},c={Header:{"Account Name":e(w,{defaultOptions:!0,isMulti:!1,required:!0,id:"account_id",placeholder:"Type at least 2 characters to search...",name:"account_id",loadOptions:ie,onChange:({value:r})=>{n("account_id",r)},className:"flex-1",defaultValue:{value:(l=a.account)==null?void 0:l.id,label:u("div",{className:"flex items-center",children:[u("div",{children:[e("div",{className:"text-sm font-bold",children:(m=a.account)==null?void 0:m.account_name}),e("div",{className:"text-xs text-gray-500",children:(_=a.account)==null?void 0:_.email})]}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var r;return I(`${(r=a.account)==null?void 0:r.account_name}`)},children:"Copy & Select"})]},(s=a.account)==null?void 0:s.id)}}),"Contact Name":e(w,{defaultOptions:!0,isMulti:!1,id:"contact_id",placeholder:"Type at least 2 characters to search...",name:"contact_id",loadOptions:se,onChange:({value:r})=>{n("contact_id",r)},className:"flex-1",defaultValue:{value:(g=a.contact)==null?void 0:g.id,label:e("div",{className:"flex items-center",children:a.contact?u(b,{children:[e("img",{src:a.contact.image??"/assets/images/user-profile.jpeg",alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}),u("div",{children:[e("div",{className:"text-sm font-bold",children:((y=a.contact)==null?void 0:y.first_name)+" "+((x=a.contact)==null?void 0:x.last_name)}),e("div",{className:"text-xs text-gray-500",children:(p=a.contact)==null?void 0:p.email})]}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var r,C;return I(`${((r=a.contact)==null?void 0:r.first_name)+" "+((C=a.contact)==null?void 0:C.last_name)}`)},children:"Copy & Select"})]}):null},(i=a.contact)==null?void 0:i.id)}}),"Quote Name":e(w,{defaultOptions:!0,isMulti:!1,id:"quote_id",placeholder:"Type at least 2 characters to search...",name:"quote_id",loadOptions:re,onChange:({value:r})=>{n("quote_id",r)},className:"flex-1",defaultValue:{value:(d=a.quote)==null?void 0:d.id,label:e("div",{className:"flex items-center",children:a.quote?u(b,{children:[e("div",{className:"text-sm font-bold",children:(t=a.quote)==null?void 0:t.subject}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var r;return I(`${(r=a.quote)==null?void 0:r.subject}`)},children:"Copy & Select"})]}):null},(f=a.quote)==null?void 0:f.id)}}),Currency:e(j,{options:W,name:"currency",id:"currency",onChange:({value:r})=>{n("currency",r)},className:"flex-1",defaultValue:W.find(r=>r.value==a.currency)})},"":{"Deals Name":e(w,{defaultOptions:!0,isMulti:!1,id:"deal_id",placeholder:"Type at least 2 characters to search...",name:"deal_id",loadOptions:oe,onChange:({value:r})=>{n("deal_id",r)},className:"flex-1",defaultValue:{value:(o=a.deal)==null?void 0:o.id,label:e("div",{className:"flex items-center",children:a.deal?u(b,{children:[e("div",{className:"text-sm font-bold",children:(N=a.deal)==null?void 0:N.deal_name}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var r;return I(`${(r=a.deal)==null?void 0:r.deal_name}`)},children:"Copy & Select"})]}):null},(F=a.deal)==null?void 0:F.id)}}),"Deal Stage":e(j,{options:X,name:"deal_stage",id:"deal_stage",onChange:({value:r})=>{n("deal_stage",r)},className:"flex-1",defaultValue:X.find(r=>r.value==a.deal_stage)}),"SalesOrders Owner":e(w,{defaultOptions:!0,isMulti:!1,id:"owner_id",placeholder:"Type at least 2 characters to search...",name:"owner_id",loadOptions:P,onChange:({value:r})=>{n("owner_id",r)},className:"flex-1",defaultValue:{value:(A=a.owner)==null?void 0:A.id,label:e("div",{className:"flex items-center",children:a.owner?u(b,{children:[e("img",{src:de(a.owner.avatar_data),alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}),u("div",{children:[e("div",{className:"text-sm font-bold",children:((V=a.owner)==null?void 0:V.first_name)+" "+((T=a.owner)==null?void 0:T.last_name)}),e("div",{className:"text-xs text-gray-500",children:($=a.owner)==null?void 0:$.email})]}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var r,C;return I(`${((r=a.owner)==null?void 0:r.first_name)+" "+((C=a.owner)==null?void 0:C.last_name)}`)},children:"Copy & Select"})]}):null},(M=a.owner)==null?void 0:M.id)}}),"Sales Person":e(w,{defaultOptions:!0,isMulti:!1,id:"sales_person_id",placeholder:"Type at least 2 characters to search...",name:"sales_person_id",loadOptions:P,onChange:({value:r})=>{n("sales_person_id",r)},className:"flex-1",defaultValue:{value:(B=a.sales_person)==null?void 0:B.id,label:e("div",{className:"flex items-center",children:a.sales_person?u(b,{children:[e("img",{src:a.sales_person.image??"/assets/images/user-profile.jpeg",alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}),u("div",{children:[e("div",{className:"text-sm font-bold",children:(L=a.sales_person)==null?void 0:L.name}),e("div",{className:"text-xs text-gray-500",children:(Q=a.sales_person)==null?void 0:Q.email})]}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var r;return I(`${(r=a.sales_person)==null?void 0:r.name}`)},children:"Copy & Select"})]}):null},(Y=a.sales_person)==null?void 0:Y.id)}}),"Approved By":e(w,{defaultOptions:!0,isMulti:!1,id:"approved_by_id",placeholder:"Type at least 2 characters to search...",name:"approved_by_id",loadOptions:P,onChange:({value:r})=>{n("approved_by_id",r)},className:"flex-1",defaultValue:{value:(R=a.approved_by)==null?void 0:R.id,label:e("div",{className:"flex items-center",children:a.approved_by?u(b,{children:[e("img",{src:a.approved_by.image??"/assets/images/user-profile.jpeg",alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}),u("div",{children:[e("div",{className:"text-sm font-bold",children:((U=a.approved_by)==null?void 0:U.first_name)+" "+((z=a.approved_by)==null?void 0:z.last_name)}),e("div",{className:"text-xs text-gray-500",children:(G=a.approved_by)==null?void 0:G.email})]}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var r,C;return I(`${((r=a.approved_by)==null?void 0:r.first_name)+" "+((C=a.approved_by)==null?void 0:C.last_name)}`)},children:"Copy & Select"})]}):null},(H=a.approved_by)==null?void 0:H.id)}}),"Exchange Rate":e("input",{id:"exchange_rate",name:"exchange_rate",type:"text",className:"flex-1 form-input disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",disabled:!0,defaultValue:a.exchange_rate??1})}};return e(b,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(q,{fields:c})})})},Ne=()=>{const h=O();new D;const a=k(l=>l.salesOrderForm),n=(l,m)=>{h(v({[l]:m}))},c={"Sales Orders Information":{"Purchase Order":e("input",{id:"purchase_order",name:"purchase_order",className:"form-input flex-1 ",onChange:l=>n(l.target.name,l.target.value),defaultValue:a.purchase_order}),"Customer PO Date":e(E,{options:{dateFormat:"Y-m-d ",position:"auto left",defaultDate:a.customer_po_date?new Date(a.customer_po_date):null},name:"customer_po_date",value:a.customer_po_date?new Date(a.customer_po_date):"",className:"form-input flex-1",onChange:(l,m)=>n("customer_po_date",m)}),"PO Upload":e(ve,{id:"po_upload",modelName:"salesOrder",formState:a,formAttribute:"po_upload",updateFormData:v}),"SO Type":e(j,{options:ee,name:"so_type",id:"so_type",onChange:({value:l})=>{n("so_type",l)},className:"flex-1",defaultValue:ee.find(l=>l.value==a.so_type)}),"Parent SO Nr.":e("input",{id:"parent_so_nr",name:"parent_so_nr",className:"form-input flex-1 ",onChange:l=>n(l.target.name,l.target.value),defaultValue:a.parent_so_nr})},"":{Subject:e("input",{id:"subject",required:!0,name:"subject",className:"form-input flex-1 ",onChange:l=>n(l.target.name,l.target.value),defaultValue:a.subject}),Pending:e("input",{id:"pending",name:"pending",className:"form-input flex-1 ",onChange:l=>n(l.target.name,l.target.value),defaultValue:a.pending}),Status:e(j,{options:ae,name:"status",id:"status",onChange:({value:l})=>{n("status",l)},className:"flex-1",defaultValue:ae.find(l=>l.value==a.status)}),ZohoBooksID:e("input",{id:"zoho_books_id",name:"zoho_books_id",className:"form-input flex-1 ",onChange:l=>n(l.target.name,l.target.value),defaultValue:a.zoho_books_id})}};return e(b,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(q,{fields:c})})})},Ce=()=>{const h=k(i=>i.salesOrderForm),[a,n]=S.useState([]),c=O(),l=new D,[m,_]=S.useState({total:0,...h.summary}),s=(i,d,t)=>{const f=a.find(V=>V.id===t),o=a.findIndex(V=>V.id===t),N={...f,[i]:d},F={...N,amount:parseInt(N.quantity??0)*parseFloat(N.list_price??0)},A={...a,[o]:F};n(Object.values(A)),c(v({items:A}))},g=async(i,d)=>{const t=await l.fetchSingleProduct(i);if(t.status!==200)return;const f=t.data.data.product,o=a.find(T=>T.id===d),N=a.findIndex(T=>T.id===d),F={...o,product_id:i,list_price:f.unit_price??0,description:f.description},A={...F,amount:parseInt(F.quantity??0)*parseFloat(F.list_price??0)},V={...a,[N]:A};n(Object.values(V)),c(v({items:V}))},y=()=>{let i;i=a!=null&&a.length?a.reduce((t,f)=>f.id>t?f.id:t,a[0].id):0;let d=[...a,{id:i+1,amount:0,list_price:0}];n(d),c(v({items:d}))};S.useEffect(()=>{c(v({summary:m}))},[m]);const x=(i=null)=>{const d=a.filter(t=>t.id!=i.id);n(d),c(v({items:d}))};S.useEffect(()=>{n(Object.values(h.items))},[]);const p=()=>{const i=a.reduce((d,t)=>d+(parseFloat(t.amount)||0),0);_({total:i})};return S.useEffect(()=>{p()},[a]),e(b,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e("div",{className:" w-full ltr:lg:mr-12 rtl:lg:ml-12 mb-12 ",children:u("div",{className:"",children:[u("div",{className:"text-lg",children:["Ordered Items",e(be,{})," :"]}),u("div",{className:"mt-8",children:[e("div",{className:"overflow-x-auto	w-11/12",children:u("table",{className:"table-auto overflow-scroll w-full",children:[e("thead",{children:u("tr",{children:[e("th",{className:"w-1",children:"Product Name"}),e("th",{className:"w-1",children:"Quantity"}),e("th",{className:"w-1",children:"Customer Part ID"}),e("th",{className:"w-1",children:"List Price"}),e("th",{className:"w-1",children:"Date Code"}),e("th",{className:"w-1",children:"Amount"}),e("th",{className:"w-1",children:"Requested Delivery Date"}),e("th",{className:"w-1",children:"Estimated Delivery Date"})]})}),e("tbody",{children:a.map(i=>{var d,t,f;return u("tr",{className:"align-top",children:[u("td",{children:[e(w,{defaultOptions:!1,isMulti:!1,id:"product_id",name:"product_id",placeholder:"Type at least 2 characters to search...",loadOptions:le,onChange:({value:o})=>{g(o,i.id)},defaultValue:i.product?{value:(d=i.product)==null?void 0:d.id,label:e("div",{className:"flex items-center",children:e("div",{children:e("div",{className:"text-sm font-bold",children:(t=i.product)==null?void 0:t.product_name})})},(f=i.product)==null?void 0:f.id)}:null,className:"flex-1  min-w-[200px]"}),e("textarea",{name:"description",className:"form-textarea mt-4",placeholder:"Enter Description",onChange:o=>s(o.target.name,o.target.value,i.id),defaultValue:i.description})]}),e("td",{children:e("input",{type:"number",className:"form-input w-32",placeholder:"Quantity",name:"quantity",min:0,onChange:o=>s(o.target.name,o.target.value,i.id),defaultValue:i.quantity})}),e("td",{children:e("input",{name:"customer_part_id",type:"text",className:"form-input min-w-[200px]",onChange:o=>s(o.target.name,o.target.value,i.id),defaultValue:i.customer_part_id})}),e("td",{children:e("input",{type:"number",className:"form-input w-32",placeholder:"Price",name:"list_price",min:0,defaultValue:i.list_price,onChange:o=>s(o.target.name,o.target.value,i.id)})}),e("td",{children:e("input",{name:"date_code",type:"text",className:"form-input min-w-[200px]",defaultValue:i.date_code,onChange:o=>s(o.target.name,o.target.value,i.id)})}),e("td",{children:e("input",{name:"amount",type:"text",value:i.amount,className:"flex-1 form-input min-w-[200px] disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",disabled:!0,onChange:o=>s(o.target.name,o.target.value,i.id)})}),e("td",{children:e(E,{name:"requested_delivery_date",options:{dateFormat:"Y-m-d",position:"auto left",defaultDate:`${i.requested_delivery_date?new Date(i.requested_delivery_date):""}`},placeholder:"Y-m-d",className:"form-input flex-1 min-w-[200px]",onChange:(o,N)=>s("requested_delivery_date",N,i.id),defaultValue:i.requested_delivery_date})}),e("td",{children:e(E,{name:"estimated_delivery_date",options:{dateFormat:"Y-m-d",position:"auto left",defaultDate:`${i.estimated_delivery_date?new Date(i.estimated_delivery_date):""}`},placeholder:"Y-m-d",className:"form-input flex-1 min-w-[200px]",onChange:(o,N)=>s("estimated_delivery_date",N,i.id),defaultValue:i.estimated_delivery_date})}),e("td",{children:e("button",{type:"button",onClick:()=>x(i),children:u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})})]},i.id)})})]})}),u("div",{className:"flex justify-between sm:flex-row flex-col mt-6 px-4",children:[e("div",{className:"sm:mb-0 mb-6",children:e("button",{type:"button",className:"btn btn-primary",onClick:()=>y(),children:"Add Item"})}),e("div",{className:"sm:w-2/5",children:u("div",{className:"flex items-center justify-between mt-4 font-semibold",children:[e("div",{className:"flex-1",children:"Total(€)"}),e("input",{id:"total",name:"total",type:"text",value:m.total,className:"w-64 form-input disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",disabled:!0})]})})]})]})]},"Quote Items")})})})},we=()=>{var l,m,_;const h=O();new D;const a=k(s=>s.salesOrderForm),n=(s,g)=>{h(v({[s]:g}))},c={"SO line":{"Requested Delivery Date":e(E,{options:{dateFormat:"Y-m-d ",position:"auto left",defaultDate:a.requested_delivery_date?new Date(a.requested_delivery_date):null},name:"requested_delivery_date",value:a.requested_delivery_date?new Date(a.requested_delivery_date):"",className:"form-input flex-1",onChange:(s,g)=>n("requested_delivery_date",g)}),"Product Name":e(w,{defaultOptions:!1,isMulti:!1,id:"product_id",placeholder:"Type at least 2 characters to search...",name:"product_id",loadOptions:le,onChange:({value:s})=>{n("product_id",s)},className:"flex-1",defaultValue:{value:(l=a.product)==null?void 0:l.id,label:e("div",{className:"flex items-center",children:a.product?u(b,{children:[e("div",{className:"text-sm font-bold",children:(m=a.product)==null?void 0:m.product_name}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var s;return I(`${(s=a.product)==null?void 0:s.product_name}`)},children:"Copy & Select"})]}):null},(_=a.product)==null?void 0:_.id)}}),"Customer part Id":e("input",{id:"customer_part_id",name:"customer_part_id",className:"form-input flex-1 ",onChange:s=>n(s.target.name,s.target.value),defaultValue:a.customer_part_id}),Quantity:e("input",{id:"quantity",name:"quantity",className:"form-input flex-1 ",type:"number",onChange:s=>n(s.target.name,s.target.value),defaultValue:a.quantity}),"List Price":e("input",{type:"number",id:"list_price",name:"list_price",className:"form-input flex-1 ",onChange:s=>n(s.target.name,s.target.value),defaultValue:a.list_price})},"":{Cost:e("input",{id:"cost",name:"cost",className:"form-input flex-1 ",defaultValue:a.cost,onChange:s=>n(s.target.name,s.target.value)}),"Estimated Delivery Date":e(E,{options:{dateFormat:"Y-m-d ",position:"auto left",defaultDate:a.estimated_delivery_date?new Date(a.estimated_delivery_date):null},name:"estimated_delivery_date",value:a.estimated_delivery_date?new Date(a.estimated_delivery_date):"",className:"form-input flex-1",onChange:(s,g)=>n("estimated_delivery_date",g)}),"Date Code":e("input",{id:"date_code",name:"date_code",className:"form-input flex-1 ",onChange:s=>n(s.target.name,s.target.value),defaultValue:a.date_code}),SPQ:e("input",{id:"spq",name:"spq",className:"form-input flex-1 ",onChange:s=>n(s.target.name,s.target.value),defaultValue:a.spq}),comment:e("input",{id:"comment",name:"comment",className:"form-input flex-1 ",onChange:s=>n(s.target.name,s.target.value),defaultValue:a.comment})}};return e(b,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(q,{fields:c})})})},Se=()=>{var _,s,g,y,x,p,i,d;const h=O(),a=new D,n=k(t=>t.salesOrderForm),c=(t,f)=>{h(v({[t]:f}))},l=async t=>{const f=await a.fetchSingleAvailability(t);if(f.status!=200)return;const o=f.data.data.availability;h(v({availability:o}))},m={"Linked Availability":{"Availability Name":e(w,{defaultOptions:!1,isMulti:!1,id:"availability_id",placeholder:"Type at least 2 characters to search...",name:"availability_id",loadOptions:ce,onChange:({value:t})=>{c("availability_id",t),l(t)},className:"flex-1",defaultValue:{value:(_=n.availability)==null?void 0:_.id,label:e("div",{className:"flex items-center",children:n.availability?u(b,{children:[e("div",{className:"text-sm font-bold",children:(s=n.availability)==null?void 0:s.availability_name}),e("button",{className:"btn text-xs btn-sm ml-auto",onClick:()=>{var t;return I(`${(t=n.availability)==null?void 0:t.availability_name}`)},children:"Copy & Select"})]}):null},(g=n.availability)==null?void 0:g.id)}}),"Availability No":e("input",{id:"availability_no",name:"availability_no",className:"form-input flex-1 disabled:pointer-events-none bg-[#eee] ",disabled:!0,onChange:t=>c(t.target.name,t.target.value),defaultValue:(y=n.availability)==null?void 0:y.availability_no}),"Availability Cost":e("input",{type:"number",id:"availability_cost",name:"availability_cost",className:"form-input flex-1  disabled:pointer-events-none bg-[#eee]",disabled:!0,onChange:t=>c(t.target.name,t.target.value),defaultValue:(x=n.availability)==null?void 0:x.cost})},"":{"Availability Quantity":e("input",{type:"number",disabled:!0,id:"availability_quantity",name:"availability_quantity",className:"form-input flex-1 disabled:pointer-events-none bg-[#eee]",onChange:t=>c(t.target.name,t.target.value),defaultValue:(p=n.availability)==null?void 0:p.quantity}),"Availability LT":e("input",{id:"availability_lt",name:"availability_lt",disabled:!0,className:"form-input flex-1 disabled:pointer-events-none bg-[#eee] ",onChange:t=>c(t.target.name,t.target.value),defaultValue:(i=n.availability)==null?void 0:i.lead_time}),"Availability DC":e("input",{disabled:!0,id:"availability_dc",name:"availability_dc",className:"form-input flex-1 disabled:pointer-events-none bg-[#eee]",onChange:t=>c(t.target.name,t.target.value),defaultValue:(d=n.availability)==null?void 0:d.date_code})}};return e(b,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(q,{fields:m})})})},Oe=()=>{var l,m,_,s,g,y,x,p,i,d;const h=O();new D;const a=k(t=>t.salesOrderForm),n=(t,f)=>{h(v({[t]:f}))},c={"Address Information":{"Billing Street":e("input",{id:"billing_street",name:"billing_street",onChange:t=>n(t.target.name,t.target.value),value:a.billing_street||((l=a.account)==null?void 0:l.billing_street)||"",className:"form-input flex-1"}),"Billing City":e("input",{id:"billing_city",name:"billing_city",value:a.billing_city||((m=a.account)==null?void 0:m.billing_city)||"",onChange:t=>n(t.target.name,t.target.value),className:"form-input flex-1"}),"Billing State":e("input",{id:"billing_state",name:"billing_state",value:a.billing_state||((_=a.account)==null?void 0:_.billing_state)||"",onChange:t=>n(t.target.name,t.target.value),className:"form-input flex-1"}),"Billing Code":e("input",{id:"billing_code",name:"billing_code",value:a.billing_code||((s=a.account)==null?void 0:s.billing_code)||"",onChange:t=>n(t.target.name,t.target.value),className:"form-input flex-1"}),"Billing Country":e("input",{id:"billing_country",name:"billing_country",value:a.billing_country||((g=a.account)==null?void 0:g.billing_country)||"",onChange:t=>n(t.target.name,t.target.value),className:"form-input flex-1"})},"":{"Shipping Street":e("input",{id:"shipping_street",name:"shipping_street",value:a.shipping_street||((y=a.account)==null?void 0:y.shipping_street)||"",onChange:t=>n(t.target.name,t.target.value),className:"form-input flex-1"}),"Shipping City":e("input",{id:"shipping_city",name:"shipping_city",value:a.shipping_city||((x=a.account)==null?void 0:x.shipping_city)||"",onChange:t=>n(t.target.name,t.target.value),className:"form-input flex-1"}),"Shipping State":e("input",{id:"shipping_state",name:"shipping_state",value:a.shipping_state||((p=a.account)==null?void 0:p.shipping_state)||"",onChange:t=>n(t.target.name,t.target.value),className:"form-input flex-1"}),"Shipping Code":e("input",{id:"shipping_code",name:"shipping_code",value:a.shipping_code||((i=a.account)==null?void 0:i.shipping_code)||"",onChange:t=>n(t.target.name,t.target.value),className:"form-input flex-1"}),"Shipping Country":e("input",{id:"shipping_country",name:"shipping_country",value:a.shipping_country||((d=a.account)==null?void 0:d.shipping_country)||"",onChange:t=>n(t.target.name,t.target.value),className:"form-input flex-1"})}};return e(b,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(q,{fields:c})})})},ke=()=>{const h=k(l=>l.salesOrderForm),a=O();new D;const n=(l,m)=>{a(v({[l]:m}))},c={"Terms and Conditions":{"Terms and Conditions":e("textarea",{id:"terms_conditions",rows:3,name:"terms_conditions",className:"form-textarea flex-1",placeholder:"",onChange:l=>n(l.target.name,l.target.value),defaultValue:h.terms_conditions})},"":{}};return e(b,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(q,{fields:c})})})},Ve=()=>{const h=k(l=>l.salesOrderForm),a=O();new D;const n=(l,m)=>{a(v({[l]:m}))},c={"Description Information":{Description:e("textarea",{id:"description",rows:3,name:"description",className:"form-textarea flex-1",placeholder:"",onChange:l=>n(l.target.name,l.target.value),defaultValue:h.description})},"":{}};return e(b,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(q,{fields:c})})})},Ie=()=>{const h=O(),a=k(l=>l.salesOrderForm),n=(l,m)=>{h(v({[l]:m}))},c={"Technical information":{"Waiting for approval":e("input",{id:"waiting_approval",type:"checkbox",name:"waiting_approval",className:"form-checkbox",onChange:l=>n(l.target.name,l.target.checked),defaultChecked:a.waiting_approval}),Approval:e("input",{id:"approval",type:"checkbox",name:"approval",className:"form-checkbox",onChange:l=>n(l.target.name,l.target.checked),defaultChecked:a.approval}),"Approve Changes":e(j,{options:te,name:"approval_changes",id:"approval_changes",onChange:({value:l})=>{n("approval_changes",l)},className:"flex-1",defaultValue:te.find(l=>l.value==a.approval_changes)}),Tech:e("input",{id:"tech",type:"checkbox",name:"tech",className:"form-checkbox",onChange:l=>n(l.target.name,l.target.checked),defaultChecked:a.tech})},"":{"Technical info":e("textarea",{id:"tech_info",rows:2,name:"tech_info",className:"form-textarea flex-1",placeholder:"",defaultValue:a.tech_info,onChange:l=>n(l.target.name,l.target.value)}),Subform:e("textarea",{id:"subform",rows:2,name:"subform",className:"form-textarea flex-1",placeholder:"",defaultValue:a.subform,onChange:l=>n(l.target.name,l.target.value)})}};return e(b,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(q,{fields:c})})})},De=()=>{const a=ne().id;return u("div",{className:"mt-8 px-4",children:[e(xe,{},"HeaderSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(Ne,{},"SalesOrderInformationSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(Ce,{},"SalesItemsSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(we,{},"SOLineSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(Se,{},"LinkedAvailabilitySection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(Oe,{},"AddressInformationSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(ke,{},"TermsConditionsSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(Ve,{},"DescriptionInformationSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(Ie,{},"TechnicalInformationSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(_e,{modelId:a,modelName:"salesOrder"})]})},Qe=()=>{const{hasPermission:h}=me(),a=k(p=>p.salesOrderForm),[n,c]=S.useState(!0),m=ne().id,_=new D,s=O(),g=ue();S.useEffect(()=>{s(pe("SalesOrder Edit"))}),S.useEffect(()=>{s(Z())},[]);const y=async()=>{const p=await _.fetchSingleSalesOrder(m);if(p.status!=200)return;const i=p.data.data.salesOrder;s(v(i))};S.useEffect(()=>{y().then(()=>{c(!1)})},[m]),S.useEffect(()=>{s(v({api:"updateSingleSalesOrder",redirectTo:"/sales/edit/:id",action:"edit"}))},[]);const x=async()=>{try{const p=await _.convertSalesOrderToInvoice({id:a.id});if(p.status==200)he.fire({title:"SalesOrder Converted Successfully.",html:`
                <span class="text-blue-500">Do you want to redirect to created Invoice ? </span>
                `,showCancelButton:!0,icon:"success",confirmButtonText:"Redirect",denyButtonText:"Close",customClass:{title:"text-blue-500"}}).then(i=>{var d,t;i.isConfirmed&&g(`/invoice/edit/${(t=(d=p.data)==null?void 0:d.invoice)==null?void 0:t.id}`,{replace:!0})});else if(p.status===422){const i=p.data.errors,d={titleMessage:"You have validation error on converting Sales Order",hasError:!0,...Object.fromEntries(Object.entries(i).map(([t,f])=>[t,f[0]]))};s(fe(d)),K.fire({icon:"error",html:`<h5>Convert Validation Error</h5>
                        <span style="font-size: 12px">Please Check fields</span>
                        `,padding:"10px 20px"})}else K.fire({icon:"error",title:"Internal Server Error ,Converting Sales Order failed failed",padding:"10px 20px"})}catch(p){ge("Failed to convert Sales Order"),console.error(p);return}};return n?e(J,{}):!h("update-sales-order")||n?e(J,{}):u("div",{className:"px-4",children:[e(ye,{formState:a,resetForm:Z}),e("div",{className:"flex xl:flex-row flex-col gap-2.5",children:u("div",{className:"panel px-0 flex-1 py-6 ltr:xl:mr-6 rtl:xl:ml-6",children:[e("div",{className:"flex items-center gap-2",children:e("button",{onClick:x,className:"mx-2 btn btn-secondary",children:"Convert SO to Invoice"})}),e(De,{})]})})]})};export{Qe as default};
