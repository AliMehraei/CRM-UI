import{c as K,u as W,r,h as ee,d as ae,s as le,X as E,j as a,e as F,b as o,f as te,i as Q,Y as ie,Z as se,a as re}from"./main-763a01a7.js";import{I as oe}from"./InfoListComponent-4af22fb1.js";import{A as ne,I as l}from"./InformationSectionPreview-139737e5.js";import{M as H}from"./MultipleLineSectionPreview-1d7090f6.js";import{T as be}from"./TableSectionPreview-fd48086e.js";import{A as de}from"./AttachmentSection-7a4759e3.js";import"./CommonIcons-0598faa2.js";const ye=()=>{var p,h,g,_,y,f,O,$,S,j,w,N,k,C,D,P,A,I,x,T,L,B,M,q,R;const{hasPermission:n}=K(),b=W(),[s,Z]=r.useState(!0),t=ee().id,z=new re,e=ae(i=>i.salesOrderForm);r.useEffect(()=>{b(le("Sales Preview"))});const G=()=>{window.print()},U=async()=>{const i=await z.fetchSingleSalesOrder(t);if(i.status!=200)return;const J=i.data.data.salesOrder;b(ie(J))};r.useEffect(()=>{U().then(()=>{Z(!1)})},[t]);const V=[{value:"none",label:"-None-"},{value:"single_order",label:"Single Order"},{value:"frame_contract",label:"Frame Contract"},{value:"call_off",label:"Call Off"},{value:"forecast",label:"Forecast"}],d={leftObjects:[{label:"Account Name",value:`${(p=e.account)==null?void 0:p.account_name}`},{label:"Contact Name",value:`${e.contact?((h=e.contact)==null?void 0:h.first_name)+" "+((g=e.contact)==null?void 0:g.last_name):""}`},{label:"Quote Name",value:(_=e.qoute)==null?void 0:_.subject},{label:"Currency",value:`${e.currency}`}],rightObjects:[{label:"SO Number",value:`${e.so_number}`},{label:"Deals Name",value:`${(y=e.deal)==null?void 0:y.deal_name}`},{label:"Deal Stage",value:`${(f=e.deal)==null?void 0:f.deal_stage}`},{label:"Lost Reason",value:`${(O=e.lead)==null?void 0:O.lost_reason}`},{label:"Lost Reason Comment",value:`${($=e.lead)==null?void 0:$.lost_reason}`},{label:"SO Date",value:`${e.so_date}`},{label:"Exchange Rate ",value:`${e.exchange_rate}`}]},c={leftObjects:[{label:"Purchase Order",value:`${e.purchase_order}`},{label:"Customer PO date",value:`${e.customer_po_date}`},{label:"PO upload",value:`${e.po_upload} `},{label:"SO Type",value:E(e.so_type,V)},{label:"Parent SO Nr",value:e.parent_so_nr}],rightObjects:[{label:"Subject",value:`${e.subject}`},{label:"Pending",value:`${e.pending}`},{label:"Status",value:`${E(e.status,se)}`},{label:"ZohoBooksId",value:`${e.zoho_books_id}`}]},u={leftObjects:[{label:"Sales Total",value:`${e.sales_total}`},{label:"GP Total",value:`${e.gp_total}`},{label:"Margin",value:`${e.margin}`}],rightObjects:[{label:"Resale Price",value:`${e.resale_price}`},{label:"Cost Vendor",value:`${e.cost_vendor}`}]},m={leftObjects:[{label:"Availability Name",value:`${(S=e.availability)==null?void 0:S.availability_name}`},{label:"Availability No",value:`${(j=e.availability)==null?void 0:j.availability_no}`},{label:"Availability Cost",value:`${(w=e.availability)==null?void 0:w.cost}`}],rightObjects:[{label:"Availability Quantity",value:((N=e.availability)==null?void 0:N.quantity)!==null?`${(k=e.availability)==null?void 0:k.quantity}`:null},{label:"Availability LT",value:`${(C=e.availability)==null?void 0:C.lead_time}`},{label:"Availability DC",value:`${(D=e.availability)==null?void 0:D.date_code}`}]},v={leftObjects:[{label:"Billing Street",value:`${e.billing_street}`},{label:"Billing City",value:`${e.billing_city}`},{label:"Billing State",value:`${e.billing_state}`},{label:"Billing Code",value:`${e.billing_code}`},{label:"Billing Country",value:`${e.billing_country}`}],rightObjects:[{label:"Shipping Street",value:`${e.shipping_street}`},{label:"Shipping City",value:`${e.shipping_city}`},{label:"Shipping State",value:`${e.shipping_state}`},{label:"Shipping Code",value:`${e.shipping_code}`},{label:"Shipping Country",value:`${e.shipping_country}`}]},X=[{key:"product_name",label:"Product Name",model:"product"},{key:"quantity",label:"Quantity"},{key:"customer_part_id",label:"Customer Part ID"},{key:"list_price",label:"List Price"},{key:"date_code",label:"Date Code"},{key:"amount",label:"Amount"},{key:"requested_delivery_date",label:"Requested Delivery Date"},{key:"estimated_delivery_date",label:"Estimated Delivery Date"}],Y=[{label:"Sales Order Owner",value:`${((P=e.owner)==null?void 0:P.first_name)??""} ${((A=e.owner)==null?void 0:A.last_name)??""}`},{label:"Sales Person",value:`${((I=e.sales_person)==null?void 0:I.first_name)??""} ${((x=e.sales_person)==null?void 0:x.last_name)??""}`},{label:"Approved By",value:`${((T=e.approved_by)==null?void 0:T.first_name)??""} ${((L=e.approved_by)==null?void 0:L.last_name)??""}`},{label:"Created By",value:`${((B=e.creator)==null?void 0:B.first_name)??""} ${((M=e.creator)==null?void 0:M.last_name)??""}`},{label:"Modified By",value:`${((q=e.modifier)==null?void 0:q.first_name)??""} ${((R=e.modifier)==null?void 0:R.last_name)??""}`}];return s?a(F,{}):!n("read-sales-order")||s?a(F,{}):o("div",{children:[a("div",{className:"flex items-center lg:justify-end justify-center flex-wrap gap-4 mb-6",children:a(ne,{loading:s,hasPermission:n,modelId:t,exportTable:G,routeModel:"sales",permissionModel:"sales-order"})}),o("div",{className:"panel",children:[o("div",{className:"flex justify-between flex-wrap gap-4 px-4",children:[a("div",{className:"text-2xl font-semibold uppercase",children:"Sales Order"}),a("div",{className:"shrink-0",children:a("img",{src:te(e.image_data),alt:"Sales Order image",className:"w-20 ltr:ml-auto rtl:mr-auto"})})]}),a(oe,{data:Y}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(l,{title:"Header",leftObjects:d.leftObjects,rightObjects:d.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(l,{title:"Sales Order Information",leftObjects:c.leftObjects,rightObjects:c.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(be,{title:"Ordered Items",items:e.items,columns:X,total:e.sales_total}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(l,{title:"SO Line",leftObjects:u.leftObjects,rightObjects:u.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(l,{title:"Linked Availability",leftObjects:m.leftObjects,rightObjects:m.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(l,{title:"Address Information",leftObjects:v.leftObjects,rightObjects:v.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(H,{sectionTitle:"Terms And Conditions",data:[{label:"Terms and Conditions",value:e.terms_and_conditions}]}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(H,{sectionTitle:"Description ",data:[{label:"Description",value:e.description}]}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(l,{title:"Date information",leftObjects:[{label:"Created Date",value:Q(e.created_at)}],rightObjects:[{label:"Modified Date",value:Q(e.updated_at)}]}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(de,{modelId:t,modelName:"salesOrder"})]})]})};export{ye as default};
