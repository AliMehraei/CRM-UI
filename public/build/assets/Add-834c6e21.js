import{u as y,a as P,r as b,b as o,F as f,j as e,aN as x,l as u,X as w,Y as k,aO as Y,S as j,d as q,n as W,w as L,m as V,k as $,a0 as H,c as I,s as B,aP as F,e as G}from"./main-3000a6dc.js";/* empty css                  */import{G as v,A as U}from"./GenerateFields-7282bc65.js";import{F as N}from"./index-0aeaf758.js";import{T as X}from"./tippy-react.esm-52ac0aa1.js";import{S as h}from"./react-select.esm-2a6a39a3.js";import{F as z}from"./FileUploadComponent-37e5f074.js";import"./index-29603cbb.js";import"./ClearButtonComponent-21bbcf28.js";const g=i=>{const c=new Date(i),r=c.getFullYear(),n=String(c.getMonth()+1).padStart(2,"0"),m=String(c.getDate()).padStart(2,"0");return`${r}:${n}:${m}`},J=()=>{const i=y(),c=new P,r=(t="",a="success")=>{j.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,customClass:{container:"toast"}}).fire({icon:a,title:t,padding:"10px 20px"})},[n,m]=b.useState({web:[],nonWeb:[]}),[C,S]=b.useState({matched:[]}),[O,s]=b.useState(null),d=(t,a)=>{navigator.clipboard.writeText(t),s(a),r("Copied to clipboard!")},A=({suggestions:t})=>o(f,{children:[e("h3",{className:"text-xl",children:"Availability Suggestions :"}),o("table",{className:"min-w-full bg-white border border-gray-300",children:[e("thead",{children:o("tr",{children:[e("th",{className:"py-2 px-4 border-b",children:"Availability"}),e("th",{className:"py-2 px-4 border-b",children:"Availability Source"}),e("th",{className:"py-2 px-4 border-b",children:"Availability Cost"}),e("th",{className:"py-2 px-4 border-b",children:"Availability Created Date"}),e("th",{className:"py-2 px-4 border-b",children:"Actions"})]})}),o("tbody",{children:[t.web.map((a,l)=>o("tr",{className:l%2===0?"bg-gray-100":"",children:[e("td",{className:"py-2 px-4 border-b",children:a.availability_name}),e("td",{className:"py-2 px-4 border-b",children:a.availability_source}),o("td",{className:"py-2 px-4 border-b",children:[a.cost," ",a.currency]}),e("td",{className:"py-2 px-4 border-b",children:g(a.created_at)}),e("td",{className:"py-2 px-4 border-b",children:e("button",{className:"btn btn-sm",onClick:()=>d(a.availability_name,l),children:"Copy to Clipboard"})})]},l)),t.nonWeb.map((a,l)=>o("tr",{className:l%2===0?"bg-gray-100":"",children:[e("td",{className:"py-2 px-4 border-b",children:a.availability_name}),e("td",{className:"py-2 px-4 border-b",children:a.availability_source}),o("td",{className:"py-2 px-4 border-b",children:[a.cost," ",a.currency]}),e("td",{className:"py-2 px-4 border-b",children:g(a.created_at)})]},l))]})]})]}),D=({suggestions:t})=>o(f,{children:[e("h3",{className:"text-xl mt-4",children:"Excess Suggestions :"}),o("table",{className:"min-w-full bg-white border border-gray-300",children:[e("thead",{children:o("tr",{children:[e("th",{className:"py-2 px-4 border-b",children:"Excess Name"}),e("th",{className:"py-2 px-4 border-b",children:"Excess Source"}),e("th",{className:"py-2 px-4 border-b",children:"Excess No"}),e("th",{className:"py-2 px-4 border-b",children:"Excess Cost"}),e("th",{className:"py-2 px-4 border-b",children:"Excess Type"}),e("th",{className:"py-2 px-4 border-b",children:"Excess Quantity"}),e("th",{className:"py-2 px-4 border-b",children:"Excess Created Date"}),e("th",{className:"py-2 px-4 border-b",children:"Actions"})]})}),e("tbody",{children:t.matched.map((a,l)=>o("tr",{className:l%2===0?"bg-gray-100":"",children:[e("td",{className:"py-2 px-4 border-b",children:a.excess_name}),e("td",{className:"py-2 px-4 border-b",children:a.excess_source}),e("td",{className:"py-2 px-4 border-b",children:a.excess_no}),o("td",{className:"py-2 px-4 border-b",children:[a.cost," ",a.currency]}),e("td",{className:"py-2 px-4 border-b",children:a.excess_type}),e("td",{className:"py-2 px-4 border-b",children:a.quantity}),e("td",{className:"py-2 px-4 border-b",children:g(a.created_at)}),e("td",{className:"py-2 px-4 border-b",children:e("button",{className:"btn btn-sm",onClick:()=>d(a.excess_name,l),children:"Copy to Clipboard"})})]},l))})]})]}),p=(t,a)=>{i(x({[t]:a})),t==="product_id"&&(Q(a),R(a))},T=t=>{i(x({availability_id:t}))},E={"RFQ Line":{"Product Name":e(u,{defaultOptions:!1,isMulti:!1,id:"product_id",placeholder:"Type at least 2 characters to search...",loadOptions:w,onChange:({value:t})=>{p("product_id",t)},className:"flex-1",required:!0}),"Customer Part Id":e("input",{id:"customer_part_id",name:"customer_part_id",className:"form-input flex-1 ",onChange:t=>p(t.target.name,t.target.value)}),Quantity:e("input",{id:"quantity",name:"quantity",className:"form-input flex-1 ",onChange:t=>p(t.target.name,t.target.value),required:!0}),"Target Price":e("input",{id:"target_price",name:"target_price",onChange:t=>p(t.target.name,t.target.value),className:"form-input flex-1 "})},"":{"Alternative Products":e(u,{defaultOptions:!1,id:"alternative_products",name:"alternative_products",placeholder:"Type at least 2 characters to search...",loadOptions:w,onChange:t=>{p("alternative_products",t.map(a=>a.value))},isMulti:!0,className:"flex-1"}),Availability:e(u,{defaultOptions:!1,isMulti:!1,id:"availability",name:"availability_id",placeholder:"Type at least 2 characters to search...",loadOptions:k,onChange:({value:t})=>{p("availability_id",t)},className:"flex-1"}),Excess:e(u,{defaultOptions:!0,isMulti:!1,id:"excess_id",name:"excess_id",placeholder:"Type at least 2 characters to search...",loadOptions:Y,onChange:({value:t})=>{p("excess_id",t)},className:"flex-1"}),"Special Instructions":e("textarea",{id:"special_instructions",name:"special_instructions",rows:3,onChange:t=>p(t.target.name,t.target.value),className:"form-textarea flex-1"}),comment:e("textarea",{id:"comment",rows:3,name:"comment",className:"form-textarea flex-1",onChange:t=>p(t.target.name,t.target.value),placeholder:""})}},Q=async t=>{try{const a=await c.fetchSuggestedAvailability(t);if(a.status===200){const l=a.data.data,_=l.web?[l.web]:[],M=l.nonWeb?[l.nonWeb]:[];m({web:_,nonWeb:M})}}catch(a){console.error("Error fetching availability suggestions:",a)}},R=async t=>{try{const a=await c.fetchSuggestedExcess(t);if(a.status===200){const l=a.data.data,_=l.matched?[l.matched]:[];S({matched:_})}}catch(a){console.error("Error fetching excess suggestions:",a)}};return o(f,{children:[e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(v,{fields:E})}),e(A,{suggestions:n,onAvailabilitySelect:T}),e(D,{suggestions:C})]})},K=()=>{const i=y(),c=(n,m)=>{i(x({[n]:m}))};return e(f,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(v,{fields:{Development:{"Processed for VRFQ round 1":e(X,{content:"Please do not change the value",className:"red",children:e("input",{id:"processed_for_vrfq_round_1",type:"checkbox",name:"processed_for_vrfq_round_1",className:"form-checkbox",onChange:n=>c(n.target.name,n.target.checked)})}),"Processed for VRFQ round 2":e("label",{className:"flex items-center cursor-pointer",children:e("input",{id:"processed_for_vrfq_round_2",type:"checkbox",name:"processed_for_vrfq_round_2",className:"form-checkbox",onChange:n=>c(n.target.name,n.target.checked)})}),"Open Status Time":e(N,{name:"open_status_timestamp","data-enable-time":!0,options:{enableTime:!0,dateFormat:"Y-m-d H:i",position:"auto left"},onChange:(n,m)=>c("open_status_timestamp",m),className:"form-input flex-1"})}}})})})},Z=()=>{const i=y(),c=q(s=>s.rfqFormSlice),r=(s,d)=>{i(x({[s]:d}))};return e(f,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(v,{fields:{Header:{"Account Name":e(u,{defaultOptions:!0,required:!0,isMulti:!1,id:"account_id",name:"account_id",placeholder:"Type at least 2 characters to search...",loadOptions:W,onChange:({value:s})=>{r("account_id",s)},className:"flex-1"}),Contact:e(u,{defaultOptions:!0,required:!0,isMulti:!1,id:"contact",name:"contact_id",placeholder:"Type at least 2 characters to search...",loadOptions:L,onChange:({value:s})=>{r("contact_id",s)},className:"flex-1"}),"Customer RFQ No":e("input",{id:"customer_rfq_no",name:"customer_rfq_no",className:"form-input flex-1 ",onChange:s=>r(s.target.name,s.target.value)}),"Project Name / Application":e("input",{id:"project_name",name:"project_name",className:"form-input flex-1 ",onChange:s=>r(s.target.name,s.target.value)}),"RFQ Source":e(h,{name:"rfq_source",required:!0,options:[{value:"none",label:"-None-"},{value:"email",label:"Email"},{value:"telephone",label:"Telephone"},{value:"web_portal",label:"Web portal"},{value:"history",label:"History"}],onChange:({value:s})=>{r("rfq_source",s)},defaultValue:{value:"none",label:"-None-"},className:"flex-1"}),"RFQ Type":e(h,{name:"rfq_type",required:!0,options:[{value:"none",label:"-None-"},{value:"cost_saving",label:"Cost Saving"},{value:"shortage",label:"Shortage"},{value:"eol",label:"EOL"},{value:"proactive",label:"Proactive"},{value:"calculation",label:"Calculation"}],onChange:({value:s})=>{r("rfq_type",s)},defaultValue:{value:"none",label:"-None-"},className:"flex-1"}),Status:e(h,{name:"status",options:[{value:"none",label:"-None-"},{value:"open",label:"Open"},{value:"open_without_routing",label:"Open without routing"},{value:"quoted",label:"Quoted"},{value:"closed",label:"Closed"},{value:"in_review",label:"In review"}],onChange:({value:s})=>{r("status",s)},defaultValue:{value:"open",label:"Open"},className:"flex-1"}),"Date History":e(N,{name:"date_history",options:{dateFormat:"Y-m-d "},className:"form-input flex-1",placeholder:"YYYY-MM-DD",onChange:(s,d)=>r("date_history",d)}),"Exchange Rate":e("input",{id:"exchangeRate",type:"text",value:"1",placeholder:"Readonly input hereâ€¦",className:"flex-1 form-input disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",disabled:!0}),"Portal BOM id":e("input",{id:"portal_bom_id",name:"portal_bom_id",onChange:s=>r(s.target.name,s.target.value),className:"form-input flex-1 "})},"":{"RFQ Owner":e(u,{defaultOptions:!0,isMulti:!1,id:"owner_id",placeholder:"Type at least 2 characters to search...",loadOptions:V,onChange:({value:s})=>{r("owner_id",s)},className:"flex-1"}),"Deal Stage":e(h,{name:"deal_stage",options:[{value:"none",label:"-None-"},{value:"draft",label:"Draft"},{value:"no_feedback",label:"No Feedback"},{value:"negotiation_price",label:"Negotiation Price"},{value:"negotiation_conditions",label:"Negotiation Conditions"},{value:"open",label:"Open"},{value:"lost",label:"Lost"},{value:"won",label:"Won"}],onChange:({value:s})=>{r("deal_stage",s)},className:"flex-1"}),"Customer RFQ File":e(z,{id:"customer_rfq_file",modelName:"rfq",formState:c,formAttribute:"customer_rfq_file",updateFormData:x}),"RFQ Dead Line":e(N,{name:"rfq_dead_line",options:{dateFormat:"Y-m-d "},className:"form-input flex-1",placeholder:"YYYY-MM-DD",onChange:(s,d)=>r("rfq_dead_line",d)}),Currency:e(h,{name:"currency",id:"currency",options:$,className:"flex-1",onChange:({value:s})=>{r("currency",s)}}),"Vendor RFQs Line":e(u,{defaultOptions:!0,id:"vendor_rfqs_line",name:"vendor_rfqs_line",placeholder:"Type at least 2 characters to search...",loadOptions:H,onChange:s=>{r("vendor_rfqs_line",s.map(d=>d.value))},isMulti:!0,className:"flex-1"})}}})})})},ee=()=>o("div",{className:"mt-8 px-4",children:[e(Z,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(J,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(K,{})]}),de=()=>{const{hasPermission:i}=I(),c=q(n=>n.rfqFormSlice),r=y();return b.useEffect(()=>{r(B("RFQ Add"))}),b.useEffect(()=>{r(F())},[]),i("create-rfq")?o("div",{className:"px-4",children:[e(U,{formState:c,resetForm:F}),e("div",{className:"flex xl:flex-row flex-col gap-2.5",children:e("div",{className:"panel px-0 flex-1 py-6 ltr:xl:mr-6 rtl:xl:ml-6",children:e(ee,{})})})]}):e(G,{})};export{de as default};
