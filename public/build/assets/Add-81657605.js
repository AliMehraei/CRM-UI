import{u as _,d as T,a as M,b as e,F,am as y,r as d,j as o,c as I,s as Q,an as P,g as B}from"./main-59cbf5a2.js";import{A as D}from"./react-select-async.esm-96f15c35.js";import{G as E,A as V}from"./GenerateFields-f061e9aa.js";import{S as x}from"./react-select.esm-c741d15b.js";import{s as Y,d as j,c as U,b as q,q as W,f as H,e as G,z as $,o as z,m as J,x as K,l as X,i as Z,r as ee,j as ae,H as le}from"./CommonFunctions-28e44b71.js";import{F as w}from"./index-e0117331.js";/* empty css                  */import"./Select-aecb2a80.esm-c01a41cb.js";import"./sweetalert2.all-dc82e6bd.js";const te=()=>{const i=_();new T;const r=M(t=>t.taskForm),n=(t,h)=>{i(y({[t]:h}))},C={"Task Information":{"Task Owner":e(D,{isMulti:!1,id:"owner_id",placeholder:"Type at least 2 characters to search...",name:"owner_id",loadOptions:Y,onChange:({value:t})=>{n("owner_id",t)},className:"flex-1",required:!0}),Subject:e("input",{id:"subject",name:"subject",className:"form-input flex-1 ",onChange:t=>n(t.target.name,t.target.value),required:!0}),"Due Date":e(w,{name:"due_date",options:{dateFormat:"Y-m-d "},className:"form-input flex-1",placeholder:"YYYY-MM-DD",onChange:(t,h)=>n("due_date",h)}),Status:e(x,{options:[{value:"-None-",label:"-None-"},{value:"Abgeschlossen",label:"Abgeschlossen"},{value:"0.0 Cold task / unqualified (CLU)",label:"0.0 Cold task / unqualified (CLU)"},{value:"1.0 Cold task qualified (CLQ)",label:"1.0 Cold task qualified (CLQ)"},{value:"2.0 First contact made (FCM)",label:"2.0 First contact made (FCM)"},{value:"3.0 warm task qualified (WLQ)",label:"3.0 warm task qualified (WLQ)"},{value:"4.0 Hot task (HLQ)",label:"4.0 Hot task (HLQ)"},{value:"Close Task / Lost Task",label:"Close Task / Lost Task"}],name:"status",id:"status",onChange:({value:t})=>{n("status",t)},className:"flex-1"}),Priority:e(x,{options:[{value:"-None-",label:"-None-"},{value:"Account or Contact exist already",label:"Account or Contact exist already"},{value:"Wrong Branch",label:"Wrong Branch"},{value:"Wrong Department",label:"Wrong Department"},{value:"Does Not Exist Anymore",label:"Does Not Exist Anymore"},{value:"Bankruptcy",label:"Bankruptcy"},{value:"Hoch",label:"Hoch"},{value:"Other",label:"Other"}],name:"priority",id:"priority",onChange:({value:t})=>{n("priority",t)},className:"flex-1"})},"Description Information":{Description:e("textarea",{id:"description",rows:6,name:"description",className:"form-textarea flex-1",placeholder:"",defaultValue:r.description,onChange:t=>n(t.target.name,t.target.value)})}};return e(F,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(E,{fields:C})})})},se=()=>{const i=_();new T;const r=M(a=>a.taskForm),[n,p]=d.useState(!1),[k,C]=d.useState(new Date),[t,h]=d.useState(new Date),[S,v]=d.useState(""),[m,A]=d.useState(""),[b,g]=d.useState({Monday:!1,Tuesday:!1,Wednesday:!1,Thursday:!1,Friday:!1,Saturday:!1,Sunday:!1}),l=[{value:"email",label:"Email"},{value:"popup",label:"PopUp"},{value:"both",label:"Both"}],c=[{value:"none",label:"None"},{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},r.due_date?{value:"specific",label:"Specific days before due date"}:null].filter(Boolean),u=(a,s)=>{a==="reminder"&&p(s),i(y({[a]:s}))},L=a=>{g(s=>{const f={...s,[a]:!s[a]};return i(y({selected_days:f})),f})},O=()=>{g(a=>{const s={};for(const f in a)s[f]=!0;return i(y({selected_days:s})),s})},R=()=>{g(a=>{const s={};for(const f in a)s[f]=!1;return i(y({selected_days:s})),s})},N=r.due_date?Math.floor((new Date(r.due_date)-new Date)/(1e3*60*60*24)):0;return o("div",{className:"p-6 border rounded-md shadow-sm bg-white",children:[e("h2",{className:"text-xl font-semibold mb-4",children:"Reminder Settings"}),o("div",{className:"flex items-center space-x-4 mb-6",children:[e("label",{className:"text-lg",children:"Enable Reminder:"}),e("input",{id:"reminder",type:"checkbox",name:"reminder",className:"form-checkbox h-5 w-5 text-blue-600",onChange:a=>u(a.target.name,a.target.checked)})]}),n&&o("div",{children:[o("div",{className:"flex items-center space-x-4 my-4",children:[e("label",{children:"On:"}),e(w,{className:"p-2 border rounded-md form-input flex-1","data-enable-time":!1,placeholder:"YYYY-MM-DD",value:k,onChange:(a,s)=>u("reminder_on_date",s),options:{dateFormat:"Y-m-d "}}),e("label",{children:"At:"}),e(w,{className:"p-2 border rounded-md form-input flex-1","data-enable-time":!0,"data-no-calendar":!0,value:t,onChange:a=>{h(a[0]),u("reminder_on_time",a[0])}}),e("label",{children:"Notify Type:"}),e(x,{id:"reminder_type",name:"reminder_type",onChange:({value:a})=>{u("reminder_type",a)},className:"flex-1",options:l})]}),o("div",{className:"flex items-center space-x-4 mb-4",children:[e("label",{className:"w-24",children:"Repeat:"}),e(x,{value:c.find(a=>a.value===m),options:c,className:"flex-1",name:"repeat_options",onChange:({value:a})=>{u("repeat_options",a),A(a)}})]}),m==="specific"&&r.due_date&&e(F,{children:o("div",{className:"flex items-center space-x-4 mb-4",children:[e("label",{className:"w-24",children:"Days before due:"}),e("input",{type:"number",min:"1",max:N,className:"p-2 border rounded-md form-input flex-1",value:S,onChange:a=>{const s=a.target.value;s>=1&&s<=N&&(v(s),u("days_before_due",s))}}),r.due_date&&o("button",{type:"button",className:"text-blue-500",onClick:()=>{v(N.toString()),u("days_before_due",N.toString())},children:["Max: ",N]})]})}),m==="weekly"&&o("div",{className:"mb-4",children:[e("label",{className:"block mb-2 w-24",children:"Select Days:"}),o("div",{className:"flex space-x-4",children:[o("div",{children:[e("button",{type:"button",onClick:O,className:"bg-blue-500 text-white px-3 py-1 rounded-md mr-2",children:"Check All"}),e("button",{type:"button",onClick:R,className:"bg-red-500 text-white px-3 py-1 rounded-md",children:"Uncheck All"})]}),Object.keys(b).map(a=>o("div",{className:"flex items-center space-x-2",children:[e("input",{type:"checkbox",id:a,checked:b[a],onChange:()=>L(a),className:"form-checkbox h-5 w-5 text-blue-600"}),e("label",{htmlFor:a,children:a})]},a))]})]})]})]})},oe=()=>{const i=_();new T;const[r,n]=d.useState("App\\Models\\Contact"),[p,k]=d.useState("App\\Models\\Account"),[C,t]=d.useState(null),[h,S]=d.useState(null),v=M(l=>l.taskForm),m=(l,c)=>{i(y({[l]:c}))},A=[{value:"App\\Models\\Lead",label:"Lead"},{value:"App\\Models\\Contact",label:"Contact"}],b=[{value:"App\\Models\\Account",label:"Account",api:q},{value:"App\\Models\\Vendor",label:"Vendor",api:W},{value:"App\\Models\\Quote",label:"Quote",api:H},{value:"App\\Models\\Rfq",label:"Rfq",api:G},{value:"App\\Models\\Excess",label:"Excess",api:$},{value:"App\\Models\\Availability",label:"Availability",api:z},{value:"App\\Models\\Product",label:"Product",api:J},{value:"App\\Models\\Manufacturer",label:"Manufacturer",api:K},{value:"App\\Models\\Deal",label:"Deals",api:X},{value:"App\\Models\\SalesOrder",label:"Sales Order",api:Z},{value:"App\\Models\\PurchaseOrder",label:"Purchase Order",api:ee},{value:"App\\Models\\Invoice",label:"Invoice",api:ae},{value:"App\\Models\\VendorRfq",label:"Vendor Rfq",api:le}],g=l=>{const c=b.find(u=>u.value===p)??{value:"App\\Models\\Account",label:"Account",api:q};return console.log("===================================="),console.log(c.api),console.log("===================================="),c.api.call(null,l)};return e(F,{children:o("div",{className:"p-6 border rounded-md",children:[o("div",{className:"flex items-center space-x-4 mb-5",children:[e("label",{className:"font-semibold",children:"Lead | Contact:"}),e(x,{id:"userable_type",name:"userable_type",defaultValue:A.find(l=>l.value==v.userable_type),onChange:({value:l})=>{n(l),m("userable_type",l),t(null)},className:"flex-1",options:A}),e(D,{isMulti:!1,id:"userable_id",placeholder:"Type at least 2 characters to search...",name:"userable_id",value:C,menuPortalTarget:document.body,menuPlacement:"top",loadOptions:r==="App\\Models\\Lead"?j:U,onChange:({value:l,label:c})=>{t({value:l,label:c}),m("userable_id",l)},className:"flex-1",required:!0},r)]}),o("div",{className:"flex items-center space-x-4",children:[e("label",{className:"font-semibold",children:"Select Module :"}),e(x,{id:"moduleable_type",name:"moduleable_type",menuPortalTarget:document.body,menuPlacement:"top",defaultValue:b.find(l=>l.value==v.moduleable_type),onChange:({value:l})=>{k(l),m("moduleable_type",l),S(null)},className:"flex-1",options:b}),e(D,{isMulti:!1,id:"moduleable_id",menuPortalTarget:document.body,menuPlacement:"top",placeholder:"Type at least 2 characters to search...",name:"moduleable_id",value:h,loadOptions:l=>g(l),onChange:({value:l,label:c})=>{S({value:l,label:c}),m("moduleable_id",l)},className:"flex-1",required:!0},p)]})]})})},ne=()=>o("div",{className:"mt-8 px-4",children:[e(te,{},"leadInfo"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(se,{},"Reminder"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(oe,{},"type"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"})]}),fe=()=>{const{hasPermission:i}=I(),r=M(p=>p.taskForm),n=_();return d.useEffect(()=>{n(Q("Task Add"))}),d.useEffect(()=>{n(P())},[]),i("create-task")?o("div",{className:"px-4",children:[e(V,{formState:r,resetForm:P}),e("div",{className:"flex xl:flex-row flex-col gap-2.5",children:e("div",{className:"panel px-0 flex-1 py-6 ltr:xl:mr-6 rtl:xl:ml-6 overflow-hidden",children:e(ne,{})})})]}):e(B,{})};export{fe as default};
