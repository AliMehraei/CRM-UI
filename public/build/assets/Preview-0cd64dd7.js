import{c as K,u as X,r as l,h as Y,d as ee,s as ae,ax as te,a$ as A,j as a,e as M,b as s,f as le,i as B,a as ie}from"./main-d43b918e.js";import{I as se}from"./InfoListComponent-477c8835.js";import{A as re}from"./ActionButtonsPreview-ba9703c7.js";import{I as d}from"./InformationSectionPreview-2b5daa63.js";import{M as q}from"./MultipleLineSectionPreview-d29f72b3.js";import{T as Q}from"./TableSectionPreview-49d99044.js";import{A as oe}from"./AttachmentSection-46c244f1.js";import{V as ne}from"./CommonIcons-e725f090.js";import{E as ce}from"./ExtraEmailLogDataSectionPreview-3965f967.js";const ye=()=>{var f,g,_,y,$,w,S,j,x,O,k,I,N,D;const{hasPermission:b}=K(),o=X(),[n,R]=l.useState(!0),r=Y().id,F=new ie,e=ee(t=>t.invoiceForm),[V,u]=l.useState(!1),[c,z]=l.useState(null);l.useEffect(()=>{o(ae("Invoice Preview"))});const H=()=>{window.print()},U=async()=>{const t=await F.fetchSingleInvoice(r);if(t.status!=200)return;const i=t.data.data.invoice;o(A(i))};l.useEffect(()=>{U().then(()=>{R(!1)})},[r]),l.useEffect(()=>{e.invoice_file&&te("invoice","invoice_file",e.invoice_file).then(t=>{o(A({invoice_file_preview:t}))})},[]);const m={leftObjects:[{label:"Due Date",value:`${e.due_date??""}`},{label:"Sales Commission",value:e.sales_commission},{label:"Exchange Rate",value:`${e.exchange_rate}`},{label:"ZohoBooksID",value:`${e.zoho_books_id}`}],rightObjects:[{label:"Deal Stage",value:`${e.deal_stage??""} `},{label:"Excise Duty",value:`${e.excise_duty}`},{label:"Invoice Stage",value:`${e.invoice_stage}`},{label:"Status",value:`${e.status}`},{label:"Currency",value:`${e.currency}`}]};`${e.invoice_valid}`,`${e.proactive_offer}`,`${e.rating}`,`${(f=e.product)==null?void 0:f.product_name}`,`${e.customer_part_id}`,`${e.quantity}`,`${e.list_price}`,`${e.lead_time}`,`${(g=e.vendor)==null?void 0:g.vendor_name}`,`${e.availability_no}`,`${e.availability_date}`,`${(_=e.availability)==null?void 0:_.availability_name}`,`${e.cost}`,`${e.lt_vendor}`,`${e.spq}`,`${e.quantity_in_stock}`;const v={leftObjects:[{label:"Billing Street",value:`${e.billing_street}`},{label:"Billing City",value:`${e.billing_city}`},{label:"Billing State",value:`${e.billing_state}`},{label:"Billing Code",value:`${e.billing_code}`},{label:"Billing Country",value:`${e.billing_country}`}],rightObjects:[{label:"Shipping Street",value:`${e.shipping_street}`},{label:"Shipping City",value:`${e.shipping_city}`},{label:"Shipping State",value:`${e.shipping_state}`},{label:"Shipping Code",value:`${e.shipping_code}`},{label:"Shipping Country",value:`${e.shipping_country}`}]},W=[{key:"id",label:"S.NO"},{key:"product_name",label:"Product Name",model:"product"},{key:"quantity",label:"Quantity"},{key:"list_price",label:"List Price"},{key:"amount",label:"Amount"},{key:"discount",label:"Discount"},{key:"tax",label:"Tax"},{key:"total",label:"Total"}],Z=[{label:"Account Name",value:`${((y=e.account)==null?void 0:y.account_name)??""} `},{label:"Contact Name",value:`${(($=e.owner)==null?void 0:$.first_name)??""} ${((w=e.owner)==null?void 0:w.last_name)??""}`},{label:"Sales Order",value:`${((S=e.sales_order)==null?void 0:S.subject)??""} ${((j=e.contact)==null?void 0:j.last_name)??""} `},{label:"Purchase Order",value:`${e.purchase_order??""} `},{label:"Subject",value:`${e.subject??""} `},{label:"Invoice Date",value:`${e.invoice_date??""} `},{label:"Invoice Owner",value:`${((x=e.owner)==null?void 0:x.first_name)??""} ${((O=e.owner)==null?void 0:O.last_name)??""}`},{label:"Created By",value:`${((k=e.creator)==null?void 0:k.first_name)??""} ${((I=e.creator)==null?void 0:I.last_name)??""}`},{label:"Modified By",value:`${((N=e.modifier)==null?void 0:N.first_name)??""} ${((D=e.modifier)==null?void 0:D.last_name)??""}`}];let p={leftObjects:[],rightObjects:[]};const G=t=>{var i,C,P,L,T,E;p={leftObjects:[{label:"Sender Name",value:`${(t.sender_name??"").substring(0,20)}${t.sender_name&&t.sender_name.length>15?"...":""}`},{label:"Is Open",value:`${t.is_open??""}`},{label:"Creator",value:`${((i=t.creator)==null?void 0:i.first_name)??""} ${((C=t.creator)==null?void 0:C.last_name)??""}`},{label:"Modifier",value:`${((P=t.modifier)==null?void 0:P.first_name)??""} ${((L=t.modifier)==null?void 0:L.last_name)??""}`},{label:"Mail Status",value:`${t.mail_status??""}`}],rightObjects:[{label:"Owner",value:`${((T=t.owner)==null?void 0:T.first_name)??""} ${((E=t.owner)==null?void 0:E.last_name)??""}`},{label:"Sent At",value:`${t.sent_at??""}`},{label:"Tracking Uuid",value:`${t.tracking_uuid??""}`},{label:"Type",value:`${t.type??""}`},{label:"Opened At",value:`${t.opened_at??""}`}]},z(p),u(!0)},h=()=>{u(!1)},J=[{label:"Subject",key:"subject"},{label:"Reciver Mail",key:"receiver_mail"},{label:"Sender Mail",key:"sender_email"},{label:"Sender Type",key:"sender_type"},{label:"Status",key:"status"},{label:"Created time",key:"created_at",format:t=>new Date(t).toISOString().split("T")[0]},{label:"Action",key:"action",render:t=>a("div",{onClick:()=>G(t),className:"flex hover:text-info",children:a(ne,{})})}];return n?a(M,{}):!b("read-invoice")||n?a(M,{}):s("div",{children:[a("div",{className:"flex items-center lg:justify-end justify-center flex-wrap gap-4 mb-6",children:a(re,{loading:n,hasPermission:b,modelId:r,exportTable:H,routeModel:"invoice",permissionModel:"invoice",hasDownloadPdf:!0})}),s("div",{className:"panel",children:[s("div",{className:"flex justify-between flex-wrap gap-4 px-4",children:[a("div",{className:"text-2xl font-semibold uppercase",children:"Invoice"}),a("div",{className:"shrink-0",children:a("img",{src:le(e.image_data),alt:"Invoice image",className:"w-20 ltr:ml-auto rtl:mr-auto"})})]}),a(se,{data:Z}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(d,{title:"Header",leftObjects:m.leftObjects,rightObjects:m.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(d,{title:"Address Information",leftObjects:v.leftObjects,rightObjects:v.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(Q,{title:"Invoice Items",items:e.items,columns:W,total:e.total,subtotal:e.subtotal,discount:e.discount,tax:e.tax,adjustment:e.adjustment}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(q,{sectionTitle:"Terms And Conditions",data:[{label:"Terms and Conditions",value:e.terms_and_conditions}]}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(q,{sectionTitle:"Description ",data:[{label:"Description",value:e.description}]}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(d,{title:"Date information",leftObjects:[{label:"Created Date",value:B(e.created_at)}],rightObjects:[{label:"Modified Date",value:B(e.updated_at)}]}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(oe,{modelId:r,modelName:"contact"}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),s("div",{children:[a(Q,{title:"Email Logs",items:e.emaillogs,columns:J}),V&&c&&s("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 p-8 bg-white shadow-md rounded z-50 border  shadow-gray-300",children:[a("div",{className:"absolute top-2 right-2 cursor-pointer",onClick:h,children:a("svg",{className:"w-6 h-6 text-gray-600 hover:text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),a(ce,{title:"Email Log",leftObjects:c.leftObjects,rightObjects:c.rightObjects}),a("div",{className:"mt-auto px-2 py-3 sm:flex sm:flex-row-reverse sm:px-3 my-5",children:a("button",{className:"fixed bottom-5 w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",onClick:h,children:"Close"})})]})]})]})]})};export{ye as default};
