import{u as W,d as _,c as G,a as P,r as s,j as e,e as J,F as I,S as R,b as r,ac as K,s as $,h as X,ad as L,f as ee,N as te,q as se}from"./main-2e04d675.js";import{C as ae}from"./CommonIcons-949d99ad.js";import{s as z,Q as re}from"./sortBy-bc2a66f9.js";import"./_baseIsEqual-25cb986b.js";const oe=({tableColumns:d,frontRoute:h})=>{W(),_(o=>o.filters),G();const E=new P,y=_(o=>o.themeConfig.theme)==="dark",[x,p]=s.useState([]),[v,B]=s.useState([]),[l,C]=s.useState(1),[m,u]=s.useState(!0),g=[50,100],[t,a]=s.useState(g[0]),[n,f]=s.useState(z(x,"id")),[b,w]=s.useState(n),[i,H]=s.useState([]),[U,Y]=s.useState(0),[N,q]=s.useState({columnAccessor:"id",direction:"asc"}),M=(o="",c="success")=>{R.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,customClass:{container:"toast"}}).fire({icon:c,title:o,padding:"10px 20px"})},A=async(o=1,c=g[0],S=[],O={})=>{u(!0);const{columnAccessor:Q="",direction:Z=""}=O;try{await E[h]({page:o,pageSize:c,sortField:Q,sortDirection:Z}).then(k=>{var j,T,D,F;p((T=(j=k.data)==null?void 0:j.data)==null?void 0:T.data),Y((F=(D=k.data)==null?void 0:D.data)==null?void 0:F.total),u(!1)}).catch(k=>{console.error("Error fetching data: ",k),u(!1),M("Error fetching data.","error")})}catch(k){M("Error fetching data.","error"),console.error("Error fetching data: ",k),u(!1)}},V=o=>{const{columnAccessor:c,direction:S="asc"}=o;q({columnAccessor:c,direction:S}),C(1),A(l,t,v,{columnAccessor:c,direction:S})};return s.useEffect(()=>{const o=z(x,N.columnAccessor),c=N.direction!=="asc"?o.reverse():o;f(c)},[x,N]),s.useEffect(()=>{C(1)},[t]),s.useEffect(()=>{w([...n.slice(0,t)])},[l,t,n]),s.useEffect(()=>{A(l,t,v,N)},[l,t,N]),m?e(J,{}):e(I,{children:e("div",{className:"panel px-0 border-white-light dark:border-[#1b2e4b]",children:e("div",{className:"bom-excess-table",children:e("div",{className:"grid grid-cols-1 gap-6 mb-6",children:e("div",{className:"panel col-span-12",children:e("div",{className:"datatables pagination-padding",children:m?e("div",{className:"flex justify-center",children:e("span",{className:"animate-spin border-4 my-4 border-success border-l-transparent rounded-full w-12 h-12 inline-block align-middle m-auto mb-10"})}):e(re,{className:`${y} whitespace-nowrap table-hover`,records:b,columns:d,highlightOnHover:!0,totalRecords:U,recordsPerPage:t,page:l,onPageChange:C,recordsPerPageOptions:g,onRecordsPerPageChange:a,sortStatus:N,onSortStatusChange:V,selectedRecords:i,onSelectedRecordsChange:H,paginationText:({from:o,to:c,totalRecords:S})=>`Showing ${o} to ${c} of ${S} entries`})})})})})})})},ne=()=>{const[d,h]=s.useState([]),[E,y]=s.useState(1),[x,p]=s.useState(!0),v=new P,[B,l]=s.useState(""),C=(t=null)=>{R.fire({icon:"warning",title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonText:"Delete",padding:"2em",customClass:"sweet-alerts"}).then(a=>{a.value&&(t?(u(t),h([])):((d||[]).map(b=>b.id).forEach(b=>u(b)),h([]),y(1)),R.fire({title:"Deleted!",text:"Row has been deleted.",icon:"success",customClass:"sweet-alerts"}))})},m=(t="",a="success")=>{R.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,customClass:{container:"toast"}}).fire({icon:a,title:t,padding:"10px 20px"})},u=async t=>{try{p(!0),K("deleteSingleBomItem").call(v,t).then(a=>{const n=a.data;n.status?m("Successful deleting the Bom Item: "+n.message,"success"):(m("Error deleting the Bom Item: "+n.message,"error"),console.error("Error deleting the Bom Item : ",n.message))}),p(!1)}catch(a){m("Error making delete request","error"),console.error("Error making delete request",a),p(!1)}},g=[{accessor:"id",sortable:!0,render:({id:t})=>e("div",{className:"font-semibold",children:t})},{accessor:"title",sortable:!0,render:({title:t})=>e("div",{className:"font-semibold",children:t})},{accessor:"status",title:"Status",sortable:!0,render:({status:t})=>e("div",{className:"font-semibold",children:`${t}`})},{accessor:"created_at",title:"Created At",sortable:!0,render:({created_at:t})=>e("div",{className:"font-semibold",children:t})},{accessor:"action",title:"Actions",sortable:!1,textAlignment:"center",render:({id:t,status:a})=>e(I,{children:r("div",{className:"flex gap-4 items-center w-max mx-auto",children:[["new","header_selected"].includes(a)&&r("a",{href:B+"/bom/confirmation/"+t,className:"bg-white p-2 rounded-md text-primary-500 border border-primary-500 hover:text-white hover:bg-sky-600 default-transition pulse-primary flex items-center justify-center",children:[e("span",{className:"text-sm",children:"Go to header selection page"}),e("svg",{className:"w-5 h-5 ml-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"})})]}),["pre_processing","pre_processed_with_failures"].includes(a)&&r("a",{href:"#",className:"bg-white p-2 rounded-md text-primary-500 border border-primary-500 hover:text-white hover:bg-sky-600 default-transition pulse-primary flex items-center justify-center",children:[e("span",{className:"text-sm",children:"Go to the pre-process page"}),e("svg",{className:"w-5 h-5 ml-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"})})]}),["processed_successfully","processed_with_failures"].includes(a)&&e("a",{href:"#",className:"bg-white p-2 rounded-md text-primary-500 border border-primary-500 hover:text-white hover:bg-sky-600 default-transition pulse-primary",children:r("svg",{className:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",children:[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),["processed_successfully","processed_with_failures","processing"].includes(a)&&r("button",{type:"button",className:"btn btn-danger gap-2",onClick:()=>C(),children:[r("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",children:[e("path",{d:"M20.5001 6H3.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),e("path",{d:"M18.8334 8.5L18.3735 15.3991C18.1965 18.054 18.108 19.3815 17.243 20.1907C16.378 21 15.0476 21 12.3868 21H11.6134C8.9526 21 7.6222 21 6.75719 20.1907C5.89218 19.3815 5.80368 18.054 5.62669 15.3991L5.16675 8.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),e("path",{opacity:"0.5",d:"M9.5 11L10 16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),e("path",{opacity:"0.5",d:"M14.5 11L14 16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),e("path",{opacity:"0.5",d:"M6.5 6C6.55588 6 6.58382 6 6.60915 5.99936C7.43259 5.97849 8.15902 5.45491 8.43922 4.68032C8.44784 4.65649 8.45667 4.62999 8.47434 4.57697L8.57143 4.28571C8.65431 4.03708 8.69575 3.91276 8.75071 3.8072C8.97001 3.38607 9.37574 3.09364 9.84461 3.01877C9.96213 3 10.0932 3 10.3553 3H13.6447C13.9068 3 14.0379 3 14.1554 3.01877C14.6243 3.09364 15.03 3.38607 15.2493 3.8072C15.3043 3.91276 15.3457 4.03708 15.4286 4.28571L15.5257 4.57697C15.5433 4.62992 15.5522 4.65651 15.5608 4.68032C15.841 5.45491 16.5674 5.97849 17.3909 5.99936C17.4162 6 17.4441 6 17.5 6",stroke:"currentColor",strokeWidth:"1.5"})]}),"Delete"]})]})})}];return s.useEffect(()=>{const t=window.location.origin;l(t)},[]),e("div",{className:"pt-5 flex-1",children:e("div",{className:"grid  gap-6 mb-6",children:e("div",{className:"panel h-full xl:col-span-2",children:r("div",{className:"relative",children:[e("h5",{className:"font-semibold text-lg",children:"List bom"}),e("div",{className:"bg-white dark:bg-black rounded-lg",children:e(oe,{tableColumns:g,frontRoute:"bomItemList"})})]})})})})},me=()=>{const d=W();G();const[h,E]=s.useState(""),[y,x]=s.useState(""),[p,v]=s.useState(""),[B,l]=s.useState("");s.useState([]);const[C,m]=s.useState(""),[u,g]=s.useState(!0),t=_(w=>w.contactForm);s.useEffect(()=>{d($(h))},[d]);const a=new P,f=X().id,b=async()=>{const w=await a.fetchSingleContact(f);if(w.status!=200)return;const i=w.data.data.contact;d(se(i))};return s.useEffect(()=>{const i=window.location.pathname.split("/");E(L(i[1])+" - File Upload"),x(i[1]),v("Add Your "+L(i[1])+" List"),l("Your "+L(i[1])+" List"),m("You don't have any"+L(i[1])+" List"),d($(L(i[1])+" - File Upload"))},[]),s.useEffect(()=>{b().then(()=>{g(!1)})},[f]),e(I,{children:r("div",{className:"panel px-0 border-white-light dark:border-[#1b2e4b]",children:[r("div",{className:"flex justify-end flex-wrap gap-4 px-4",children:[e("div",{className:"flex",children:r("div",{children:[r("div",{className:"text-sm font-semibold mt-5",children:[t.first_name," ",t.last_name]}),e("div",{className:"text-s font-semibold ",children:t.email}),e("div",{className:"text-s font-semibold ",children:t.phone})]})}),r("div",{className:"shrink-0",children:[e("img",{src:ee(t.image_data),alt:"Contact image",className:"w-20 ltr:ml-auto rtl:mr-auto"}),e("a",{className:"text-sm font-semibold mt-5  text-primary ",target:"_blank",href:`/contact/preview/${f}`,children:"View Contact"})]})]}),e("hr",{className:"border-white-light dark:border-[#849bbc] my-6"}),r("div",{className:"px-4 sm:px-6 lg:px-8",children:[e("section",{className:"border-b border-gray-200 pb-4",children:r("div",{className:"sm:flex sm:items-center sm:justify-between",children:[e("h3",{className:"title-1",children:e("b",{children:h})}),e("div",{className:"mt-3 sm:mt-0 sm:ml-4",id:"bom-file-upload-tour",children:r(te,{to:`/${y}/import/${f}`,className:"flex btn btn-primary pulse-primary",children:[e(ae,{}),p]})})]})}),e(ne,{})]})]})})};export{me as default};
