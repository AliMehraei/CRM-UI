import{c as R,u as T,r as t,h as E,d as B,s as q,X as k,j as a,e as M,b as c,f as V,i as j,ba as W,a as H}from"./main-016d45e2.js";import{A as Q,I as x}from"./InformationSectionPreview-fbbe7c8f.js";import{M as U}from"./MultipleLineSectionPreview-7d84c36d.js";import"./CommonIcons-8b1a7016.js";const Y=()=>{var p,m,v,f,h,y,A,_,g;const{hasPermission:d}=R(),b=T(),[r,w]=t.useState(!0),[D,C]=t.useState(""),[o,F]=t.useState({}),[i,S]=t.useState({}),n=E().id,O=new H,e=B(l=>l.callForm);t.useEffect(()=>{b(q("Call Preview"))});const P=()=>{window.print()},N=async()=>{const l=await O.fetchSingleCall(n);if(l.status!=200)return;const s=l.data.data.call;b(W(s))},$=[{value:"App\\Models\\Lead",label:"Lead"},{value:"App\\Models\\Contact",label:"Contact"}],I=[{value:"App\\Models\\Account",label:"Account",labelField:"account_name"},{value:"App\\Models\\Vendor",label:"Vendor",labelField:"vendor_name"},{value:"App\\Models\\Quote",label:"Quote",labelField:"subject"},{value:"App\\Models\\Rfq",label:"Rfq",labelField:"rfq_name"},{value:"App\\Models\\Excess",label:"Excess",labelField:"excess_name"},{value:"App\\Models\\Availability",label:"Availability",labelField:"availability_name"},{value:"App\\Models\\Product",label:"Product",labelField:"product_name"},{value:"App\\Models\\Manufacturer",label:"Manufacturer",labelField:"name"},{value:"App\\Models\\Deal",label:"Deals",labelField:"deal_name"},{value:"App\\Models\\SalesOrder",label:"Sales Order",labelField:"subject"},{value:"App\\Models\\PurchaseOrder",label:"Purchase Order",labelField:"subject"},{value:"App\\Models\\Invoice",label:"Invoice",labelField:"subject"},{value:"App\\Models\\VendorRfq",label:"Vendor Rfq",labelField:"vendor_rfq_name"}];t.useEffect(()=>{N().then(()=>{w(!1)})},[n]),t.useEffect(()=>{const l=I.find(s=>s.value===e.relatable_type);F(l),e.relatable&&C(e.relatable[l==null?void 0:l.labelField]),S($.find(s=>s.value===e.callable_type))},[e.relatable_type]);const L=[{value:"-None-",label:"-None-"},{value:"Account or Contact exist already",label:"Account or Contact exist already"},{value:"Wrong Branch",label:"Wrong Branch"},{value:"Wrong Department",label:"Wrong Department"},{value:"Does Not Exist Anymore",label:"Does Not Exist Anymore"},{value:"Bankruptcy",label:"Bankruptcy"},{value:"Hoch",label:"Hoch"},{value:"Other",label:"Other"}],u={leftObjects:[{label:"Call Owner",value:`${(p=e.owner)==null?void 0:p.first_name} ${(m=e.owner)==null?void 0:m.last_name}`},{label:"Subject",value:`${e.subject}`},{label:"Due Date",value:e.due_date},{label:"Call To",value:(i==null?void 0:i.label)+`: ${((v=e.callable)==null?void 0:v.name)??((f=e.callable)==null?void 0:f.first_name)+" "+((h=e.callable)==null?void 0:h.last_name)} `},{label:"Related To",value:(o==null?void 0:o.label)+": "+D},{label:"Call Type",value:`${e.type}`}],rightObjects:[{label:"Priority",value:k(e.priority,L)},{label:"Repeat",value:e.repeat},{label:"Created By",value:`${(y=e.creator)==null?void 0:y.first_name} ${(A=e.creator)==null?void 0:A.last_name}`},{label:"Modified By",value:`${(_=e.modifier)==null?void 0:_.first_name} ${(g=e.modifier)==null?void 0:g.last_name}`},{label:"Closed Time",value:`${e.closed_date}`}]};return r?a(M,{}):!d("read-call")||r?a(M,{}):c("div",{children:[a("div",{className:"flex items-center lg:justify-end justify-center flex-wrap gap-4 mb-6",children:a(Q,{loading:r,hasPermission:d,modelId:n,exportTable:P,routeModel:"call",permissionModel:"call"})}),c("div",{className:"panel",children:[c("div",{className:"flex justify-between flex-wrap gap-4 px-4",children:[a("div",{className:"text-2xl font-semibold uppercase",children:"Call"}),a("div",{className:"shrink-0",children:a("img",{src:V(e.image_data),alt:"Call image",className:"w-20 ltr:ml-auto rtl:mr-auto"})})]}),a(x,{title:"Call Information",leftObjects:u.leftObjects,rightObjects:u.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(x,{title:"Date information",leftObjects:[{label:"Created Date",value:j(e.created_at)}],rightObjects:[{label:"Modified Date",value:j(e.updated_at)}]}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(U,{sectionTitle:"Description Information",data:[{label:"Description",value:e.description}]})]})]})};export{Y as default};
