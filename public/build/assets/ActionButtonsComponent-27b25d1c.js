import{r as g,d as f,j as e,F as m,b as i,u as w,Q as C,aw as u,a as y,S as T,ac as j,R as A}from"./main-26e33097.js";import{A as F}from"./index-66762a43.js";const O=()=>{const[r,p]=g.useState("0"),n=f(t=>t.formErrors),o=t=>{p(a=>a===t?"":t)};return n.hasError?e("div",{className:"mb-5",children:e("div",{className:"space-y-2 font-semibold",children:i("div",{className:"border border-danger rounded dark:border-danger",children:[i("button",{type:"button",className:"p-4 w-full flex items-center text-white-dark dark:bg-[#1b2e4b] !text-danger",onClick:()=>o("1"),children:[n.titleMessage??"You have error on submitting form ,Click here to show",e("div",{className:"ltr:ml-auto rtl:mr-auto rotate-180"})]}),e("div",{children:e(F,{duration:700,height:r==="1"?"auto":0,children:e("div",{className:"space-y-2 p-4 text-white-dark text-[13px] border-t border-danger dark:border-danger",children:Object.entries(n).filter(([t])=>t!=="hasError").map(([t,a])=>e("div",{className:"flex items-center p-3.5 rounded text-danger bg-danger-light dark:bg-danger-dark-light",children:i("span",{className:"ltr:pr-2 rtl:pl-2",children:[i(m,{children:[" ",a," "]}),"."]})},t))})})})]})})}):e(m,{})},S=({formState:r,resetForm:p,disabled:n=!1})=>{const o=w(),t=f(c=>c.themeConfig),a=C(),b=new y,h=async(c="save")=>{o(u());const l=T.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:5e3}),v=await j(r.api);try{const s=await v.call(b,r);if(s.isOk){if(r.action==="create"&&o(p()),l.fire({icon:"success",timer:2e3,title:"Form submitted successfully",padding:"10px 20px"}),c==="save"){const d=r.redirectTo.replace(":id",`${s.data.data.id}`);a(d,{replace:!0})}else if(r.action!=="create"){const d=r.createRoute;a(d,{replace:!0})}}else if(s.status===422){const d=s.data.data,N={hasError:!0,...Object.fromEntries(Object.entries(d).map(([k,E])=>[k,E[0]]))};o(A(N)),l.fire({icon:"error",html:`<h5>Form Validation Error</h5>
                        <span style="font-size: 12px">Please Check fields</span>
                        `,padding:"10px 20px"})}else s.status===400?l.fire({icon:"error",title:s.data.message,padding:"10px 20px"}):l.fire({icon:"error",title:"Internal Server Error ,submitting form failed",padding:"10px 20px"})}catch(s){console.error(s),l.fire({icon:"error",title:"Internal Server Error ,submitting form failed",padding:"10px 20px"})}},x=()=>{const c=location.pathname.replace("/add","/list");r.action=="edit"?a(-1):a(c,{replace:!0})};return g.useEffect(()=>{o(u())},[]),i(m,{children:[e("div",{className:" sticky top-0 z-10 px-0 flex-1 py-2 ltr:xl:mr-6 rtl:xl:ml-6 px-10",children:e("div",{className:" ",children:i("div",{className:"flex justify-between items-center mb-6",children:[e("div",{className:"flex items-center",children:i("span",{className:"text-xl font-bold",children:[t.pageTitle," : "]})}),i("div",{className:"flex items-center gap-2",children:[e("button",{onClick:x,className:"btn btn-danger gap-2",children:"Back"}),e("button",{disabled:n,onClick:()=>h("new"),className:"btn btn-primary gap-2",children:"Save and new"}),e("button",{disabled:n,onClick:()=>h("save"),className:"btn btn-success gap-2",children:"Save"})]})]})})}),e("div",{className:"",children:e("div",{className:"item-center",children:e(O,{})})})]})};export{S as A};
