import{a as y,u as q,b as e,j as m,F as V,W as g,r as w,d as D,s as j}from"./main-77e2ced5.js";import{a as I,A as b}from"./react-select-async.esm-3c543bf6.js";import{S as C}from"./react-select.esm-73678beb.js";import{o as M,a as F,e as O,s as E,G as S,R as _,l as T,q as P}from"./CommonFunctions-ad427eed.js";import{F as L}from"./index-c5095f60.js";import{A as Q}from"./ActionButtonsComponent-a955f533.js";/* empty css                  */import{L as A}from"./LoadingAlpyn-26884e39.js";import"./Select-aecb2a80.esm-420bfc07.js";import"./sweetalert2.all-fc958ea3.js";const Y=()=>{var v,p,N,a,s,c,u,x;const d=y(t=>t.vendorRfqForm),h=q();new I;const l=(t,f)=>{h(g({[t]:f}))},i=[{value:"none",label:"-None-"},{value:"draft",label:"Draft"},{value:"excel-generate",label:"Excel Generated"},{value:"email-sent",label:"Email Sent"},{value:"closed",label:"Closed"}],r={"Vendor RFQ Information":{"Vendor RFQ Name":e("input",{id:"vendor_rfq_name",name:"vendor_rfq_name",className:"form-input flex-1 ",onChange:t=>l(t.target.name,t.target.value),defaultValue:d.vendor_rfq_name}),"Vendor Name":e(b,{isMulti:!1,id:"vendor_id",placeholder:"Type at least 2 characters to search...",name:"vendor_id",loadOptions:M,onChange:({value:t})=>{l("vendor_id",t)},className:"flex-1",defaultValue:{value:(v=d.vendor)==null?void 0:v.id,label:e("div",{className:"flex items-center",children:e("div",{className:"text-sm font-bold",children:(p=d.vendor)==null?void 0:p.vendor_name})},(N=d.vendor)==null?void 0:N.id)}}),Status:e(C,{options:i,name:"status",id:"status",onChange:({value:t})=>{l("status",t)},className:"flex-1",defaultValue:i.find(t=>t.value==d.status)}),Email:e("input",{id:"email",name:"email",className:"form-input flex-1 ",onChange:t=>l(t.target.name,t.target.value),defaultValue:d.email}),Currency:e(C,{options:F,name:"currency",id:"currency",onChange:({value:t})=>{l("currency",t)},className:"flex-1",defaultValue:F.find(t=>t.value==d.status)}),"Related RFQs":e(b,{isMulti:!0,id:"related_rfqs",placeholder:"Type at least 2 characters to search...",name:"related_rfqs",loadOptions:O,onChange:({value:t})=>{l("related_rfqs",t)},className:"flex-1",defaultValue:d.rfq?d.rfq.map(t=>({value:t.id,label:e("div",{className:"flex items-center",children:e("div",{children:e("div",{className:"text-sm font-bold",children:t.rfq_name})})},t.id)})):[]})},"":{Date:e(L,{name:"date",options:{dateFormat:"d-m-Y",defaultDate:`${d.date?new Date(d.date):""}`},defaultValue:d.date,className:"form-input flex-1",placeholder:"MM DD YYYY",onChange:(t,f)=>l("date",f)}),"Vendor RFQ Owner":e(b,{isMulti:!1,id:"owner_id",placeholder:"Type at least 2 characters to search...",name:"owner_id",loadOptions:E,onChange:({value:t})=>{l("owner_id",t)},className:"flex-1",defaultValue:{value:(a=d.owner)==null?void 0:a.id,label:m("div",{className:"flex items-center",children:[e("img",{src:(s=d.owner)==null?void 0:s.avatar,alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}),m("div",{children:[e("div",{className:"text-sm font-bold",children:(c=d.owner)==null?void 0:c.name}),e("div",{className:"text-xs text-gray-500",children:(u=d.owner)==null?void 0:u.email})]})]},(x=d.owner)==null?void 0:x.id)}}),"Email Opt Out":e("input",{id:"email_opt_out",type:"checkbox",name:"email_opt_out",className:"form-checkbox",onChange:t=>l(t.target.name,t.target.checked),defaultChecked:d.email_opt_out}),"Exchange Rate":e("input",{id:"exchange_rate",name:"exchange_rate",className:"form-input flex-1 ",disabled:!0,onChange:t=>l(t.target.name,t.target.value),defaultValue:1})}};return e(V,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(S,{fields:r})})})},$=()=>{const d=y(a=>a.vendorRfqForm),h=q(),l=(a,s,c)=>{const u=i.find(n=>n.id===c),x=i.findIndex(n=>n.id===c),t={...u,[a]:s},f={...i,[x]:t};r(Object.values(f)),h(g({requested_products:f}))},[i,r]=w.useState([]);w.useEffect(()=>{r(Object.values(d.requested_products))},[]);const v=()=>{let a;a=i!=null&&i.length?i.reduce((c,u)=>u.id>c?u.id:c,i[0].id):0;let s=[...i,{id:a+1}];r(s),h(g({requested_products:s}))},p=[{label:"-None-",value:"none"},{label:"Stock",value:"stock"},{label:"Lead Time",value:"lead_time"}],N=(a=null)=>{const s=i.filter(c=>c.id!=a.id);r(s),h(g({requested_products:s}))};return e(V,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e("div",{className:" w-full ltr:lg:mr-12 rtl:lg:ml-12 mb-12 ",children:m("div",{className:"",children:[e("div",{className:"text-lg",children:"Requested Products :"}),m("div",{className:"mt-8",children:[e("div",{className:"overflow-x-auto	w-11/12",children:m("table",{className:"table-auto w-5",children:[e("thead",{children:m("tr",{children:[m("th",{className:"w-1",children:["Source RFQ ",e(_,{})]}),e("th",{className:"w-1",children:"RFQ Owner Name"}),m("th",{className:"w-1",children:["Product ",e(_,{})]}),e("th",{className:"w-1",children:"Is Alt For This Product"}),m("th",{className:"w-1",children:["Manufacturer ",e(_,{})]}),m("th",{className:"w-1",children:["Quantity ",e(_,{})]}),m("th",{className:"w-1",children:["Lead Time Demand ",e(_,{})]}),e("th",{className:"w-1",children:"Comments"})]})}),e("tbody",{children:i.map(a=>{var s,c,u,x,t,f,n,R,k;return m("tr",{className:"align-top",children:[e("td",{children:e(b,{isMulti:!1,id:"rfq_id",name:"rfq_id",placeholder:"Type at least 2 characters to search...",loadOptions:O,onChange:({value:o})=>{l("rfq_id",o,a.id)},defaultValue:{value:(s=a.rfq)==null?void 0:s.id,label:e("div",{className:"flex items-center",children:e("div",{children:e("div",{className:"text-sm font-bold",children:(c=a.rfq)==null?void 0:c.rfq_name})})},(u=a.rfq)==null?void 0:u.id)},className:"flex-1  min-w-[200px]"})}),e("td",{children:e("input",{name:"rfq_owner_name",type:"text",className:"form-input min-w-[200px]",onChange:o=>l(o.target.name,o.target.value,a.id),defaultValue:a.rfq_owner_name})}),e("td",{children:e(b,{isMulti:!1,id:"product_id",name:"product_id",placeholder:"Type at least 2 characters to search...",loadOptions:T,onChange:({value:o})=>{l("product_id",o,a.id)},defaultValue:{value:(x=a.product)==null?void 0:x.id,label:e("div",{className:"flex items-center",children:e("div",{children:e("div",{className:"text-sm font-bold",children:(t=a.product)==null?void 0:t.product_name})})},(f=a.product)==null?void 0:f.id)},className:"flex-1  min-w-[200px]"})}),e("td",{children:e("input",{name:"alt_product",type:"text",className:"form-input min-w-[200px]",onChange:o=>l(o.target.name,o.target.value,a.id),defaultValue:a.alt_product})}),e("td",{children:e(b,{isMulti:!1,id:"manufacture_id",name:"manufacture_id",placeholder:"Type at least 2 characters to search...",loadOptions:P,onChange:({value:o})=>{l("manufacture_id",o,a.id)},defaultValue:{value:(n=a.manufacture)==null?void 0:n.id,label:e("div",{className:"flex items-center",children:e("div",{children:e("div",{className:"text-sm font-bold",children:(R=a.manufacture)==null?void 0:R.name})})},(k=a.manufacture)==null?void 0:k.id)},className:"flex-1  min-w-[200px]"})}),e("td",{children:e("input",{name:"quantity",type:"text",className:"form-input min-w-[200px]",onChange:o=>l(o.target.name,o.target.value,a.id),defaultValue:a.quantity})}),e("td",{children:e(C,{options:p,name:"lead_time_demand",id:"lead_time_demand",onChange:({value:o})=>{l("lead_time_demand",o,a.id)},menuPlacement:"top",menuPortalTarget:document.body,defaultValue:p.find(o=>o.value==a.lead_time_demand),className:"flex-1 min-w-[200px]"})}),e("td",{children:e("textarea",{name:"comment",className:"form-input min-w-[200px]",defaultValue:a.comment,onChange:o=>l(o.target.name,o.target.value,a.id)})}),e("td",{children:e("button",{type:"button",onClick:()=>N(a),children:m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})})]},a.id)})})]})}),e("div",{className:"flex justify-between sm:flex-row flex-col mt-6 px-4",children:e("div",{className:"sm:mb-0 mb-6",children:e("button",{type:"button",className:"btn btn-primary",onClick:()=>v(),children:"Add Item"})})})]})]},"Quote Items")})})})},B=()=>{const d=y(a=>a.vendorRfqForm),h=q(),[l,i]=w.useState([]),r=(a,s,c)=>{const u=l.find(n=>n.id===c),x=l.findIndex(n=>n.id===c),t={...u,[a]:s},f={...l,[x]:t};i(Object.values(f)),h(g({offered_products:f}))},v=()=>{let a;a=l!=null&&l.length?l.reduce((c,u)=>u.id>c?u.id:c,l[0].id):0;let s=[...l,{id:a+1}];i(s),h(g({offered_products:s}))};w.useEffect(()=>{i(Object.values(d.offered_products))},[]);const p=[{label:"-None-",value:"none"},{label:"Stock",value:"stock"},{label:"Lead Time",value:"lead_time"}],N=(a=null)=>{const s=l.filter(c=>c.id!=a.id);i(s),h(g({offered_products:s}))};return e(V,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e("div",{className:" w-full ltr:lg:mr-12 rtl:lg:ml-12 mb-12 ",children:m("div",{className:"",children:[e("div",{className:"text-lg",children:"Offered Products :"}),m("div",{className:"mt-8",children:[e("div",{className:"overflow-x-auto	w-11/12",children:m("table",{className:"table-auto w-5",children:[e("thead",{children:m("tr",{children:[e("th",{className:"w-1",children:"Offered MPN"}),e("th",{className:"w-1",children:"Offered Manufacture"}),e("th",{className:"w-1",children:"Offered Quantity"}),e("th",{className:"w-1",children:"Offered Price (USD)"}),e("th",{className:"w-1",children:"D/C"}),e("th",{className:"w-1",children:"Offered Lead Time"}),e("th",{className:"w-1",children:"Comments"})]})}),e("tbody",{children:l.map(a=>{var s,c,u,x,t,f;return m("tr",{className:"align-top",children:[e("td",{children:e(b,{isMulti:!1,id:"product_id",name:"product_id",placeholder:"Type at least 2 characters to search...",loadOptions:T,onChange:({value:n})=>{r("product_id",n,a.id)},menuPortalTarget:document.body,defaultValue:{value:(s=a.product)==null?void 0:s.id,label:e("div",{className:"flex items-center",children:e("div",{children:e("div",{className:"text-sm font-bold",children:(c=a.product)==null?void 0:c.product_name})})},(u=a.product)==null?void 0:u.id)},className:"flex-1  min-w-[200px]"})}),e("td",{children:e(b,{isMulti:!1,id:"manufacture_id",name:"manufacture_id",placeholder:"Type at least 2 characters to search...",loadOptions:P,onChange:({value:n})=>{r("manufacture_id",n,a.id)},menuPortalTarget:document.body,defaultValue:{value:(x=a.manufacture)==null?void 0:x.id,label:e("div",{className:"flex items-center",children:e("div",{children:e("div",{className:"text-sm font-bold",children:(t=a.manufacture)==null?void 0:t.name})})},(f=a.manufacture)==null?void 0:f.id)},className:"flex-1  min-w-[200px]"})}),e("td",{children:e("input",{name:"quantity",type:"text",className:"form-input min-w-[200px]",onChange:n=>r(n.target.name,n.target.value,a.id),defaultValue:a.quantity})}),e("td",{children:e("input",{name:"price",type:"text",className:"form-input min-w-[200px]",onChange:n=>r(n.target.name,n.target.value,a.id),defaultValue:a.price})}),e("td",{children:e("input",{name:"dc",type:"text",className:"form-input min-w-[200px]",onChange:n=>r(n.target.name,n.target.value,a.id),defaultValue:a.dc})}),e("td",{children:e(C,{options:p,name:"offer_lead_time",id:"offer_lead_time",onChange:({value:n})=>{r("offer_lead_time",n,a.id)},menuPlacement:"top",menuPortalTarget:document.body,defaultValue:p.find(n=>n.value==a.offer_lead_time),className:"flex-1 min-w-[200px]"})}),e("td",{children:e("textarea",{name:"comment",className:"form-input min-w-[200px]",defaultValue:a.comment,onChange:n=>r(n.target.name,n.target.value,a.id)})}),e("td",{children:e("button",{type:"button",onClick:()=>N(a),children:m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})})]},a.id)})})]})}),e("div",{className:"flex justify-between sm:flex-row flex-col mt-6 px-4",children:e("div",{className:"sm:mb-0 mb-6",children:e("button",{type:"button",className:"btn btn-primary",onClick:()=>v(),children:"Add Item"})})})]})]},"Quote Items")})})})},G=()=>{const d=y(r=>r.vendorRfqForm),h=q();new I;const l=(r,v)=>{h(g({[r]:v}))},i={Development:{"Requested Products JSON":e("textarea",{id:"requested_products",rows:2,name:"requested_products",className:"form-textarea flex-1",placeholder:"",defaultValue:d.requested_products,onChange:r=>l(r.target.name,r.target.value)})},"":{"Is full":e("input",{id:"is_full",type:"checkbox",name:"is_full",className:"form-checkbox",onChange:r=>l(r.target.name,r.target.checked),defaultChecked:d.is_full})}};return e(V,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(S,{fields:i})})})},U=()=>m("div",{className:"mt-8 px-4",children:[e(Y,{},"VendorRFQInformation"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e($,{},"RequestedProducts"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(B,{},"OfferedProducts"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(G,{},"Development")]}),le=()=>{const d=y(a=>a.vendorRfqForm),[h,l]=w.useState(!0),r=D().id,v=new I,p=q();w.useEffect(()=>{p(j("VendorRfq Edit"))});const N=async()=>{const a=await v.fetchSingleVendorRfq(r);if(a.status!=200)return;const s=a.data.data.vendorRfq;p(g(s))};return w.useEffect(()=>{N().then(()=>{l(!1)})},[r]),w.useEffect(()=>{p(g({api:"updateSingleVendorRfq",redirectTo:"/vendor_rfq/edit/:id",action:"edit"}))},[]),h?e(A,{}):m("div",{className:"px-4",children:[e(Q,{formState:d}),e("div",{className:"flex xl:flex-row flex-col gap-2.5",children:e("div",{className:"panel px-0 flex-1 py-6 ltr:xl:mr-6 rtl:xl:ml-6 overflow-hidden",children:e(U,{})})})]})};export{le as default};
