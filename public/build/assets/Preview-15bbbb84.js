import{c as E,u as M,r as i,h as q,d as G,s as Q,ax as F,a$ as N,j as a,e as O,b as s,f as R,i as k,a as H}from"./main-09c635dc.js";import{I as z}from"./InfoListComponent-53c026d7.js";import{A as U}from"./ActionButtonsPreview-e92736d6.js";import{I as n}from"./InformationSectionPreview-70bad941.js";import{M as D}from"./MultipleLineSectionPreview-a0b3cc5f.js";import{T as V}from"./TableSectionPreview-aba1979e.js";import{A as Z}from"./AttachmentSection-90863710.js";import{G as J}from"./GenerateEmailLogList-1ca1b725.js";import{G as K}from"./GenerateCallList-c699b970.js";import"./CommonIcons-a7d39a6f.js";import"./sortBy-6ea67a6d.js";import"./_baseIsEqual-82321e50.js";const de=()=>{var m,u,v,p,h,f,g,_,y,$,j,w,S,I;const{hasPermission:c}=E(),o=M(),[r,x]=i.useState(!0),t=q().id,C=new H,e=G(l=>l.invoiceForm);i.useEffect(()=>{o(Q("Invoice Preview"))});const P=()=>{window.print()},L=async()=>{const l=await C.fetchSingleInvoice(t);if(l.status!=200)return;const B=l.data.data.invoice;o(N(B))};i.useEffect(()=>{L().then(()=>{x(!1)})},[t]),i.useEffect(()=>{e.invoice_file&&F("invoice","invoice_file",e.invoice_file).then(l=>{o(N({invoice_file_preview:l}))})},[]);const d={leftObjects:[{label:"Due Date",value:`${e.due_date??""}`},{label:"Sales Commission",value:e.sales_commission},{label:"Exchange Rate",value:`${e.exchange_rate}`},{label:"ZohoBooksID",value:`${e.zoho_books_id}`}],rightObjects:[{label:"Deal Stage",value:`${e.deal_stage??""} `},{label:"Excise Duty",value:`${e.excise_duty}`},{label:"Invoice Stage",value:`${e.invoice_stage}`},{label:"Status",value:`${e.status}`},{label:"Currency",value:`${e.currency}`}]};`${e.invoice_valid}`,`${e.proactive_offer}`,`${e.rating}`,`${(m=e.product)==null?void 0:m.product_name}`,`${e.customer_part_id}`,`${e.quantity}`,`${e.list_price}`,`${e.lead_time}`,`${(u=e.vendor)==null?void 0:u.vendor_name}`,`${e.availability_no}`,`${e.availability_date}`,`${(v=e.availability)==null?void 0:v.availability_name}`,`${e.cost}`,`${e.lt_vendor}`,`${e.spq}`,`${e.quantity_in_stock}`;const b={leftObjects:[{label:"Billing Street",value:`${e.billing_street}`},{label:"Billing City",value:`${e.billing_city}`},{label:"Billing State",value:`${e.billing_state}`},{label:"Billing Code",value:`${e.billing_code}`},{label:"Billing Country",value:`${e.billing_country}`}],rightObjects:[{label:"Shipping Street",value:`${e.shipping_street}`},{label:"Shipping City",value:`${e.shipping_city}`},{label:"Shipping State",value:`${e.shipping_state}`},{label:"Shipping Code",value:`${e.shipping_code}`},{label:"Shipping Country",value:`${e.shipping_country}`}]},T=[{key:"id",label:"S.NO"},{key:"product_name",label:"Product Name",model:"product"},{key:"quantity",label:"Quantity"},{key:"list_price",label:"List Price"},{key:"amount",label:"Amount"},{key:"discount",label:"Discount"},{key:"tax",label:"Tax"},{key:"total",label:"Total"}],A=[{label:"Account Name",value:`${((p=e.account)==null?void 0:p.account_name)??""} `},{label:"Contact Name",value:`${((h=e.owner)==null?void 0:h.first_name)??""} ${((f=e.owner)==null?void 0:f.last_name)??""}`},{label:"Sales Order",value:`${((g=e.sales_order)==null?void 0:g.subject)??""} ${((_=e.contact)==null?void 0:_.last_name)??""} `},{label:"Purchase Order",value:`${e.purchase_order??""} `},{label:"Subject",value:`${e.subject??""} `},{label:"Invoice Date",value:`${e.invoice_date??""} `},{label:"Invoice Owner",value:`${((y=e.owner)==null?void 0:y.first_name)??""} ${(($=e.owner)==null?void 0:$.last_name)??""}`},{label:"Created By",value:`${((j=e.creator)==null?void 0:j.first_name)??""} ${((w=e.creator)==null?void 0:w.last_name)??""}`},{label:"Modified By",value:`${((S=e.modifier)==null?void 0:S.first_name)??""} ${((I=e.modifier)==null?void 0:I.last_name)??""}`}];return r?a(O,{}):!c("read-invoice")||r?a(O,{}):s("div",{children:[a("div",{className:"flex items-center lg:justify-end justify-center flex-wrap gap-4 mb-6",children:a(U,{loading:r,hasPermission:c,modelId:t,exportTable:P,routeModel:"invoice",permissionModel:"invoice",hasDownloadPdf:!0})}),s("div",{className:"panel",children:[s("div",{className:"flex justify-between flex-wrap gap-4 px-4",children:[a("div",{className:"text-2xl font-semibold uppercase",children:"Invoice"}),a("div",{className:"shrink-0",children:a("img",{src:R(e.image_data),alt:"Invoice image",className:"w-20 ltr:ml-auto rtl:mr-auto"})})]}),a(z,{data:A}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(n,{title:"Header",leftObjects:d.leftObjects,rightObjects:d.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(n,{title:"Address Information",leftObjects:b.leftObjects,rightObjects:b.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(V,{title:"Invoice Items",items:e.items,columns:T,total:e.total,subtotal:e.subtotal,discount:e.discount,tax:e.tax,adjustment:e.adjustment}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(D,{sectionTitle:"Terms And Conditions",data:[{label:"Terms and Conditions",value:e.terms_and_conditions}]}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(D,{sectionTitle:"Description ",data:[{label:"Description",value:e.description}]}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(n,{title:"Date information",leftObjects:[{label:"Created Date",value:k(e.created_at)}],rightObjects:[{label:"Modified Date",value:k(e.updated_at)}]}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(Z,{modelId:t,modelName:"contact"}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(K,{permissionName:"read-invoice",type:"call",routeName:"fetchInvoiceCall",modelId:t,title:"Call Logs"}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(J,{permissionName:"read-invoice",type:"email-log",routeName:"fetchInvoiceEmailLogs",modelId:t,title:"Email Logs"})]})]})};export{de as default};
