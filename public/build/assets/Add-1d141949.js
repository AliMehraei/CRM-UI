import{u as N,e as O,a as C,b as e,F as w,w as u,r as j,j as b,c as Q,s as R,x as L,g as U}from"./main-c04bb166.js";import{A as y}from"./react-select-async.esm-a7c7d1e9.js";import{G as F,R as Y,A as H}from"./GenerateFields-302fde9a.js";import{S as k}from"./react-select.esm-a460a2c5.js";import{q as $,c as z,o as G,a as W,s as M,r as Z,S as J,h as K,m as E,i as X}from"./CommonFunctions-90d107b8.js";import{F as q}from"./index-3c565ae9.js";/* empty css                  */import"./Select-aecb2a80.esm-e774644f.js";import"./sweetalert2.all-9d5da798.js";const ee=()=>{const d=N();new O,C(a=>a.purchaseOrderForm);const t=(a,o)=>{d(u({[a]:o}))};return e(w,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(F,{fields:{Header:{"Vendor Name":e(y,{isMulti:!1,required:!0,id:"vendor_id",placeholder:"Type at least 2 characters to search...",name:"vendor_id",loadOptions:$,onChange:({value:a})=>{t("vendor_id",a)},className:"flex-1"}),"Contact Name":e(y,{isMulti:!1,id:"contact_id",placeholder:"Type at least 2 characters to search...",name:"contact_id",loadOptions:z,onChange:({value:a})=>{t("contact_id",a)},className:"flex-1"}),"Availability No":e(y,{isMulti:!1,id:"availability_id",placeholder:"Type at least 2 characters to search...",name:"availability_id",loadOptions:G,onChange:({value:a})=>{t("availability_id",a)},className:"flex-1"}),Currency:e(k,{options:W,name:"currency",id:"currency",onChange:({value:a})=>{t("currency",a)},className:"flex-1"}),"Exchange Rate":e("input",{id:"exchange_rate",name:"exchange_rate",type:"text",value:"1",className:"flex-1 form-input disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",disabled:!0})},"":{"PO Date":e(q,{options:{dateFormat:"Y-m-d ",position:"auto left"},name:"po_date",value:"",className:"form-input flex-1",onChange:(a,o)=>t("po_date",o)}),"PurchaseOrders Owner":e(y,{isMulti:!1,id:"owner_id",placeholder:"Type at least 2 characters to search...",name:"owner_id",loadOptions:M,onChange:({value:a})=>{t("owner_id",a)},className:"flex-1"}),"Approved By":e(y,{isMulti:!1,id:"approved_by_id",placeholder:"Type at least 2 characters to search...",name:"approved_by_id",loadOptions:M,onChange:({value:a})=>{t("approved_by_id",a)},className:"flex-1"})}}})})})},ae=()=>{const d=N();new O,C(l=>l.purchaseOrderForm);const t=(l,p)=>{d(u({[l]:p}))};return e(w,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(F,{fields:{"PurchaseOrders Information":{"PO Type":e(k,{options:[{value:"none",label:"-None-"},{value:"single",label:"Single PO"},{value:"frame",label:"Frame PO"},{value:"call_off",label:"Call Off"},{value:"forecast",label:"Forecast PO"}],name:"po_type",id:"po_type",onChange:({value:l})=>{t("po_type",l)},className:"flex-1"}),"Parent PO No.":e(y,{isMulti:!1,id:"parent_po_id",placeholder:"Type at least 2 characters to search...",name:"parent_po_id",loadOptions:Z,onChange:({value:l})=>{t("parent_po_id",l)},className:"flex-1"}),ZohoBooksID:e("input",{id:"zoho_books_id",name:"zoho_books_id",className:"form-input flex-1 ",onChange:l=>t(l.target.name,l.target.value)})},"":{Subject:e("input",{id:"subject",required:!0,name:"subject",className:"form-input flex-1 ",onChange:l=>t(l.target.name,l.target.value)}),Status:e(k,{options:J,name:"status",id:"status",onChange:({value:l})=>{t("status",l)},className:"flex-1"}),Carrier:e(k,{options:[{value:"vendor_forwarder",label:"Vendor Forwarder"},{value:"ups",label:"UPS"},{value:"usps",label:"USPS"},{value:"dhl",label:"DHL"},{value:"blue_dart",label:"BlueDart"}],name:"carrier",id:"carrier",onChange:({value:l})=>{t("carrier",l)},className:"flex-1"}),AWB:e("input",{id:"awb",name:"awb",className:"form-input flex-1 ",onChange:l=>t(l.target.name,l.target.value)}),"Confirmation Vendor":e("input",{id:"confirmation_vendor",type:"file",className:"form-input file:py-2 file:px-4 file:border-0 file:font-semibold p-0 file:bg-primary/90 ltr:file:mr-5 rtl:file:ml-5 file:text-white file:hover:bg-primary flex-1",accept:"*",onChange:l=>K(l,p=>{d(u({field:"confirmation_vendor",value:`${p==null?void 0:p.data.data.file_url}`}))}),name:"confirmation_vendorFile"},"confirmation_vendor")}}})})})},te=()=>{C(r=>r.purchaseOrderForm);const d=N(),t=new O,[n,a]=j.useState([{id:1,amount:0,list_price:0}]),o=(r,i,c)=>{const h=n.find(g=>g.id===c),v=n.findIndex(g=>g.id===c),_={...h,[r]:i},m={..._,amount:parseInt(_.quantity??0)*parseFloat(_.list_price??0)},f={...n,[v]:m};a(Object.values(f)),d(u({items:f}))},l=async(r,i)=>{const c=await t.fetchSingleProduct(r);if(c.status!==200)return;const h=c.data.data.product,v=n.find(x=>x.id===i),_=n.findIndex(x=>x.id===i),m={...v,product_id:r,list_price:h.unit_price??0,description:h.description},f={...m,amount:parseInt(m.quantity??0)*parseFloat(m.list_price??0)},g={...n,[_]:f};a(Object.values(g)),d(u({items:g}))},p=()=>{let r;r=n!=null&&n.length?n.reduce((c,h)=>h.id>c?h.id:c,n[0].id):0;let i=[...n,{id:r+1,amount:0,list_price:0}];a(i),d(u({items:i}))},S=(r=null)=>{const i=n.filter(c=>c.id!=r.id);a(i),d(u({items:i}))};return e(w,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e("div",{className:" w-full ltr:lg:mr-12 rtl:lg:ml-12 mb-12 ",children:b("div",{className:"",children:[b("div",{className:"text-lg",children:["Purchase Items ",e(Y,{})," :"]}),b("div",{className:"mt-8",children:[e("div",{className:"overflow-x-auto	w-11/12",children:b("table",{className:"table-auto w-5",children:[e("thead",{children:b("tr",{children:[e("th",{className:"w-1",children:"Product Name"}),e("th",{className:"w-1",children:"Quantity"}),e("th",{className:"w-1",children:"List Price"}),e("th",{className:"w-1",children:"Amount"}),e("th",{className:"w-1",children:"Comment"}),e("th",{className:"w-1",children:"Date Code"}),e("th",{className:"w-1",children:"Delivery Date"}),e("th",{className:"w-1",children:"Estimated Delivery Date"})]})}),e("tbody",{children:n.map(r=>b("tr",{className:"align-top",children:[b("td",{children:[e(y,{isMulti:!1,id:"product_id",name:"product_id",placeholder:"Type at least 2 characters to search...",loadOptions:E,onChange:({value:i})=>{l(i,r.id)},className:"flex-1  min-w-[200px]"}),",",e("textarea",{name:"description",className:"form-textarea mt-4",placeholder:"Enter Description",onChange:i=>o(i.target.name,i.target.value,r.id),defaultValue:r.description})]}),e("td",{children:e("input",{type:"number",className:"form-input w-32",placeholder:"Quantity",name:"quantity",min:0,onChange:i=>o(i.target.name,i.target.value,r.id),defaultValue:r.quantity})}),e("td",{children:e("input",{type:"number",className:"form-input w-32",placeholder:"Price",name:"list_price",min:0,value:r.list_price,onChange:i=>o(i.target.name,i.target.value,r.id)})}),e("td",{children:e("input",{type:"number",className:"w-32 form-input disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",name:"amount",min:0,value:r.amount,disabled:!0,onChange:i=>o(i.target.name,i.target.value,r.id)})}),e("td",{children:e("textarea",{name:"comment",className:"form-textarea  min-w-[200px]",placeholder:"Enter comment",onChange:i=>o(i.target.name,i.target.value,r.id),defaultValue:r.comment})}),e("td",{children:e("input",{name:"date_code",type:"text",className:"form-input min-w-[200px]",defaultValue:r.date_code,onChange:i=>o(i.target.name,i.target.value,r.id)})}),e("td",{children:e(q,{name:"requested_delivery_date",options:{dateFormat:"Y-m-d",position:"auto left"},className:"form-input min-w-[200px]",onChange:(i,c)=>o("requested_delivery_date",c,r.id)})}),e("td",{children:e(q,{name:"estimated_delivery_date",options:{dateFormat:"Y-m-d",position:"auto left"},className:"form-input flex-1 min-w-[200px]",onChange:(i,c)=>o("estimated_delivery_date",c,r.id)})}),e("td",{children:e("button",{type:"button",onClick:()=>S(r),children:b("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})})]},r.id))})]})}),e("div",{className:"flex justify-between sm:flex-row flex-col mt-6 px-4",children:e("div",{className:"sm:mb-0 mb-6",children:e("button",{type:"button",className:"btn btn-primary",onClick:()=>p(),children:"Add Item"})})})]})]},"Purchase Items")})})})},ne=()=>{const d=N();new O,C(a=>a.purchaseOrderForm);const t=(a,o)=>{d(u({[a]:o}))};return e(w,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(F,{fields:{"PO line":{"Requested Delivery Date":e(q,{options:{dateFormat:"Y-m-d ",position:"auto left"},name:"requested_delivery_date",value:"",className:"form-input flex-1",onChange:(a,o)=>t("requested_delivery_date",o)}),"Product Name":e(y,{isMulti:!1,id:"product_id",placeholder:"Type at least 2 characters to search...",name:"product_id",loadOptions:E,onChange:({value:a})=>{t("product_id",a)},className:"flex-1"}),Quantity:e("input",{id:"quantity",name:"quantity",className:"form-input flex-1 ",type:"number",onChange:a=>t(a.target.name,a.target.value)}),Cost:e("input",{type:"number",id:"cost",name:"cost",className:"form-input flex-1 ",onChange:a=>t(a.target.name,a.target.value)})},"":{"Confirmed Delivery Date":e(q,{options:{dateFormat:"Y-m-d ",position:"auto left"},name:"confirmed_delivery_date",value:"",className:"form-input flex-1",onChange:(a,o)=>t("confirmed_delivery_date",o)}),"Date Code":e("input",{id:"date_code",name:"date_code",className:"form-input flex-1 ",onChange:a=>t(a.target.name,a.target.value)}),SPQ:e("input",{id:"spq",name:"spq",className:"form-input flex-1 ",onChange:a=>t(a.target.name,a.target.value)}),comment:e("input",{id:"comment",name:"comment",className:"form-input flex-1 ",onChange:a=>t(a.target.name,a.target.value)})}}})})})},ie=()=>{var p,S,r,i,c,h,v,_;const d=N(),t=new O,n=C(m=>m.purchaseOrderForm),a=(m,f)=>{d(u({[m]:f}))},o=async m=>{const f=await t.fetchSingleSalesOrder(m);if(f.status!=200)return;const g=f.data.data.salesOrder;d(u({sales_order:g}));const x=g.account;if(x==null)return;const D=["billing_street","billing_city","billing_state","billing_code","billing_country","shipping_street","shipping_city","shipping_state","shipping_code","shipping_country"],P={};D.forEach(I=>{P[I]=x[I]??null}),d(u(P))},l={"Linked SO":{"SO Number":e(y,{isMulti:!1,id:"sales_order_id",placeholder:"Type at least 2 characters to search...",name:"sales_order_id",loadOptions:X,onChange:({value:m})=>{a("sales_order_id",m),o(m)},className:"flex-1"}),"Account Name":e("input",{id:"account_id",name:"account_id",value:(S=(p=n.sales_order)==null?void 0:p.account)==null?void 0:S.account_name,className:"form-input disabled:pointer-events-none bg-[#eee] flex-1 ",disabled:!0}),"Quantity SO":e("input",{id:"quantity_so",name:"quantity_so",className:"form-input disabled:pointer-events-none bg-[#eee] flex-1 ",disabled:!0,value:(r=n.sales_order)==null?void 0:r.quantity}),Resale:e("input",{id:"resale",name:"resale",className:"form-input disabled:pointer-events-none bg-[#eee] flex-1 ",disabled:!0,value:(i=n.sales_order)==null?void 0:i.resale_price}),"SO Status":e("input",{id:"so_status",name:"so_status",className:"form-input disabled:pointer-events-none bg-[#eee] flex-1 ",disabled:!0,value:(c=n.sales_order)==null?void 0:c.status})},"":{"Requested D.D.":e("input",{id:"so_requested_d_d",name:"so_requested_d_d",className:"form-input disabled:pointer-events-none bg-[#eee] flex-1 ",disabled:!0,value:(h=n.sales_order)==null?void 0:h.requested_delivery_date}),"Confirmed D.D.":e("input",{id:"so_confirmed_d_d",name:"so_confirmed_d_d",className:"form-input disabled:pointer-events-none bg-[#eee] flex-1 ",disabled:!0}),"D/C":e("input",{id:"dc_so",name:"dc_so",className:"form-input disabled:pointer-events-none bg-[#eee] flex-1 ",disabled:!0,value:(v=n.sales_order)==null?void 0:v.dc}),"SPQ SO":e("input",{id:"spq_so",name:"spq_so",className:"form-input disabled:pointer-events-none bg-[#eee] flex-1 ",disabled:!0,value:(_=n.sales_order)==null?void 0:_.spq})}};return e(w,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(F,{fields:l})})})},re=()=>{var o,l,p,S,r,i,c,h,v,_,m,f,g,x,D,P,I,A,T,B;const d=N(),t=C(s=>s.purchaseOrderForm),n=(s,V)=>{d(u({[s]:V}))},a={"Address Information":{"Billing Street":e("input",{id:"billing_street",name:"billing_street",required:!0,value:t.billing_street||((l=(o=t.sales_order)==null?void 0:o.account)==null?void 0:l.billing_street)||"",onChange:s=>n(s.target.name,s.target.value),className:"form-input flex-1"}),"Billing City":e("input",{id:"billing_city",name:"billing_city",required:!0,value:t.billing_city||((S=(p=t.sales_order)==null?void 0:p.account)==null?void 0:S.billing_city)||"",onChange:s=>n(s.target.name,s.target.value),className:"form-input flex-1"}),"Billing State":e("input",{id:"billing_state",name:"billing_state",value:t.billing_state||((i=(r=t.sales_order)==null?void 0:r.account)==null?void 0:i.billing_state)||"",onChange:s=>n(s.target.name,s.target.value),className:"form-input flex-1"}),"Billing Code":e("input",{id:"billing_code",name:"billing_code",required:!0,value:t.billing_code||((h=(c=t.sales_order)==null?void 0:c.account)==null?void 0:h.billing_code)||"",onChange:s=>n(s.target.name,s.target.value),className:"form-input flex-1"}),"Billing Country":e("input",{id:"billing_country",name:"billing_country",required:!0,value:t.billing_country||((_=(v=t.sales_order)==null?void 0:v.account)==null?void 0:_.billing_country)||"",onChange:s=>n(s.target.name,s.target.value),className:"form-input flex-1"})},"":{"Shipping Street":e("input",{id:"shipping_street",name:"shipping_street",value:t.shipping_street||((f=(m=t.sales_order)==null?void 0:m.account)==null?void 0:f.shipping_street)||"",onChange:s=>n(s.target.name,s.target.value),className:"form-input flex-1"}),"Shipping City":e("input",{id:"shipping_city",name:"shipping_city",value:t.shipping_city||((x=(g=t.sales_order)==null?void 0:g.account)==null?void 0:x.shipping_city)||"",onChange:s=>n(s.target.name,s.target.value),className:"form-input flex-1"}),"Shipping State":e("input",{id:"shipping_state",name:"shipping_state",value:t.shipping_state||((P=(D=t.sales_order)==null?void 0:D.account)==null?void 0:P.shipping_state)||"",onChange:s=>n(s.target.name,s.target.value),className:"form-input flex-1"}),"Shipping Code":e("input",{id:"shipping_code",name:"shipping_code",value:t.shipping_code||((A=(I=t.sales_order)==null?void 0:I.account)==null?void 0:A.shipping_code)||"",onChange:s=>n(s.target.name,s.target.value),className:"form-input flex-1"}),"Shipping Country":e("input",{id:"shipping_country",name:"shipping_country",value:t.shipping_country||((B=(T=t.sales_order)==null?void 0:T.account)==null?void 0:B.shipping_country)||"",onChange:s=>n(s.target.name,s.target.value),className:"form-input flex-1"})}};return e(w,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(F,{fields:a})})})},se=()=>{C(a=>a.purchaseOrderForm);const d=N();new O;const t=(a,o)=>{d(u({[a]:o}))};return e(w,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(F,{fields:{"Terms and Conditions":{"Terms and Conditions":e("textarea",{id:"terms_conditions",rows:3,name:"terms_conditions",className:"form-textarea flex-1",placeholder:"",onChange:a=>t(a.target.name,a.target.value)})},"":{}}})})})},le=()=>{C(a=>a.purchaseOrderForm);const d=N();new O;const t=(a,o)=>{d(u({[a]:o}))};return e(w,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(F,{fields:{"Description Information":{Description:e("textarea",{id:"description",rows:3,name:"description",className:"form-textarea flex-1",placeholder:"",onChange:a=>t(a.target.name,a.target.value)})},"":{}}})})})},oe=()=>b("div",{className:"mt-8 px-4",children:[e(ee,{},"HeaderSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(ae,{},"PurchaseOrderInformationSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(te,{},"PurchaseItemsSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(ne,{},"POLineSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(ie,{},"LinkedSOSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(re,{},"AddressInformationSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(se,{},"TermsConditionsSection"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(le,{},"DescriptionInformationSection")]}),be=()=>{const{hasPermission:d}=Q(),t=C(a=>a.purchaseOrderForm),n=N();return j.useEffect(()=>{n(R("Purchase Order Add"))}),j.useEffect(()=>{n(L())},[]),d("create-purchase-order")?b("div",{className:"px-4",children:[e(H,{formState:t,resetForm:L}),e("div",{className:"flex xl:flex-row flex-col gap-2.5",children:e("div",{className:"panel px-0 flex-1 py-6 ltr:xl:mr-6 rtl:xl:ml-6 overflow-hidden",children:e(oe,{})})})]}):e(U,{})};export{be as default};
