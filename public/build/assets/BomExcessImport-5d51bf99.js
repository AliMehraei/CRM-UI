import{u as L,c as P,r as o,d as j,h as R,s as g,ad as i,j as e,F as $,b as s,f as H,S as A,q as M,a as Y}from"./main-d68524cb.js";const J=()=>{const c=L();P();const[p,x]=o.useState(""),[d,w]=o.useState(""),[h,y]=o.useState(""),[q,N]=o.useState("");o.useState([]);const[U,v]=o.useState(""),[O,k]=o.useState(!0),[S,_]=o.useState(""),l=j(a=>a.contactForm),u=new Y,r=R().contactId,b="contact";o.useEffect(()=>{c(g(p))},[c]),o.useEffect(()=>{const t=window.location.pathname.split("/");x(i(t[1])+" - Import"),w(t[1]),y(i(t[1])+" Import"),N("Your "+i(t[1])+" List"),v("You don't have any"+i(t[1])+" List"),c(g(i(t[1])+" - Import"))},[]);const[m,F]=o.useState(!0),[f,E]=o.useState(0),C=async()=>{const a="https://phpstack-1110393-3914892.cloudwaysapps.com/ALPYN%20electronics%20BOM-List%20Samplefile.xlsx";console.log(a);const t=document.createElement("a");t.href=a,t.target="_blank",t.click()},I=a=>{const t=a.target.files[0];_(t)},B=async a=>{a.preventDefault();const t=A.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:5e3});try{const n=new FormData(a.target),T=b+"_"+d+"_list";n.append("has_header",m),n.append("ignored_top_rows",f),n.append("type",T),n.append("excess_bom_file",S),(await u.importBomExcess(r,b,n)).status===200?(t.fire({icon:"success",timer:2e3,title:"Form submitted successfully",padding:"10px 20px"}),window.location.href=`/${d}/list/${r}`):t.fire({icon:"error",title:"Internal Server Error ,submitting form failed",padding:"10px 20px"})}catch{t.fire({icon:"error",title:"Internal Server Error ,submitting form failed",padding:"10px 20px"})}},D=async()=>{const a=await u.fetchSingleContact(r);if(a.status!=200)return;const t=a.data.data.contact;c(M(t))};return o.useEffect(()=>{D().then(()=>{k(!1)})},[r]),e($,{children:s("div",{className:"panel px-0 border-white-light dark:border-[#1b2e4b]",children:[s("div",{className:"flex justify-end flex-wrap gap-4 px-4",children:[e("div",{className:"flex",children:s("div",{children:[s("div",{className:"text-sm font-semibold mt-5",children:[l.first_name," ",l.last_name]}),e("div",{className:"text-s font-semibold ",children:l.email}),e("div",{className:"text-s font-semibold ",children:l.phone})]})}),s("div",{className:"shrink-0",children:[e("img",{src:H(l.image_data),alt:"Contact image",className:"w-20 ltr:ml-auto rtl:mr-auto"}),e("a",{className:"text-sm font-semibold mt-5  text-primary ",target:"_blank",href:`/contact/preview/${r}`,children:"View Contact"})]})]}),e("hr",{className:"border-white-light dark:border-[#849bbc] my-6"}),s("div",{className:"px-4 sm:px-6 lg:px-8",children:[e("section",{className:"border-b border-gray-200 pb-4",children:e("div",{className:"sm:flex sm:items-center sm:justify-between",children:e("h3",{className:"title-1",children:e("b",{children:p})})})}),s("div",{className:" p-6 bg-white shadow-md",children:[e("h1",{className:"text-2xl font-bold mb-5",children:h}),s("form",{onSubmit:B,children:[s("div",{className:"mb-4",children:[e("label",{htmlFor:"title",className:"block text-gray-700 text-sm font-bold mb-2",children:"Title"}),e("input",{type:"text",id:"title",name:"title",placeholder:`Enter your new ${d} list name`,required:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),s("div",{className:"mb-4",children:[s("label",{htmlFor:"file",className:"block text-gray-700 text-sm font-bold mb-2",children:["Upload your ",d," list"]}),e("input",{className:"block w-full py-2 px-3 text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer  dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400",id:"excess-bom-file",type:"file",onChange:I}),e("p",{className:"text-gray-600 text-xs italic mt-2",children:"* Please kindly note that there is a maximum limit of 1000 rows allowed in a single sheet of an Excel file."}),e("button",{type:"button",onClick:C,className:"mt-2 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Download Sample Data"})]}),s("div",{className:"flex items-center justify-between mb-4",children:[e("label",{htmlFor:"has_header",className:"block text-gray-700 text-sm font-bold mb-2",children:"Files has a Header"}),s("div",{className:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in",children:[e("input",{type:"checkbox",name:"has_header",id:"has_header",checked:m,onChange:()=>F(!m),className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),e("label",{htmlFor:"has_header",className:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"})]})]}),s("div",{className:"mb-4",children:[e("label",{htmlFor:"ignored_top_rows",className:"block text-gray-700 text-sm font-bold mb-2",children:"Ignored rows from top"}),e("input",{type:"number",id:"ignored_top_rows",name:"ignored_top_rows",min:"0",value:f,onChange:a=>E(a.target.value),className:"shadow appearance-none border rounded w-20 py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),e("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:h})]})]})]})]})})};export{J as default};
