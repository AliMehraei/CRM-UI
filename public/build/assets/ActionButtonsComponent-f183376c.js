import{u as g,a as x,G as v,b as t,F as N,j as c,H as w,I as y,J as C}from"./main-7587a7bd.js";import{a as T}from"./react-select-async.esm-4f8c9a58.js";import{S as j}from"./sweetalert2.all-85428551.js";const B=({formState:e})=>{const r=g(),m=x(a=>a.themeConfig),i=v(),o=new T,l=async(a="save")=>{r(w());const p=j.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3}),d=o[e.api];if(typeof d!="function"){console.log("fds","error api");return}const n=await d.call(o,e);if(n.isOk)e.action==="create"&&r(y()),p.fire({icon:"success",timer:2e3,title:"Form submitted successfully",padding:"10px 20px"}).then(()=>{if(a==="save"){const s=e.redirectTo.replace(":id",`${n.data.data.id}`);i(s,{replace:!0})}else if(e.action!=="create"){const s=e.createRoute;i(s,{replace:!0})}});else if(n.status===422){const s=n.data.data,h={hasError:!0,...Object.fromEntries(Object.entries(s).map(([f,b])=>[f,b[0]]))};r(C(h))}else p.fire({icon:"error",title:"Internal Server Error ,submitting form failed",padding:"10px 20px"})},u=()=>{const a=location.pathname.replace("/add","/list");e.action=="edit"?i(-1):i(a,{replace:!0})};return t(N,{children:t("div",{className:" sticky top-0 z-10 px-0 flex-1 py-2 ltr:xl:mr-6 rtl:xl:ml-6 px-10",children:t("div",{className:" ",children:c("div",{className:"flex justify-between items-center mb-6",children:[t("div",{className:"flex items-center",children:c("span",{className:"text-xl font-bold",children:[m.pageTitle," : "]})}),c("div",{className:"flex items-center gap-2",children:[t("button",{onClick:u,className:"btn btn-danger gap-2",children:"Back"}),t("button",{onClick:()=>l("new"),className:"btn btn-primary gap-2",children:"Save and new"}),t("button",{onClick:()=>l("save"),className:"btn btn-success gap-2",children:"Save"})]})]})})})})};export{B as A};
