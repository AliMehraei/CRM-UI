import{u as K,c as Q,r as n,d as X,h as Z,S as ee,bb as te,s as _,ad as g,j as e,e as ae,F as w,b as s,f as se,a6 as y,q as B,a as le}from"./main-bc7db150.js";const he=()=>{const c=K();Q();const[N,E]=n.useState(""),[O,P]=n.useState(""),[ne,D]=n.useState(""),[ie,$]=n.useState(""),[re,F]=n.useState(""),[k,I]=n.useState({}),[l,T]=n.useState({}),[S,o]=n.useState(!1),d=X(t=>t.contactForm),m=new le,j=Z(),i=j.contactId,h=j.id,[u,H]=n.useState("contact"),[z,oe]=n.useState([]),[A,R]=n.useState([]),f=ee.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:5e3}),V=te(),{pathname:v}=V;n.useEffect(()=>{c(_(N))},[c]),n.useEffect(()=>{W()},[]);const W=async()=>{o(!0);const a=v.split("/");H(a[1]=="availability-vendor"?"vendor":"contact"),E(g(a[1])+" - Confirmation"),P(a[1]),D("Add Your "+g(a[1])+" List"),$("Your "+g(a[1])+" List"),F("You don't have any"+g(a[1])+" List"),c(_(g(a[1])+" - Confirmation")),o(!1)},Y=async()=>{o(!0);const t=await m.bomItemSaveHeader(i,u,h,{headers:A});o(!1),t.status==200?window.location.href=`/${O}/process/${i}/${h}`:t.status==302&&f.fire({icon:"error",title:t.data.message,padding:"10px 20px"})},q=async()=>{if(v.split("/")[1]!="availability-vendor"){const t=await m.fetchSingleContact(i);if(t.status!=200)return;const a=t.data.data.contact;c(B(a))}else{const t=await m.fetchSingleVendor(i);if(t.status!=200)return;const a=t.data.data.vendor;c(B(a))}};n.useEffect(()=>{q()},[i]);const U=async()=>{if(!S){o(!0);const t=await m.bomItemConfirmation(i,u,h);o(!1),t.status==302&&(f.fire({icon:"error",title:t.data.message,padding:"10px 20px"}),setTimeout(()=>{const p=v.split("/");window.location.href=`/${p[1]}/list/${i}`},1e3));const a=t.data.data;I(a.configHeaders),T(a.BOMItemDetails.data)}};n.useEffect(()=>{U()},[]);const G=async t=>{const a=t.target.selectedIndex,p={selected_header:t.target.value,selected_header_index:a,bom_item_id:h,contact_id:i},{name:de,value:C}=t.target;R(b=>b.includes(C)?b:[...b,C]);const x=await m.selectedHeaderValidation(h,u,p);x.status==200?x.data.type==="error"?f.fire({icon:"error",title:x.data.msg,padding:"10px 20px"}):(x.data.type==="warning"&&f.fire({icon:"error",title:x.data.msg,padding:"10px 20px"}),document.querySelectorAll(".header-select").forEach(J=>{J.querySelectorAll("option").forEach((L,M)=>{z.includes(M)&&M!==0?L.setAttribute("disabled","disabled"):L.removeAttribute("disabled")})})):(f.fire({icon:"error",title:"The operation is failed",padding:"10px 20px"}),o(!1))};return S?e(ae,{}):e(w,{children:s("div",{className:"panel px-0 border-white-light dark:border-[#1b2e4b]",children:[s("div",{className:"flex justify-end flex-wrap gap-4 px-4",children:[e("div",{className:"flex",children:s("div",{children:[s("div",{className:"text-sm font-semibold mt-5",children:[d.first_name," ",d.last_name," | ",d.vendor_name]}),e("div",{className:"text-s font-semibold ",children:d.email}),e("div",{className:"text-s font-semibold ",children:d.phone})]})}),s("div",{className:"shrink-0",children:[e("img",{src:se(d.image_data),alt:"Contact image",className:"w-20 ltr:ml-auto rtl:mr-auto"}),s("a",{className:"text-sm font-semibold mt-5  text-primary ",target:"_blank",href:`/${u}/preview/${i}`,children:["View ",u]})]})]}),e("hr",{className:"border-white-light dark:border-[#849bbc] my-6"}),e("div",{className:"px-4 sm:px-6 lg:px-8",children:e("section",{className:"border-b border-gray-200 pb-4",children:e("div",{className:"sm:flex sm:items-center sm:justify-between",children:e("h3",{className:"title-1",children:e("b",{children:N})})})})}),s("div",{className:"my-4",children:[e("section",{className:" px-4 sm:px-6 lg:px-8 ",children:s("div",{className:"sm:flex sm:items-center sm:justify-between border-b border-gray-200 pb-4",children:[e("h3",{className:"title-1"}),e("div",{className:"flex mt-3 sm:ml-4 sm:mt-0 space-x-1",children:s("button",{id:"confirmlist-next-tour",type:"button",onClick:Y,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold flex items-center p-2 space-x-2 text-sm rounded border-primary-500",children:[e("span",{children:"Next step"}),e("svg",{className:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})]})})]})}),e("section",{id:"table-section-list1-tour",className:"dashboard-item-view-page  px-4 sm:px-6 lg:px-8 ",children:e("div",{className:"rounded-lg bg-white overflow-hidden shadow p-6",children:s("div",{className:"",children:[s("div",{className:"flex flex-col h-full",children:[e("div",{className:"flex flex-row items-center justify-between h-full space-x-3",children:e("h3",{className:"text-lg font-bold leading-6 text-gray-900",children:"Step 1: Match your column names"})}),e("p",{className:"text-sm font-medium text-gray-500 mt-4",children:"Please define each column stands for which definition                "})]}),e("form",{id:"save-headers-form",method:"POST",children:e("div",{className:"overflow-x-scroll mt-6",children:e("div",{children:s("div",{className:"grid grid-cols-12 gap-6",children:[s("div",{className:"col-span-2 flex flex-col divide-y",children:[e("div",{className:"bg-gray-100 rounded mb-2 p-2 text-left text-sm text-gray-900 font-bold",children:"Columns in your table"}),l[0]&&l[0].data&&Object.keys(l[0].data).map((t,a)=>e(y.Fragment,{children:e("div",{className:"px-2 h-14 flex items-center text-left truncate text-sm text-gray-900 font-semibold",children:l[0].data[t]})},a))]}),s("div",{className:"col-span-4 flex flex-col divide-y",children:[e("div",{className:"bg-gray-100 rounded mb-2 p-2 text-left text-sm text-gray-900 font-bold",children:"Fields in our system"}),l[0]&&l[0].data&&Object.keys(l[0].data).map((t,a)=>e(y.Fragment,{children:e("div",{className:"p-2 h-14 text-left truncate text-sm text-gray-500",children:s("select",{name:"headers[]",onChange:r=>G(r),className:"header-select w-full h-full border-0 bg-gray-100 rounded-md focus:ring-transparent text-black",children:[e("option",{value:"",children:"Ignore"}),Object.keys(k).map(r=>e("option",{value:r,children:k[r]},r))]})})},`${a}}_config`))]}),s("div",{className:"col-span-2 flex flex-col divide-y",children:[e("div",{className:"bg-gray-100 rounded mb-2 p-2 text-left text-sm text-gray-900 font-bold",children:"Sample data"}),l[1]&&l[1].data&&Object.keys(l[1].data).map((t,a)=>e(y.Fragment,{children:e("div",{className:"px-2 h-14 flex items-center text-left truncate text-sm text-gray-500",children:l[1].data[t]})},`${a}}_data`))]})]})})})})]})})}),e("section",{id:"table-section-list2-tour",className:"dashboard-item-view-page  px-4 sm:px-6 lg:px-8 mt-6",children:e("div",{className:"rounded-lg bg-white overflow-hidden shadow p-6",children:s("div",{className:"",children:[s("div",{className:"flex flex-row items-center justify-between h-full space-x-3",children:[e("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Your uploaded file data"}),e("div",{className:"flex justify-start",children:s("div",{className:"bg-yellow-300 rounded px-2 py-1 flex items-center space-x-1",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zM12 2.25V4.5m5.834.166l-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243l-1.59-1.59"})}),e("span",{className:"text-black text-sm",children:"Double click on the row to change file header"})]})})]}),e("div",{className:"overflow-x-scroll mt-6",children:e("div",{className:"flex flex-col",children:e("div",{className:"flex-grow",children:s("table",{children:[e("thead",{children:s("tr",{children:[e("th",{className:"",children:e("button",{"data-bom-item-id":"240",className:"remove-header-btn flex space-x-3 items-center justify-center w-full p-3 rounded hover:bg-gray-100 default-transition",children:e("svg",{className:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),l[0]&&l[0].data&&Object.keys(l[0].data).map((t,a)=>e(w,{children:s("th",{children:[" ",l[0].data[t]]},a)}))]})}),e("tbody",{children:l&&Object.keys(l).map((t,a)=>s("tr",{children:[e("td",{className:"border p-2",children:e("button",{type:"button","data-row-id":"66085",className:"bg-gray-200 ignored-switch toggle toggle-red bg-gray-200 relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200",role:"switch","aria-checked":"false",children:s("span",{className:"translate-x-0 translate-x-0 pointer-events-none relative inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200",children:[e("span",{className:"opacity-100 toggle-icon-1 ease-in duration-200 absolute inset-0 h-full w-full flex items-center justify-center transition-opacity","aria-hidden":"true",children:e("svg",{className:"h-3 w-3 text-gray-400",fill:"currentColor",viewBox:"0 0 12 12",children:e("path",{d:"M3.707 5.293a1 1 0 00-1.414 1.414l1.414-1.414zM5 8l-.707.707a1 1 0 001.414 0L5 8zm4.707-3.293a1 1 0 00-1.414-1.414l1.414 1.414zm-7.414 2l2 2 1.414-1.414-2-2-1.414 1.414zm3.414 2l4-4-1.414-1.414-4 4 1.414 1.414z"})})}),e("span",{className:"opacity-0 toggle-icon-2 ease-out duration-100 absolute inset-0 h-full w-full flex items-center justify-center transition-opacity","aria-hidden":"true",children:e("svg",{className:"h-3 w-3 text-red-500",fill:"none",viewBox:"0 0 12 12",children:e("path",{d:"M4 8l2-2m0 0l2-2M6 6L4 4m2 2l2 2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})})}),l[t]&&l[t].data&&Object.keys(l[t].data).map((r,p)=>e(w,{children:e("td",{children:l[t].data[r]},p)}))]},a))})]})})})}),e("div",{className:"mt-6"})]})})})]})]})})};export{he as default};
