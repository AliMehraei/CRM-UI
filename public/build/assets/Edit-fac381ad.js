import{u as g,a as _,b as e,ax as u,n as T,j as d,f as q,w as j,l as O,m as D,F as N,V as M,h as I,c as L,r as x,s as U,ay as k,d as A,e as R}from"./main-14f615f5.js";import{A as h}from"./react-select-async.esm-fa6aa9d3.js";import{S as v}from"./react-select.esm-f82d134e.js";import{G as y,A as B}from"./GenerateFields-622759ee.js";import{I as Q}from"./ImageUploadComponent-b994b13c.js";import{F as $}from"./FileUploadComponent-7e09e5eb.js";import{A as G}from"./AttachmentSection-b44113f0.js";import"./Select-aecb2a80.esm-a628f797.js";import"./ClearButtonComponent-f1847924.js";const H=()=>{var n,o,t,p,i,f,b,C,w,E,S,V,F;const r=g(),a=_(s=>s.excessForm),l=(s,P)=>{r(u({[s]:P}))},c=[{value:"none",label:"-None-"},{value:"email",label:"Email"},{value:"portal",label:"Portal"}],m={Header:{"Excess Image":e(Q,{id:"image",modelName:"excess",formState:a,formAttribute:"image",updateFormData:u}),"Account Name":e(h,{defaultOptions:!0,isMulti:!1,id:"account_id",name:"account_id",required:!0,placeholder:"Type at least 2 characters to search...",loadOptions:T,onChange:({value:s})=>{l("account_id",s)},defaultValue:{value:(n=a.account)==null?void 0:n.id,label:d("div",{className:"flex items-center",children:[a.account?e("img",{src:q(a.account.image),alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}):null,d("div",{children:[e("div",{className:"text-sm font-bold",children:(o=a.account)==null?void 0:o.account_name}),e("div",{className:"text-xs text-gray-500",children:(t=a.account)==null?void 0:t.email})]})]},(p=a.account)==null?void 0:p.id)},className:"flex-1"}),Contact:e(h,{defaultOptions:!0,isMulti:!1,id:"contact_id",name:"contact_id",placeholder:"Type at least 2 characters to search...",loadOptions:j,onChange:({value:s})=>{l("contact_id",s)},defaultValue:{value:(i=a.contact)==null?void 0:i.id,label:d("div",{className:"flex items-center",children:[a.contact?e("img",{src:a.contact.image??"/assets/images/user-profile.jpeg",alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}):null,d("div",{children:[e("div",{className:"text-sm font-bold",children:(f=a.contact)==null?void 0:f.name}),e("div",{className:"text-xs text-gray-500",children:(b=a.contact)==null?void 0:b.email})]})]},(C=a.contact)==null?void 0:C.id)},className:"flex-1"}),Email:e("input",{id:"email",type:"text",name:"email",className:"form-input flex-1 ",defaultValue:a.email,onChange:s=>l(s.target.name,s.target.value)}),Currency:e(v,{options:O,onChange:({value:s})=>{l("currency",s)},defaultValue:O.find(s=>s.value==a.currency),className:"flex-1"}),"Portal Excess Id":e("input",{id:"portal_excess_id",type:"text",name:"portal_excess_id",className:"form-input flex-1 ",defaultValue:a.portal_excess_id,onChange:s=>l(s.target.name,s.target.value)})},"":{"Excess Owner":e(h,{defaultOptions:!0,isMulti:!1,id:"owner_id",name:"owner_id",placeholder:"Type at least 2 characters to search...",loadOptions:D,onChange:({value:s})=>{l("owner_id",s)},defaultValue:{value:(w=a.owner)==null?void 0:w.id,label:d("div",{className:"flex items-center",children:[a.owner?e("img",{src:q(a.owner.avatar),alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}):null,d("div",{children:[e("div",{className:"text-sm font-bold",children:((E=a.owner)==null?void 0:E.first_name)+" "+((S=a.owner)==null?void 0:S.last_name)}),e("div",{className:"text-xs text-gray-500",children:(V=a.owner)==null?void 0:V.email})]})]},(F=a.owner)==null?void 0:F.id)},className:"flex-1"}),"Excess File":e($,{id:"excess_file",modelName:"excess",formState:a,formAttribute:"excess_file",updateFormData:u}),"Excess Source":e(v,{name:"excess_source",id:"excess_source",options:c,onChange:({value:s})=>{l("excess_source",s)},defaultValue:c.find(s=>s.value==a.excess_source),className:"flex-1"}),"Secondary Email":e("input",{id:"secondary_email",type:"text",name:"secondary_email",defaultValue:a.secondary_email,className:"form-input flex-1 ",onChange:s=>l(s.target.name,s.target.value)}),"Email Opt Out":e("input",{id:"email_opt_out",type:"checkbox",name:"email_opt_out",className:"form-checkbox",checked:a.email_opt_out,onChange:s=>l(s.target.name,s.target.checked)}),"Exchange Rate":e("input",{id:"exchangeRate",type:"text",value:"1",placeholder:"Readonly input hereâ€¦",className:"flex-1 form-input disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",disabled:!0})}};return e(N,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(y,{fields:m})})})},z=()=>{const r=g(),a=_(n=>n.excessForm),l=(n,o)=>{r(u({[n]:o}))},c=[{value:"none",label:"-None-"},{value:"line_bid",label:"Line Bid"},{value:"package_bid",label:"Package Bid"},{value:"consignment",label:"Consignment"},{value:"closed",label:"Closed"}],m={Status:{"Excess Type":e(v,{options:c,name:"excess_type",id:"excess_type",onChange:({value:n})=>{l("excess_type",n)},defaultValue:c.find(n=>n.value==a.excess_type),className:"flex-1"})},"":{"Excess Name":e("input",{id:"excess_name",type:"text",name:"excess_name",className:"form-input flex-1 ",defaultValue:a.excess_name,onChange:n=>l(n.target.name,n.target.value)})}};return e(N,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(y,{fields:m})})})},J=()=>{var m,n,o;const r=g(),a=_(t=>t.excessForm),l=(t,p)=>{r(u({[t]:p}))},c={"Excess Line":{"Product name":e(h,{defaultOptions:!0,isMulti:!1,id:"product_name",name:"product_name",required:!0,placeholder:"Type at least 2 characters to search...",loadOptions:M,onChange:({value:t})=>{l("product_id",t)},defaultValue:{value:(m=a.product)==null?void 0:m.id,label:e("div",{className:"flex items-center",children:e("div",{className:"text-sm font-bold",children:(n=a.product)==null?void 0:n.product_name})},(o=a.product)==null?void 0:o.id)},className:"flex-1"}),"Customer Internal No.":e("input",{id:"customer_internal_no",type:"text",name:"customer_internal_no",className:"form-input flex-1 ",defaultValue:a.customer_internal_no,onChange:t=>l(t.target.name,t.target.value)}),Quantity:e("input",{id:"quantity",type:"text",name:"quantity",className:"form-input flex-1 ",defaultValue:a.quantity,required:!0,onChange:t=>l(t.target.name,t.target.value)}),Cost:e("input",{id:"cost",type:"text",name:"cost",className:"form-input flex-1 ",defaultValue:a.cost,required:!0,onChange:t=>l(t.target.name,t.target.value)})},"":{"Date Code":e("input",{id:"date_code",type:"text",name:"date_code",className:"form-input flex-1 ",defaultValue:a.date_code,onChange:t=>l(t.target.name,t.target.value)}),SPQ:e("input",{id:"spq",type:"text",name:"spq",className:"form-input flex-1 ",defaultValue:a.spq,onChange:t=>l(t.target.name,t.target.value)}),MOQ:e("input",{id:"moq",type:"text",name:"moq",defaultValue:a.moq,className:"form-input flex-1 ",onChange:t=>l(t.target.name,t.target.value)}),Comment:e("input",{id:"comment",type:"text",name:"comment",defaultValue:a.comment,className:"form-input flex-1 ",onChange:t=>l(t.target.name,t.target.value)})}};return e(N,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(y,{fields:c})})})},K=()=>{const a=I().id;return d("div",{className:"mt-8 px-4",children:[e(H,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(z,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(J,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(G,{modelId:a,modelName:"excess"})]})},ne=()=>{const{hasPermission:r}=L(),a=_(i=>i.excessForm),[l,c]=x.useState(!0),n=I().id,o=new R,t=g();x.useEffect(()=>{t(U("Excess Edit"))}),x.useEffect(()=>{t(k())},[]);const p=async()=>{const i=await o.fetchSingleExcess(n);if(i.status!=200)return;const f=i.data.data.excess;f.oldImage=f.image,t(u(f))};return x.useEffect(()=>{p().then(()=>{c(!1)})},[n]),x.useEffect(()=>{t(u({api:"updateSingleExcess",redirectTo:"/excess/edit/:id",action:"edit"}))},[]),l?e(A,{}):!r("update-excess")||l?e(A,{}):d("div",{className:"px-4",children:[e(B,{formState:a,resetForm:k}),e("div",{className:"flex xl:flex-row flex-col gap-2.5",children:e("div",{className:"panel px-0 flex-1 py-6 ltr:xl:mr-6 rtl:xl:ml-6 overflow-hidden",children:e(K,{})})})]})};export{ne as default};
