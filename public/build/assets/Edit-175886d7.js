import{u as g,e as y,a as N,b as e,j as n,F as M,am as _,r as i,c as R,h as E,s as Y,d as q,an as Q}from"./main-8c659d75.js";import{A as k}from"./react-select-async.esm-e686b623.js";import{G as U,A as $}from"./GenerateFields-e427e4d2.js";import{S as x}from"./react-select.esm-9af9e55b.js";import{s as B,d as W,c as G,b as I,o as H,f as z,e as J,w as K,m as X,l as Z,t as ee,k as ae,i as le,p as te,j as se,z as re}from"./CommonFunctions-a8ba45d1.js";import{F}from"./index-780f1f07.js";/* empty css                  */import"./Select-aecb2a80.esm-4b2d5e83.js";import"./sweetalert2.all-120fb9f5.js";const de=()=>{var b,o,p,d,s;const h=g();new y;const a=N(l=>l.taskForm),r=(l,v)=>{h(_({[l]:v}))},u=[{value:"none",label:"-None-"},{value:"account_contact",label:"Account or Contact exist already"},{value:"wrong_branch",label:"Wrong Branch"},{value:"wrong_department",label:"Wrong Department"},{value:"does_not_exist",label:"Does Not Exist Anymore"},{value:"bankruptcy",label:"Bankruptcy"},{value:"other",label:"Other"}],c=[{value:"none",label:"-None-"},{value:"0_cold_task",label:"0.0 Cold task / unqualified (CLU)"},{value:"1_cold_task",label:"1.0 Cold task qualified (CLQ)"},{value:"2_first_contract",label:"2.0 First contact made (FCM)"},{value:"3_warm_task",label:"3.0 warm task qualified (WLQ)"},{value:"4_hot_task",label:"4.0 Hot task (HLQ)"},{value:"close_task",label:"Close Task / Lost Task"}],m={"Task Information":{"Task Owner":e(k,{isMulti:!1,id:"owner_id",placeholder:"Type at least 2 characters to search...",name:"owner_id",loadOptions:B,onChange:({value:l})=>{r("owner_id",l)},className:"flex-1",required:!0,defaultValue:{value:(b=a.owner)==null?void 0:b.id,label:n("div",{className:"flex items-center",children:[a.owner?e("img",{src:a.owner.image??"/assets/images/user-profile.jpeg",alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}):null,n("div",{children:[e("div",{className:"text-sm font-bold",children:((o=a.owner)==null?void 0:o.first_name)+" "+((p=a.owner)==null?void 0:p.last_name)}),e("div",{className:"text-xs text-gray-500",children:(d=a.owner)==null?void 0:d.email})]})]},(s=a.owner)==null?void 0:s.id)}}),Subject:e("input",{id:"subject",name:"subject",className:"form-input flex-1 ",onChange:l=>r(l.target.name,l.target.value),required:!0,defaultValue:a.subject}),"Dua Date":e(F,{name:"due_date",className:"form-input flex-1",defaultValue:a.due_date,placeholder:"MM DD YYYY",options:{dateFormat:"d-m-Y",defaultDate:`${a.due_date?new Date(a.due_date):""}`},onChange:(l,v)=>r("due_date",v)}),Status:e(x,{options:c,name:"status",id:"status",onChange:({value:l})=>{r("status",l)},className:"flex-1",defaultValue:c.find(l=>l.value==a.status)}),Priority:e(x,{options:u,name:"priority",id:"priority",onChange:({value:l})=>{r("priority",l)},defaultValue:u.find(l=>l.value==a.priority),className:"flex-1"}),Repeat:e("input",{id:"repeat",type:"checkbox",name:"repeat",disabled:!0,className:"form-checkbox",onChange:l=>r(l.target.name,l.target.checked),defaultChecked:a.repeat})},"Description Information":{Description:e("textarea",{id:"description",rows:6,name:"description",className:"form-textarea flex-1",placeholder:"",defaultValue:a.description,onChange:l=>r(l.target.name,l.target.value)})}};return e(M,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(U,{fields:m})})})},ne=()=>{const h=g();new y;const a=N(s=>s.taskForm),[r,u]=i.useState(a.reminder),[c,m]=i.useState(a.reminder_on_date),[b,o]=i.useState(a.reminder_on_time),p=[{value:"email",label:"Email"},{value:"popup",label:"PopUp"},{value:"both",label:"Both"}],d=(s,l)=>{s==="reminder"&&u(l),h(_({[s]:l}))};return e(M,{children:n("div",{className:"p-6 border rounded-md",children:[n("div",{className:"flex items-center space-x-4",children:[e("label",{className:"text-lg font-semibold",children:"Reminder:"}),e("input",{id:"reminder",type:"checkbox",name:"reminder",className:"form-checkbox h-5 w-5 text-blue-600",onChange:s=>d(s.target.name,s.target.checked),defaultChecked:a.reminder})]}),r&&n("div",{className:"my-4 flex items-center space-x-4",children:[e("label",{children:"On:"}),e(F,{className:"p-2 border rounded-md form-input flex-1","data-enable-time":!1,placeholder:"MM DD YYYY",value:c,onChange:(s,l)=>{m(l),d("reminder_on_date",l)},options:{dateFormat:"d-m-Y"}}),e("label",{children:"At:"}),e(F,{className:"p-2 border rounded-md form-input flex-1","data-enable-time":!0,"data-no-calendar":!0,value:b,onChange:s=>{o(s[0]),d("reminder_on_time",s[0])}}),e("label",{children:"Notify Type:"}),e(x,{id:"reminder_type",name:"reminder_type",onChange:({value:s})=>{d("reminder_type",s)},className:"flex-1",options:p,defaultValue:p.find(s=>s.value==a.reminder_type)})]})]})})},oe=()=>{var C,w,A,T,D,P,j,V;const h=g();new y;const a=N(t=>t.taskForm),r=(t,f)=>{h(_({[t]:f}))},u=[{value:"App\\Models\\Lead",label:"Lead"},{value:"App\\Models\\Contact",label:"Contact"}],c=[{value:"App\\Models\\Account",label:"Account",api:I,labelFelid:"account_name"},{value:"App\\Models\\Vendor",label:"Vendor",api:H,labelFelid:"vendor_name"},{value:"App\\Models\\Quote",label:"Quote",api:z,labelFelid:"subject"},{value:"App\\Models\\Rfq",label:"Rfq",api:J,labelFelid:"rfq_name"},{value:"App\\Models\\Excess",label:"Excess",api:K,labelFelid:"excess_name"},{value:"App\\Models\\Availability",label:"Availability",api:X,labelFelid:"availability_name"},{value:"App\\Models\\Product",label:"Product",api:Z,labelFelid:"product_name"},{value:"App\\Models\\Manufacturer",label:"Manufacturer",api:ee,labelFelid:"name"},{value:"App\\Models\\Deal",label:"Deals",api:ae,labelFelid:"deal_name"},{value:"App\\Models\\SalesOrder",label:"Sales Order",api:le,labelFelid:"subject"},{value:"App\\Models\\PurchaseOrder",label:"Purchase Order",api:te,labelFelid:"subject"},{value:"App\\Models\\Invoice",label:"Invoice",api:se,labelFelid:"subject"},{value:"App\\Models\\VendorRfq",label:"Vendor Rfq",api:re,labelFelid:"vendor_rfq_name"}],[m,b]=i.useState(a.userable_type),[o,p]=i.useState(a.moduleable_type),[d,s]=i.useState({value:(C=a.userable)==null?void 0:C.id,label:n("div",{className:"flex items-center",children:[a.userable?e("img",{src:a.userable.image??"/assets/images/user-profile.jpeg",alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}):null,n("div",{children:[e("div",{className:"text-sm font-bold",children:`${(w=a.userable)==null?void 0:w.first_name} ${(A=a.userable)==null?void 0:A.last_name}`}),e("div",{className:"text-xs text-gray-500",children:(T=a.userable)==null?void 0:T.email})]})]},(D=a.userable)==null?void 0:D.id)}),l=(P=c.find(t=>t.value===a.moduleable_type))==null?void 0:P.labelFelid,[v,S]=i.useState({value:(j=a.moduleable)==null?void 0:j.id,label:e("div",{className:"flex items-center",children:e("div",{children:e("div",{className:"text-sm font-bold",children:a.moduleable[l]})})},(V=a.moduleable)==null?void 0:V.id)}),L=t=>(c.find(O=>O.value===o)??{value:"App\\Models\\Account",label:"Account",api:I}).api.call(null,t);return e(M,{children:n("div",{className:"p-6 border rounded-md",children:[n("div",{className:"flex items-center space-x-4 mb-5",children:[e("label",{className:"font-semibold",children:"Lead | Contact:"}),e(x,{id:"userable_type",name:"userable_type",defaultValue:u.find(t=>t.value==a.userable_type),onChange:({value:t})=>{b(t),r("userable_type",t),s(null)},className:"flex-1",options:u}),e(k,{isMulti:!1,id:"userable_id",placeholder:"Type at least 2 characters to search...",name:"userable_id",value:d,menuPortalTarget:document.body,menuPlacement:"top",loadOptions:m==="App\\Models\\Lead"?W:G,onChange:({value:t,label:f})=>{s({value:t,label:f}),r("userable_id",t)},className:"flex-1",required:!0},m)]}),n("div",{className:"flex items-center space-x-4",children:[e("label",{className:"font-semibold",children:"Select Module :"}),e(x,{id:"moduleable_type",name:"moduleable_type",menuPortalTarget:document.body,menuPlacement:"top",defaultValue:c.find(t=>t.value==a.moduleable_type),onChange:({value:t})=>{p(t),r("moduleable_type",t),S(null)},className:"flex-1",options:c}),e(k,{isMulti:!1,id:"moduleable_id",menuPortalTarget:document.body,menuPlacement:"top",placeholder:"Type at least 2 characters to search...",name:"moduleable_id",value:v,loadOptions:t=>L(t),onChange:({value:t,label:f})=>{S({value:t,label:f}),r("moduleable_id",t)},className:"flex-1",required:!0},o)]})]})})},ie=()=>n("div",{className:"mt-8 px-4",children:[e(de,{},"leadInfo"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(ne,{},"Reminder"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(oe,{},"type"),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"})]}),xe=()=>{const{hasPermission:h}=R(),a=N(d=>d.taskForm),[r,u]=i.useState(!0),m=E().id,b=new y,o=g();i.useEffect(()=>{o(Y("Task Edit"))});const p=async()=>{const d=await b.fetchSingleTask(m);if(d.status!=200)return;const s=d.data.data.task;o(_(s))};return i.useEffect(()=>{p().then(()=>{u(!1)})},[m]),i.useEffect(()=>{o(_({api:"updateSingleTask",redirectTo:"/task/edit/:id",action:"edit"}))},[]),r?e(q,{}):!h("update-task")||r?e(q,{}):n("div",{className:"px-4",children:[e($,{formState:a,resetForm:Q}),e("div",{className:"flex xl:flex-row flex-col gap-2.5",children:e("div",{className:"panel px-0 flex-1 py-6 ltr:xl:mr-6 rtl:xl:ml-6 overflow-hidden",children:e(ie,{})})})]})};export{xe as default};
