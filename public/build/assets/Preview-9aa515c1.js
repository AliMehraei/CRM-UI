import{c as U,u as z,r as l,h as W,d as X,s as G,ax as E,aX as i,j as t,e as H,b as n,f as J,i as D,a as K}from"./main-d43b918e.js";import{A as Y}from"./ActionButtonsPreview-ba9703c7.js";import{I as c}from"./InformationSectionPreview-2b5daa63.js";import{T as m}from"./TableSectionPreview-49d99044.js";import{A as Z}from"./AttachmentSection-46c244f1.js";import{V as ee}from"./CommonIcons-e725f090.js";import{E as ae}from"./ExtraEmailLogDataSectionPreview-3965f967.js";const ce=()=>{var g,w,y,O,x,j,k,S;const{hasPermission:u}=U(),s=z(),[f,C]=l.useState(!0),o=W().id,F=new K,a=X(e=>e.vendorRfqForm),[I,b]=l.useState(!1),[d,L]=l.useState(null);l.useEffect(()=>{s(G("Vendor RFQ Preview"))});const M=()=>{window.print()},Q=async()=>{const e=await F.fetchSingleVendorRfq(o);if(e.status!=200)return;const r=e.data.data.vendorRfq;s(i(r))};l.useEffect(()=>{a.iso_upload&&E("vendorRfq","iso_upload",a.iso_upload).then(e=>{s(i({iso_upload_preview:e}))}),a.doc_upload&&E("vendorRfq","doc_upload",a.doc_upload).then(e=>{s(i({doc_upload_preview:e}))})},[]);const p={leftObject:[{label:"Vendor RFQ Name",value:a.vendor_rfq_name},{label:"Vendor Name",value:(g=a.vendor)==null?void 0:g.vendor_name},{label:"Status",value:a.status},{label:"Email",value:a.email},{label:"Currency",value:a.currency},{label:"Related RFQs",value:(w=a.related_rfqs)==null?void 0:w.map(e=>e.rfq_name)}],rightObject:[{label:"Date",value:a.date},{label:"Vendor RFQ Number",value:a.vendor_rfq_number},{label:"Vendor RFQ Owner",value:`${((y=a.owner)==null?void 0:y.first_name)??""} ${((O=a.owner)==null?void 0:O.last_name)??""}`},{label:"Created By",value:`${((x=a.creator)==null?void 0:x.first_name)??""} ${((j=a.creator)==null?void 0:j.last_name)??""}`},{label:"Modified By",value:`${((k=a.modifier)==null?void 0:k.first_name)??""} ${((S=a.modifier)==null?void 0:S.last_name)??""}`},{label:"Email Opt Out",value:a.email_opt_out==1?"True":"False"},{label:"Exchange Rate",value:a.exchange_rate}]},h={leftObject:[{label:"Requested Products",value:a.requested_products.map(e=>{var r;return(r=e==null?void 0:e.product)==null?void 0:r.product_name})}],rightObject:[{label:"Is full",value:a.is_full==1?"True":"False"}]},T=[{key:"rfq_name",label:"Source RFQ",model:"rfq"},{key:"rfq_owner_name",label:"RFQ Owner Name"},{key:"product_name",label:"Product",model:"product"},{label:"is Alt for this Product",key:"alt_product"}],V=[{key:"product_name",label:"Offered MPN",model:"product"},{key:"name",label:"Offered Manufacturer",model:"manufacturer"},{label:"Offered Quantity",key:"quantity"},{label:"Offered Price USD",key:"price"},{label:"D/C",key:"dc"}],A=[{label:"Subject",key:"subject"},{label:"Reciver Mail",key:"receiver_mail"},{label:"Sender Mail",key:"sender_email"},{label:"Sender Type",key:"sender_type"},{label:"Status",key:"status"},{label:"Created time",key:"created_at",format:e=>new Date(e).toISOString().split("T")[0]},{label:"Action",key:"action",render:e=>t("div",{onClick:()=>B(e),className:"flex hover:text-info",children:t(ee,{})})}];let v={leftObjects:[],rightObjects:[]};const B=e=>{var r,N,q,R,$,P;v={leftObjects:[{label:"Sender Name",value:`${(e.sender_name??"").substring(0,20)}${e.sender_name&&e.sender_name.length>15?"...":""}`},{label:"Is Open",value:`${e.is_open??""}`},{label:"Creator",value:`${((r=e.creator)==null?void 0:r.first_name)??""} ${((N=e.creator)==null?void 0:N.last_name)??""}`},{label:"Modifier",value:`${((q=e.modifier)==null?void 0:q.first_name)??""} ${((R=e.modifier)==null?void 0:R.last_name)??""}`},{label:"Mail Status",value:`${e.mail_status??""}`}],rightObjects:[{label:"Owner",value:`${(($=e.owner)==null?void 0:$.first_name)??""} ${((P=e.owner)==null?void 0:P.last_name)??""}`},{label:"Sent At",value:`${e.sent_at??""}`},{label:"Tracking Uuid",value:`${e.tracking_uuid??""}`},{label:"Type",value:`${e.type??""}`},{label:"Opened At",value:`${e.opened_at??""}`}]},L(v),b(!0)},_=()=>{b(!1)};return l.useEffect(()=>{Q().then(()=>{C(!1)})},[o]),!u("read-vendor-rfq")||f?t(H,{}):n("div",{children:[t("div",{className:"flex items-center lg:justify-end justify-center flex-wrap gap-4 mb-6",children:t(Y,{loading:f,hasPermission:u,modelId:o,exportTable:M,routeModel:"vendor_rfq",permissionModel:"vendor-rfq"})}),n("div",{className:"panel",children:[n("div",{className:"flex justify-between flex-wrap gap-4 px-4",children:[t("div",{className:"text-2xl font-semibold uppercase",children:"Vendor RFQ"}),t("div",{className:"shrink-0",children:t("img",{src:J(a.image_data),alt:"vendorRfq image",className:"w-20 ltr:ml-auto rtl:mr-auto"})})]}),t("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t(c,{title:"Vendor RFQ Information",leftObjects:p.leftObject,rightObjects:p.rightObject}),t("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t(m,{title:"Requested Products",items:a.requested_products,columns:T}),t("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t(m,{title:"Offered Products",items:a.offered_products,columns:V}),t(c,{title:"Development ",leftObjects:h.leftObject,rightObjects:h.rightObject}),t("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t(c,{title:"Date information",leftObjects:[{label:"Created Date",value:D(a.created_at)}],rightObjects:[{label:"Modified Date",value:D(a.updated_at)}]}),t("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t(Z,{modelId:o,modelName:"vendorRfq"}),t("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t(m,{title:"Email Logs",items:a.emaillogs,columns:A}),I&&d&&n("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 p-8 bg-white shadow-md rounded z-50 border  shadow-gray-300",children:[t("div",{className:"absolute top-2 right-2 cursor-pointer",onClick:_,children:t("svg",{className:"w-6 h-6 text-gray-600 hover:text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),t(ae,{title:"Email Log",leftObjects:d.leftObjects,rightObjects:d.rightObjects}),t("div",{className:"mt-auto px-2 py-3 sm:flex sm:flex-row-reverse sm:px-3 my-5",children:t("button",{className:"fixed bottom-5 w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",onClick:_,children:"Close"})})]})]})]})};export{ce as default};
