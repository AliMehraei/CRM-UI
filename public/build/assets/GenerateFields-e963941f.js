import{r as f,a as g,b as e,F as h,j as r,ap as E,u as y,J as j,aq as b,e as C,S as O,a9 as A,ar as F}from"./main-8d5d8e48.js";const T=()=>{const[i,n]=f.useState("0"),a=g(t=>t.formErrors),c=t=>{n(s=>s===t?"":t)};return a.hasError?e("div",{className:"mb-5",children:e("div",{className:"space-y-2 font-semibold",children:r("div",{className:"border border-danger rounded dark:border-danger",children:[r("button",{type:"button",className:"p-4 w-full flex items-center text-white-dark dark:bg-[#1b2e4b] !text-danger",onClick:()=>c("1"),children:["You have error on submitting form ,Click here to show",e("div",{className:"ltr:ml-auto rtl:mr-auto rotate-180"})]}),e("div",{children:e(E,{duration:700,height:i==="1"?"auto":0,children:e("div",{className:"space-y-2 p-4 text-white-dark text-[13px] border-t border-danger dark:border-danger",children:Object.entries(a).filter(([t])=>t!=="hasError").map(([t,s])=>e("div",{className:"flex items-center p-3.5 rounded text-danger bg-danger-light dark:bg-danger-dark-light",children:r("span",{className:"ltr:pr-2 rtl:pl-2",children:[r(h,{children:[" ",s," "]}),"."]})},t))})})})]})})}):e(h,{})},q=({formState:i,resetForm:n,disabled:a=!1})=>{const c=y(),t=g(d=>d.themeConfig),s=j(),l=new C,u=async(d="save")=>{c(b());const p=O.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:5e3}),x=await A(i.api);try{const o=await x.call(l,i);if(o.isOk)i.action==="create"&&c(n()),p.fire({icon:"success",timer:2e3,title:"Form submitted successfully",padding:"10px 20px"}).then(()=>{if(d==="save"){const m=i.redirectTo.replace(":id",`${o.data.data.id}`);s(m,{replace:!0})}else if(i.action!=="create"){const m=i.createRoute;s(m,{replace:!0})}});else if(o.status===422){const m=o.data.data,N={hasError:!0,...Object.fromEntries(Object.entries(m).map(([k,w])=>[k,w[0]]))};c(F(N)),p.fire({icon:"error",html:`<h5>Form Validation Error</h5>
                        <span style="font-size: 12px">Please Check fields</span>
                        `,padding:"10px 20px"})}else p.fire({icon:"error",title:"Internal Server Error ,submitting form failed",padding:"10px 20px"})}catch(o){console.error(o),p.fire({icon:"error",title:"Internal Server Error ,submitting form failed",padding:"10px 20px"})}},v=()=>{const d=location.pathname.replace("/add","/list");i.action=="edit"?s(-1):s(d,{replace:!0})};return f.useEffect(()=>{c(b())},[]),r(h,{children:[e("div",{className:" sticky top-0 z-10 px-0 flex-1 py-2 ltr:xl:mr-6 rtl:xl:ml-6 px-10",children:e("div",{className:" ",children:r("div",{className:"flex justify-between items-center mb-6",children:[e("div",{className:"flex items-center",children:r("span",{className:"text-xl font-bold",children:[t.pageTitle," : "]})}),r("div",{className:"flex items-center gap-2",children:[e("button",{onClick:v,className:"btn btn-danger gap-2",children:"Back"}),e("button",{disabled:a,onClick:()=>u("new"),className:"btn btn-primary gap-2",children:"Save and new"}),e("button",{disabled:a,onClick:()=>u("save"),className:"btn btn-success gap-2",children:"Save"})]})]})})}),e("div",{className:"",children:e("div",{className:"item-center",children:e(T,{})})})]})},P=()=>e("span",{className:"text-red-500",children:" *"}),B=({fields:i})=>{const n=g(a=>a.formErrors);return e(h,{children:Object.entries(i).map(([a,c],t)=>e("div",{className:"lg:w-1/2 w-full ltr:lg:mr-6 rtl:lg:ml-6 mb-6",children:r("div",{className:"",children:[e("div",{className:"text-lg",children:a?`${a}:`:e("div",{className:"mt-10"})}),Object.entries(c).map(([s,l])=>e("div",{className:Object.keys(n).length>1&&n[l.props.name]?"mt-4 items-center has-error":"mt-4 items-center",children:r("div",{className:"flex",children:[r("label",{className:"ltr:mr-2 rtl:ml-2 w-1/3 mb-0 mt-2",children:[s,l.props.required&&e(P,{})]},s),r("div",{className:"w-full",children:[l,Object.keys(n).length>1&&n[l.props.name]&&r("div",{className:"text-danger mt-1",children:[" ",n[l.props.name]]})]})]})},s))]},a)},`${a}_${t}`))})};export{q as A,B as G,P as R};
