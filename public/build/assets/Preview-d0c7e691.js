import{c as $,u as E,r as t,h as Q,d as R,s as B,Y as y,j as a,e as _,b as d,f as H,i as C,b8 as W,a as U}from"./main-47e64be7.js";import{A as V}from"./ActionButtonsPreview-03c2cfec.js";import{I as w}from"./InformationSectionPreview-951780ca.js";import{M as Y}from"./MultipleLineSectionPreview-273337b9.js";import{A as z}from"./AttachmentSection-ed14aaa0.js";import"./CommonIcons-d33424d3.js";const le=()=>{var m,p,v,f,h,k,A,M,g;const{hasPermission:u}=$(),c=E(),[j,F]=t.useState(""),[r,L]=t.useState({}),[i,x]=t.useState({}),[n,S]=t.useState(!0),o=Q().id,D=new U,e=R(l=>l.taskForm);t.useEffect(()=>{c(B("Task Preview"))});const T=()=>{window.print()},N=async()=>{const l=await D.fetchSingleTask(o);if(l.status!=200)return;const s=l.data.data.task;c(W(s))};t.useEffect(()=>{N().then(()=>{S(!1)})},[o]);const O=[{value:"App\\Models\\Lead",label:"Lead"},{value:"App\\Models\\Contact",label:"Contact"}],P=[{value:"App\\Models\\Account",label:"Account",labelField:"account_name"},{value:"App\\Models\\Vendor",label:"Vendor",labelField:"vendor_name"},{value:"App\\Models\\Quote",label:"Quote",labelField:"subject"},{value:"App\\Models\\Rfq",label:"Rfq",labelField:"rfq_name"},{value:"App\\Models\\Excess",label:"Excess",labelField:"excess_name"},{value:"App\\Models\\Availability",label:"Availability",labelField:"availability_name"},{value:"App\\Models\\Product",label:"Product",labelField:"product_name"},{value:"App\\Models\\Manufacturer",label:"Manufacturer",labelField:"name"},{value:"App\\Models\\Deal",label:"Deals",labelField:"deal_name"},{value:"App\\Models\\SalesOrder",label:"Sales Order",labelField:"subject"},{value:"App\\Models\\PurchaseOrder",label:"Purchase Order",labelField:"subject"},{value:"App\\Models\\Invoice",label:"Invoice",labelField:"subject"},{value:"App\\Models\\VendorRfq",label:"Vendor Rfq",labelField:"vendor_rfq_name"}];t.useEffect(()=>{const l=P.find(s=>s.value===e.moduleable_type);L(l),e.moduleable&&F(e.moduleable[l==null?void 0:l.labelField]),x(O.find(s=>s.value===e.userable_type))},[e.moduleable_type]);const q=[{value:"-None-",label:"-None-"},{value:"Account or Contact exist already",label:"Account or Contact exist already"},{value:"Wrong Branch",label:"Wrong Branch"},{value:"Wrong Department",label:"Wrong Department"},{value:"Does Not Exist Anymore",label:"Does Not Exist Anymore"},{value:"Bankruptcy",label:"Bankruptcy"},{value:"Hoch",label:"Hoch"},{value:"Other",label:"Other"}],I=[{value:"-None-",label:"-None-"},{value:"Abgeschlossen",label:"Abgeschlossen"},{value:"0.0 Cold task / unqualified (CLU)",label:"0.0 Cold task / unqualified (CLU)"},{value:"1.0 Cold task qualified (CLQ)",label:"1.0 Cold task qualified (CLQ)"},{value:"2.0 First contact made (FCM)",label:"2.0 First contact made (FCM)"},{value:"3.0 warm task qualified (WLQ)",label:"3.0 warm task qualified (WLQ)"},{value:"4.0 Hot task (HLQ)",label:"4.0 Hot task (HLQ)"},{value:"Close Task / Lost Task",label:"Close Task / Lost Task"}],b={leftObjects:[{label:"Task Owner",value:`${(m=e.owner)==null?void 0:m.first_name} ${(p=e.owner)==null?void 0:p.last_name}`},{label:"Subject",value:`${e.subject}`},{label:"Due Date",value:e.due_date},{label:"Contact | Contact",value:(i==null?void 0:i.label)+`: ${((v=e.userable)==null?void 0:v.name)??((f=e.userable)==null?void 0:f.first_name)+" "+((h=e.userable)==null?void 0:h.last_name)} `},{label:"Related To",value:(r==null?void 0:r.label)+": "+j},{label:"Status",value:y(e.status,I)}],rightObjects:[{label:"Priority",value:y(e.priority,q)},{label:"Repeat",value:e.repeat},{label:"Created By",value:`${(k=e.creator)==null?void 0:k.first_name} ${(A=e.creator)==null?void 0:A.last_name}`},{label:"Modified By",value:`${(M=e.modifier)==null?void 0:M.first_name} ${(g=e.modifier)==null?void 0:g.last_name}`},{label:"Closed Time",value:`${e.closed_date}`}]};return n?a(_,{}):!u("read-task")||n?a(_,{}):d("div",{children:[a("div",{className:"flex items-center lg:justify-end justify-center flex-wrap gap-4 mb-6",children:a(V,{loading:n,hasPermission:u,modelId:o,exportTable:T,routeModel:"task",permissionModel:"task"})}),d("div",{className:"panel",children:[d("div",{className:"flex justify-between flex-wrap gap-4 px-4",children:[a("div",{className:"text-2xl font-semibold uppercase",children:"Task"}),a("div",{className:"shrink-0",children:a("img",{src:H(e.image_data),alt:"Task image",className:"w-20 ltr:ml-auto rtl:mr-auto"})})]}),a(w,{title:"Task Information",leftObjects:b.leftObjects,rightObjects:b.rightObjects}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(Y,{sectionTitle:"Description Information",data:[{label:"Description",value:e.description}]}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(w,{title:"Date information",leftObjects:[{label:"Created Date",value:C(e.created_at)}],rightObjects:[{label:"Modified Date",value:C(e.updated_at)}]}),a("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),a(z,{modelId:o,modelName:"task"})]})]})};export{le as default};
