import{u as V,a as D,b as e,j as o,F as T,c as j,T as w,r as S,d as A,s as L}from"./main-512693c9.js";/* empty css                  */import{A as f,a as $}from"./react-select-async.esm-07977678.js";import{l as M,m as H,t as I,G as O,c as U,s as E,h as B,a as Y,o as G}from"./CommonFunctions-add4950a.js";import{F as R}from"./index-335ee0fa.js";import{T as z}from"./tippy-react.esm-72499b92.js";import{S as C}from"./react-select.esm-c0a059bd.js";import{A as W}from"./ActionButtonsComponent-1ebfefb5.js";import{L as J}from"./LoadingAlpyn-90dfe7c7.js";import"./floating-ui.dom-776dbd07.js";import"./Select-aecb2a80.esm-ef4313d4.js";import"./sweetalert2.all-72c12211.js";const K=()=>{var s,i,u,h,n,p,_,v,x,g,b,N,y,q;const d=V(),a=D(r=>r.rfqFormSlice),l=(r,F)=>{d(j({[r]:F}))},m={"RFQ Line":{"Product Name":e(f,{isMulti:!1,id:"product_id",placeholder:"Type at least 2 characters to search...",loadOptions:M,onChange:({value:r})=>{l("product_id",r)},defaultValue:{value:(s=a.product)==null?void 0:s.id,label:e("div",{className:"flex items-center",children:e("div",{className:"text-sm font-bold",children:(i=a.product)==null?void 0:i.product_name})},(u=a.product)==null?void 0:u.id)},className:"flex-1",required:!0}),"Customer Part Id":e("input",{id:"customer_part_id",name:"customer_part_id",className:"form-input flex-1 ",defaultValue:a.customer_part_id,onChange:r=>l(r.target.name,r.target.value)}),Quantity:e("input",{id:"quantity",name:"Quantity",className:"form-input flex-1 ",defaultValue:a.quantity,onChange:r=>l(r.target.name,r.target.value),required:!0}),"Target Price":e("input",{id:"target_price",name:"target_price",defaultValue:a.target_price,onChange:r=>l(r.target.name,r.target.value),className:"form-input flex-1 "})},"":{"Alternative Products":e(f,{id:"alternative_products",name:"alternative_products",placeholder:"Type at least 2 characters to search...",loadOptions:M,onChange:({value:r})=>{l("alternative_products",r)},defaultValue:{value:(h=a.contact)==null?void 0:h.id,label:o("div",{className:"flex items-center",children:[e("img",{src:(n=a.contact)==null?void 0:n.image,alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}),o("div",{children:[e("div",{className:"text-sm font-bold",children:(p=a.contact)==null?void 0:p.name}),e("div",{className:"text-xs text-gray-500",children:(_=a.contact)==null?void 0:_.email})]})]},(v=a.contact)==null?void 0:v.id)},className:"flex-1"}),Availability:e(f,{isMulti:!1,id:"availability",name:"availability_id",placeholder:"Type at least 2 characters to search...",loadOptions:H,onChange:({value:r})=>{l("availability_id",r)},defaultValue:{value:(x=a.contact)==null?void 0:x.id,label:e("div",{className:"flex items-center",children:e("div",{className:"text-sm font-bold",children:(g=a.availability)==null?void 0:g.availability_name})},(b=a.availability)==null?void 0:b.id)},className:"flex-1"}),Excess:e(f,{isMulti:!1,id:"excess_id",name:"excess_id",placeholder:"Type at least 2 characters to search...",loadOptions:I,onChange:({value:r})=>{l("excess_id",r)},defaultValue:{value:(N=a.excess)==null?void 0:N.id,label:e("div",{className:"flex items-center",children:e("div",{className:"text-sm font-bold",children:(y=a.excess)==null?void 0:y.excess_name})},(q=a.excess)==null?void 0:q.id)},className:"flex-1"}),"Special Instructions":e("textarea",{id:"special_instructions",name:"special_instructions",rows:3,defaultValue:a.special_instructions,onChange:r=>l(r.target.name,r.target.value),className:"form-textarea flex-1"}),comment:e("textarea",{id:"comment",rows:3,name:"comment",className:"form-textarea flex-1",defaultValue:a.comment,onChange:r=>l(r.target.name,r.target.value),placeholder:""})}};return e(T,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(O,{fields:m})})})},X=()=>{const d=V(),a=D(s=>s.rfqForm),l=(s,i)=>{d(w({[s]:i}))},m={Development:{"Processed for VRFQ round 1":e(z,{content:"Please do not change the value",className:"red",children:e("input",{id:"processed_for_vrfq_round_1",type:"checkbox",name:"processed_for_vrfq_round_1",className:"form-checkbox",onChange:s=>l(s.target.name,s.target.checked),checked:a.processed_for_vrfq_round_1})}),"Processed for VRFQ round 2":e("label",{className:"flex items-center cursor-pointer",children:e("input",{id:"processed_for_vrfq_round_2",type:"checkbox",name:"processed_for_vrfq_round_2",className:"form-checkbox",onChange:s=>l(s.target.name,s.target.checked),checked:a.processed_for_vrfq_round_2})}),"Open Status Time":e(R,{name:"open_status_time","data-enable-time":!0,options:{enableTime:!0,dateFormat:"Y-m-d H:i",position:"auto left",defaultDate:`${a.open_status_time?new Date(a.open_status_time):""}`},defaultValue:a.open_status_time,onChange:(s,i)=>l("open_status_time",i),className:"form-input flex-1"})}};return e(T,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(O,{fields:m})})})},Z=()=>{var n,p,_,v,x,g,b,N,y,q,r,F,Q,P,k;const d=V(),a=D(t=>t.rfqFormSlice),l=(t,c)=>{d(w({[t]:c}))},m=[{value:"none",label:"-None-"},{value:"email",label:"Email"},{value:"telephone",label:"Telephone"},{value:"web_portal",label:"Web portal"},{value:"history",label:"History"}],s=[{value:"none",label:"-None-"},{value:"cost_saving",label:"Cost Saving"},{value:"shortage",label:"Shortage"},{value:"eol",label:"EOL"},{value:"proactive",label:"Proactive"},{value:"calculation",label:"Calculation"}],i=[{value:"none",label:"-None-"},{value:"open",label:"Open"},{value:"open_without_routing",label:"Open without routing"},{value:"quoted",label:"Quoted"},{value:"closed",label:"Closed"},{value:"in_review",label:"In review"}],u=[{value:"none",label:"-None-"},{value:"draft",label:"Draft"},{value:"no_feedback",label:"No Feedback"},{value:"negotiation_price",label:"Negotiation Price"},{value:"negotiation_conditions",label:"Negotiation Conditions"},{value:"Open",label:"open"},{value:"Open",label:"open"}],h={Header:{"Account Name":e("input",{id:"account-name",type:"text",name:"account_id",className:"form-input flex-1 "}),Contact:e(f,{isMulti:!1,id:"contact",name:"contact_id",placeholder:"Type at least 2 characters to search...",loadOptions:U,onChange:({value:t})=>{l("contact_id",t)},defaultValue:{value:(n=a.contact)==null?void 0:n.id,label:o("div",{className:"flex items-center",children:[e("img",{src:(p=a.contact)==null?void 0:p.image,alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}),o("div",{children:[e("div",{className:"text-sm font-bold",children:(_=a.contact)==null?void 0:_.name}),e("div",{className:"text-xs text-gray-500",children:(v=a.contact)==null?void 0:v.email})]})]},(x=a.contact)==null?void 0:x.id)},className:"flex-1"}),"Customer RFQ No":e("input",{id:"customer_rfq_no",name:"customer_rfq_no",className:"form-input flex-1 ",defaultValue:a.customer_rfq_no,onChange:t=>l(t.target.name,t.target.value)}),"Project Name / Application":e("input",{id:"project_name",name:"project_name",className:"form-input flex-1 ",defaultValue:a.project_name,onChange:t=>l(t.target.name,t.target.value)}),"RFQ Source":e(C,{name:"rfq_source",required:!0,options:m,onChange:({value:t})=>{l("rfq_source",t)},defaultValue:m.find(t=>t.value==a.rfq_source),className:"flex-1"}),"RFQ Type":e(C,{name:"rfq_type",required:!0,options:s,onChange:({value:t})=>{l("rfq_type",t)},defaultValue:s.find(t=>t.value==a.rfq_type),className:"flex-1"}),Status:e(C,{name:"status",required:!0,options:i,onChange:({value:t})=>{l("status",t)},defaultValue:i.find(t=>t.value==a.status),className:"flex-1"}),"Date History":e(R,{name:"date_history",options:{dateFormat:"d-m-Y",defaultDate:`${a.date_history?new Date(a.date_history):""}`},defaultValue:a.date_history,className:"form-input flex-1",placeholder:"MM DD YYYY",onChange:(t,c)=>l("date_history",c)}),"Exchange Rate":e("input",{id:"exchangeRate",type:"text",value:"1",placeholder:"Readonly input hereâ€¦",className:"flex-1 form-input disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",disabled:!0}),"Portal BOM id":e("input",{id:"portal_bom_id",name:"portal_bom_id",onChange:t=>l(t.target.name,t.target.value),defaultValue:a.portal_bom_id,className:"form-input flex-1 "})},"":{"RFQ Owner":e(f,{isMulti:!1,id:"owner_id",placeholder:"Type at least 2 characters to search...",loadOptions:E,onChange:({value:t})=>{l("owner_id",t)},defaultValue:{value:(g=a.owner)==null?void 0:g.id,label:o("div",{className:"flex items-center",children:[e("img",{src:(b=a.owner)==null?void 0:b.avatar,alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}),o("div",{children:[e("div",{className:"text-sm font-bold",children:(N=a.owner)==null?void 0:N.name}),e("div",{className:"text-xs text-gray-500",children:(y=a.owner)==null?void 0:y.email})]})]},(q=a.owner)==null?void 0:q.id)},className:"flex-1"}),"Deal Stage":e(C,{name:"deal_stage",options:u,onChange:({value:t})=>{l("deal_stage",t)},defaultValue:u.find(t=>t.value==a.deal_stage),className:"flex-1"}),"PM User":e(f,{isMulti:!1,id:"pm_user_id",placeholder:"Type at least 2 characters to search...",loadOptions:E,onChange:({value:t})=>{l("pm_user_id",t)},defaultValue:{value:(r=a.pm_user)==null?void 0:r.id,label:o("div",{className:"flex items-center",children:[e("img",{src:(F=a.pm_user)==null?void 0:F.avatar,alt:"avatar",className:"w-8 h-8 mr-2 rounded-full"}),o("div",{children:[e("div",{className:"text-sm font-bold",children:(Q=a.pm_user)==null?void 0:Q.name}),e("div",{className:"text-xs text-gray-500",children:(P=a.pm_user)==null?void 0:P.email})]})]},(k=a.pm_user)==null?void 0:k.id)},className:"flex-1"}),"Customer RFQ File":o("div",{className:"flex",children:[e("input",{name:"customer_rfq_file",type:"file",className:"form-input file:py-2 file:px-4 file:border-0 file:font-semibold p-0 file:bg-primary/90 ltr:file:mr-5 rtl:file:ml-5 file:text-white file:hover:bg-primary flex-1",accept:"image/*,.zip,.pdf,.xls,.xlsx,.txt.doc,.docx",onChange:t=>B(t,c=>{d(w({customer_rfq_file:`${c==null?void 0:c.data.data.file_url}`}))})}),e("a",{className:"btn btn-outline-primary",href:a.customer_rfq_file,children:"Download"})]}),"RFQ Dead Line":e(R,{name:"rfq_dead_line",options:{dateFormat:"d-m-Y",defaultDate:`${a.rfq_dead_line?new Date(a.rfq_dead_line):""}`},defaultValue:a.rfq_dead_line,className:"form-input flex-1",placeholder:"MM DD YYYY",onChange:(t,c)=>l("rfq_dead_line",c)}),Currency:e(C,{name:"currency",id:"currency",options:Y,className:"flex-1",onChange:({value:t})=>{l("currency",t)},defaultValue:Y.find(t=>t.value==a.currency)}),"Vendor RFQs Line":e(f,{id:"vendor_rfq_lines",name:"vendor_rfq_lines",placeholder:"Type at least 2 characters to search...",loadOptions:G,onChange:({value:t})=>{l("vendor_rfq_lines",t)},className:"flex-1"})}};return e(T,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(O,{fields:h})})})},ee=()=>o("div",{className:"mt-8 px-4",children:[e(Z,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(K,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(X,{})]}),fe=()=>{const d=D(n=>n.rfqFormSlice),a=V(),l=new $,[m,s]=S.useState(!0),u=A().id;S.useEffect(()=>{a(L("RFQ Edit"))}),S.useEffect(()=>{h().then(()=>{s(!1)})},[u]),S.useEffect(()=>{a(w({api:"updateSingleRfq",redirectTo:"/rfq/edit/:id",action:"edit"}))},[]);const h=async()=>{const n=await l.fetchSingleRfq(u);if(n.status!=200)return;const p=n.data.data.rfq;a(w(p))};return m?e(J,{}):o("div",{className:"px-4",children:[e(W,{formState:d}),e("div",{className:"flex xl:flex-row flex-col gap-2.5",children:e("div",{className:"panel px-0 flex-1 py-6 ltr:xl:mr-6 rtl:xl:ml-6",children:e(ee,{})})})]})};export{fe as default};
