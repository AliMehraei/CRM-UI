import{a as Q,d as S,u as f,j as e,F as b,A as p,t as k,E as T,H as A,n as q,q as j,_ as I,aO as m,$ as O,aC as D,aP as P,b as d,r as y,c as M,s as V,aQ as F,e as E}from"./main-016d45e2.js";import{S as w}from"./react-select.esm-74104f8f.js";import{G as N,R as L}from"./GenerateFields-66a48778.js";import{F as R}from"./FileUploadComponent-662d270d.js";import{Q as B,J as U,K as Y}from"./SelectOptions-1a610c43.js";import{F as H}from"./index-82b0aa5d.js";/* empty css                  */import{A as $}from"./ActionButtonsComponent-02cd3913.js";import"./ClearButtonComponent-10d1e634.js";import"./index-37f470b8.js";const G=()=>{const o=new Q,a=S(n=>n.quoteForm),r=f(),t=(n,g)=>{r(m({[n]:g}))},c=async n=>{const g=await o.fetchSingleAccount(n);if(g.status!=200)return;const x=g.data.data.account;r(m({account:x}));const v=["billing_street","billing_city","billing_state","billing_code","billing_country","shipping_street","shipping_city","shipping_state","shipping_code","shipping_country"],l={};v.forEach(i=>{l[i]=x[i]??null}),r(m(l))};return e(b,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(N,{fields:{Header:{"Account Name":e(p,{defaultOptions:!0,isMulti:!1,id:"account_id",name:"account_id",placeholder:"Type at least 2 characters to search...",loadOptions:k,onChange:({value:n})=>{t("account_id",n),c(n)},className:"flex-1"}),"Contact Name":e(p,{defaultOptions:!0,isMulti:!1,id:"contact_id",name:"contact_id",placeholder:"Type at least 2 characters to search...",loadOptions:T,onChange:({value:n})=>{t("contact_id",n)},className:"flex-1"}),RFQ:e(p,{defaultOptions:!0,isMulti:!1,id:"rfq_id",name:"rfq_id",placeholder:"Type at least 2 characters to search...",loadOptions:A,onChange:({value:n})=>{t("rfq_id",n)},className:"flex-1"}),"Customer RFQ No":e("input",{id:"customer_rfq_no",type:"text",name:"customer_rfq_no",className:"form-input flex-1 ",onChange:n=>t(n.target.name,n.target.value)}),Subject:e("input",{required:!0,id:"subject",name:"subject",type:"text",className:"form-input flex-1 ",onChange:n=>t(n.target.name,n.target.value)}),"Converted by":e(p,{defaultOptions:!0,isMulti:!1,id:"converted_by_id",name:"converted_by_id",placeholder:"Type at least 2 characters to search...",loadOptions:q,className:"flex-1",onChange:({value:n})=>{t("converted_by_id",n)}}),"Quote Chance":e(w,{name:"quote_chance",required:!0,options:B,className:"flex-1",onChange:({value:n})=>{t("quote_chance",n)},defaultValue:{value:"Unknown",label:"Unknown"}}),Currency:e(w,{name:"currency",options:j,className:"flex-1",onChange:({value:n})=>{t("currency",n)}})},"":{"Quote Owner":e(p,{defaultOptions:!0,isMulti:!1,id:"owner_id",name:"owner_id",placeholder:"Type at least 2 characters to search...",loadOptions:q,onChange:({value:n})=>{t("owner_id",n)},className:"flex-1"}),"PM User":e(p,{defaultOptions:!0,isMulti:!1,id:"pm_user_id",name:"pm_user_id",placeholder:"Type at least 2 characters to search...",loadOptions:q,onChange:({value:n})=>{t("pm_user_id",n)},className:"flex-1"}),"Deals Name":e(p,{defaultOptions:!0,isMulti:!1,id:"deal_id",name:"deal_id",placeholder:"Type at least 2 characters to search...",loadOptions:I,onChange:({value:n})=>{t("deal_id",n)},className:"flex-1"}),"Quote Stage":e(w,{name:"quote_stage",required:!0,options:U,className:"flex-1",onChange:({value:n})=>{t("quote_stage",n)},defaultValue:{value:"Draft",label:"Draft"}}),"Quote File(Excel)":e(R,{id:"quote_file",modelName:"quote",formState:a,formAttribute:"quote_file",updateFormData:m}),"Exchange Rate":e("input",{id:"exchangeRate",type:"text",value:"1",placeholder:"readOnly input here…",className:"flex-1 form-input disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",disabled:!0})}}})})})},J=()=>{const o=f(),a=(t,c)=>{o(m({[t]:c}))};return e(b,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(N,{fields:{Status:{"Quote valid":e(w,{options:Y,name:"quote_valid",id:"quote_valid",onChange:({value:t})=>{a("quote_valid",t)},className:"flex-1"}),"Proactive Offer":e("input",{id:"proactive_offer",type:"checkbox",name:"proactive_offer",className:"form-checkbox",onChange:t=>a(t.target.name,t.target.checked)})},"":{Rating:e("input",{id:"rating",name:"rating",className:"form-input flex-1 ",onChange:t=>a(t.target.name,t.target.value)})}}})})})},K=()=>{const o=f(),a=(t,c)=>{o(m({[t]:c}))};return e(b,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(N,{fields:{"Quote Line":{"Product Name":e(p,{defaultOptions:!1,isMulti:!1,id:"product_id",name:"product_id",placeholder:"Type at least 2 characters to search...",loadOptions:O,onChange:({value:t})=>{a("product_id",t)},className:"flex-1"}),"Customer part ID":e("input",{id:"customer_part_id",name:"customer_part_id",className:"form-input flex-1 ",onChange:t=>a(t.target.name,t.target.value)})},"":{Quantity:e("input",{id:"quantity",name:"quantity",className:"form-input flex-1 ",onChange:t=>a(t.target.name,t.target.value)}),"List Price":e("input",{id:"list_price",name:"list_price",className:"form-input flex-1 ",onChange:t=>a(t.target.name,t.target.value)}),"Lead Time":e("input",{id:"lead_time",name:"lead_time",className:"form-input flex-1 ",onChange:t=>a(t.target.name,t.target.value)})}}})})})},W=()=>{const o=f(),a=(t,c)=>{o(m({[t]:c}))};return e(b,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(N,{fields:{Source:{Vendor:e(p,{defaultOptions:!0,isMulti:!1,id:"vendor_id",name:"vendor_id",placeholder:"Type at least 2 characters to search...",loadOptions:D,onChange:({value:t})=>{a("vendor_id",t)},className:"flex-1"}),"Availability No":e("input",{id:"availability_no",name:"availability_no",className:"form-input flex-1 ",onChange:t=>a(t.target.name,t.target.value)}),"Availability Date":e(H,{name:"availability_date",options:{dateFormat:"Y-m-d "},className:"form-input flex-1",placeholder:"YYYY-MM-DD",onChange:(t,c)=>a("availability_date",c)}),Availability:e(p,{defaultOptions:!0,isMulti:!1,id:"availability_id",name:"availability_id",placeholder:"Type at least 2 characters to search...",loadOptions:P,onChange:({value:t})=>{a("availability_id",t)},className:"flex-1"})},"":{Cost:e("input",{id:"cost",name:"cost",className:"form-input flex-1 ",onChange:t=>a(t.target.name,t.target.value)}),"LT vendor":e("input",{id:"lt_vendor",name:"lt_vendor",className:"form-input flex-1 ",onChange:t=>a(t.target.name,t.target.value)}),SPQ:e("input",{id:"spq",name:"spq",className:"form-input flex-1 ",onChange:t=>a(t.target.name,t.target.value)}),"Quantity in Stock":e("input",{id:"quantity_in_stock",name:"quantity_in_stock",className:"form-input flex-1 ",onChange:t=>a(t.target.name,t.target.value)})}}})})})},z=()=>{var c,_,n,g,x,v,l,i,u,h;const o=f(),a=S(s=>s.quoteForm),r=(s,C)=>{o(m({[s]:C}))},t={"Address Information":{"Billing Street":e("input",{id:"billing_street",name:"billing_street",value:a.billing_street||((c=a.account)==null?void 0:c.billing_street)||"",onChange:s=>r(s.target.name,s.target.value),className:"form-input flex-1"}),"Billing City":e("input",{id:"billing_city",name:"billing_city",value:a.billing_city||((_=a.account)==null?void 0:_.billing_city)||"",onChange:s=>r(s.target.name,s.target.value),className:"form-input flex-1"}),"Billing State":e("input",{id:"billing_state",name:"billing_state",value:a.billing_state||((n=a.account)==null?void 0:n.billing_state)||"",onChange:s=>r(s.target.name,s.target.value),className:"form-input flex-1"}),"Billing Code":e("input",{id:"billing_code",name:"billing_code",value:a.billing_code||((g=a.account)==null?void 0:g.billing_code)||"",onChange:s=>r(s.target.name,s.target.value),className:"form-input flex-1"}),"Billing Country":e("input",{id:"billing_country",name:"billing_country",value:a.billing_country||((x=a.account)==null?void 0:x.billing_country)||"",onChange:s=>r(s.target.name,s.target.value),className:"form-input flex-1"})},"":{"Shipping Street":e("input",{id:"shipping_street",name:"shipping_street",value:a.shipping_street||((v=a.account)==null?void 0:v.shipping_street)||"",onChange:s=>r(s.target.name,s.target.value),className:"form-input flex-1"}),"Shipping City":e("input",{id:"shipping_city",name:"shipping_city",value:a.shipping_city||((l=a.account)==null?void 0:l.shipping_city)||"",onChange:s=>r(s.target.name,s.target.value),className:"form-input flex-1"}),"Shipping State":e("input",{id:"shipping_state",name:"shipping_state",value:a.shipping_state||((i=a.account)==null?void 0:i.shipping_state)||"",onChange:s=>r(s.target.name,s.target.value),className:"form-input flex-1"}),"Shipping Code":e("input",{id:"shipping_code",name:"shipping_code",value:a.shipping_code||((u=a.account)==null?void 0:u.shipping_code)||"",onChange:s=>r(s.target.name,s.target.value),className:"form-input flex-1"}),"Shipping Country":e("input",{id:"shipping_country",name:"shipping_country",value:a.shipping_country||((h=a.account)==null?void 0:h.shipping_country)||"",onChange:s=>r(s.target.name,s.target.value),className:"form-input flex-1"})}};return e(b,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e(N,{fields:t})})})},X=()=>{const o=f(),a=(r,t)=>{o(m({[r]:t}))};return e(b,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e("div",{className:"lg:w-1/2 w-full ltr:lg:mr-6 rtl:lg:ml-6 mb-6",children:d("div",{className:"",children:[e("div",{className:"text-lg",children:"Terms and Conditions :"}),d("div",{className:"mt-4 flex items-center",children:[e("label",{className:"ltr:mr-2 rtl:ml-2 w-1/3 mb-0",children:"Terms and Conditions"}),e("textarea",{id:"terms_conditions",rows:3,name:"terms_conditions",className:"form-textarea flex-1",placeholder:"",onChange:r=>a(r.target.name,r.target.value)})]},"terms_and_conditions")]},"Terms and Conditions")})})})},Z=()=>{const o=f(),a=(r,t)=>{o(m({[r]:t}))};return e(b,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e("div",{className:"lg:w-1/2 w-full ltr:lg:mr-6 rtl:lg:ml-6 mb-6",children:d("div",{className:"",children:[e("div",{className:"text-lg",children:"Description Information :"}),d("div",{className:"mt-4 flex items-center",children:[e("label",{className:"ltr:mr-2 rtl:ml-2 w-1/3 mb-0",children:"Description"}),e("textarea",{id:"description",rows:3,name:"description",className:"form-textarea flex-1",placeholder:"",onChange:r=>a(r.target.name,r.target.value)})]},"description")]},"Terms and Conditions")})})})},ee=()=>{const o=S(l=>l.quoteForm),[a,r]=y.useState({total:0}),[t,c]=y.useState([{id:0,name:"",part_id:"",quantity:1,SPQ:"",list_price:"",lead_time:"",date_code:"",comment:"",amount:0}]),_=f(),n=(l,i,u)=>{const h={...o.items[u],[l]:i},s=(parseFloat(h.quantity)||0)*(parseFloat(h.list_price)||0);h.amount=s;const C={...o.items,[u]:h};c(Object.values(C)),_(m({items:C}))},g=()=>{let l;l=t!=null&&t.length?t.reduce((u,h)=>h.id>u?h.id:u,t[0].id):0;let i=[...t,{id:l+1,name:"",part_id:"",quantity:1,SPQ:"",list_price:"",lead_time:"",date_code:"",comment:"",amount:0}];c(i),_(m({items:i}))};y.useEffect(()=>{_(m({summary:a}))},[a]);const x=(l=null)=>{const i=t.filter(u=>u.id!=l.id);c(i),_(m({items:i}))},v=()=>{const l=t.reduce((i,u)=>i+(parseFloat(u.amount)||0),0);r({total:l})};return y.useEffect(()=>{v()},[t]),e(b,{children:e("div",{className:"flex justify-between lg:flex-row flex-col",children:e("div",{className:" w-full ltr:lg:mr-12 rtl:lg:ml-12 mb-12 ",children:d("div",{className:"",children:[d("div",{className:"text-lg",children:["Quote Items ",e(L,{})," :"]}),d("div",{className:"mt-8",children:[e("div",{className:"overflow-x-auto	w-11/12",children:d("table",{className:"table-auto w-5",children:[e("thead",{children:d("tr",{children:[e("th",{className:"w-1",children:"Product Name"}),e("th",{className:"w-1",children:"Customer Part ID"}),e("th",{className:"w-1",children:"Quantity"}),e("th",{className:"w-1",children:"SPQ"}),e("th",{className:"w-1",children:"List Price"}),e("th",{className:"w-1",children:"Lead Time"}),e("th",{className:"w-1",children:"Date Code"}),e("th",{className:"w-1",children:"Comment"}),e("th",{className:"w-1",children:"Amount"})]})}),e("tbody",{children:t.map(l=>d("tr",{className:"align-top",children:[d("td",{children:[e(p,{defaultOptions:!1,isMulti:!1,id:"product_id",name:"product_id",placeholder:"Type at least 2 characters to search...",loadOptions:O,onChange:({value:i})=>{n("product_id",i,l.id)},className:"flex-1  min-w-[200px]"}),",",e("textarea",{name:"description",className:"form-textarea mt-4",placeholder:"Enter Description",onChange:i=>n(i.target.name,i.target.value,l.id),defaultValue:l.description})]}),e("td",{children:e("input",{name:"customer_part_id",type:"text",className:"form-input min-w-[200px]",onChange:i=>n(i.target.name,i.target.value,l.id),defaultValue:l.part_id})}),e("td",{children:e("input",{type:"number",className:"form-input w-32",placeholder:"Quantity",name:"quantity",min:0,onChange:i=>n(i.target.name,i.target.value,l.id),defaultValue:l.quantity})}),e("td",{children:e("input",{name:"spq",type:"text",className:"form-input min-w-[200px]",onChange:i=>n(i.target.name,i.target.value,l.id),defaultValue:l.spq})}),e("td",{children:e("input",{type:"number",className:"form-input w-32",placeholder:"Price",name:"list_price",min:0,defaultValue:l.list_price,onChange:i=>n(i.target.name,i.target.value,l.id)})}),e("td",{children:e("input",{name:"lead_time",type:"text",className:"form-input min-w-[200px]",defaultValue:l.lead_time,onChange:i=>n(i.target.name,i.target.value,l.id)})}),e("td",{children:e("input",{name:"date_code",type:"text",className:"form-input min-w-[200px]",defaultValue:l.date_code,onChange:i=>n(i.target.name,i.target.value,l.id)})}),e("td",{children:e("input",{name:"comment",type:"text",className:"form-input min-w-[200px]",defaultValue:l.comment,onChange:i=>n(i.target.name,i.target.value,l.id)})}),e("td",{children:e("input",{disabled:!0,name:"amount",type:"text",className:"form-input min-w-[200px] disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] cursor-not-allowed",value:l.amount,onChange:i=>n(i.target.name,i.target.value,l.id)})}),e("td",{children:e("button",{type:"button",onClick:()=>x(l),children:d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})})]},l.id))})]})}),d("div",{className:"flex justify-between sm:flex-row flex-col mt-6 px-4",children:[e("div",{className:"sm:mb-0 mb-6",children:e("button",{type:"button",className:"btn btn-primary",onClick:()=>g(),children:"Add Item"})}),e("div",{className:"sm:w-2/5",children:d("div",{className:"flex items-center justify-between",children:[e("div",{children:"Total(€)"}),e("input",{id:"total",name:"total",type:"text",value:a.total,className:"w-64 form-input disabled:pointer-events-none disabled:bg-[#eee] dark:disabled:bg-[#1b2e4b] disabled:cursor-not-allowed",disabled:!0})]})})]})]})]},"Quote Items")})})})},te=()=>d("div",{className:"mt-8 px-4",children:[e(G,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(J,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(ee,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(K,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(W,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(z,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(X,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e(Z,{}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"})]}),ue=()=>{const{hasPermission:o}=M(),a=f(),r=S(t=>t.quoteForm);return y.useEffect(()=>{a(V("Quotes Add"))}),y.useEffect(()=>{a(F())},[]),o("create-quote")?d("div",{className:"px-4",children:[e($,{formState:r,resetForm:F}),e("div",{className:"flex xl:flex-row flex-col gap-2.5",children:e("div",{className:"panel px-0 flex-1 py-6 ltr:xl:mr-6 rtl:xl:ml-6 overflow-hidden",children:e(te,{})})})]}):e(E,{})};export{ue as default};
