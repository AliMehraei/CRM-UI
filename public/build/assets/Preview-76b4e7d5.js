import{c as z,u as J,r as c,h as K,d as Y,s as Z,ax as ee,aP as I,j as t,e as L,b as o,f as te,i as T,S as R,X as i,W as m,a as ae}from"./main-09c635dc.js";import{I as le}from"./InfoListComponent-53c026d7.js";import{A as ie}from"./ActionButtonsPreview-e92736d6.js";import{I as s}from"./InformationSectionPreview-70bad941.js";import{M}from"./MultipleLineSectionPreview-a0b3cc5f.js";import{T as oe}from"./TableSectionPreview-aba1979e.js";import{A as se}from"./AttachmentSection-90863710.js";import{A as ne}from"./AttachmentDownloadButton-259324ea.js";import{a as re,b as ce}from"./CommonIcons-a7d39a6f.js";import{G as me}from"./GenerateCallList-c699b970.js";import{G as ue}from"./GenerateEmailLogList-1ca1b725.js";import"./sortBy-6ea67a6d.js";import"./_baseIsEqual-82321e50.js";const Oe=()=>{var y,_,$,w,S,j,C,O,q,N,P,E,k,Q,D,B,x,A;const{hasPermission:d}=z(),u=J(),[b,F]=c.useState(!0),l=K().id,n=new ae,e=Y(a=>a.quoteForm);c.useEffect(()=>{u(Z("Quote Preview"))});const G=()=>{window.print()},W=async()=>{const a=await n.fetchSingleQuote(l);if(a.status!=200)return;const r=a.data.data.quote;u(I(r))},H=async()=>{R.fire({icon:"info",title:"Are you sure?",showCancelButton:!0,showDenyButton:!0,confirmButtonText:"Send",denyButtonText:"Send With Attachment",denyButtonColor:"#000000",padding:"2em",customClass:{container:"sweet-alerts",denyButton:"btn btn-info "}}).then(async a=>{a.isConfirmed&&(i("Processing Sending Email"),(await n.quotationEmail(l)).status!=200&&m("Problem on sending email"),i("Email sent successfully")),a.isDenied&&(i("Processing Sending Email"),(await n.quotationEmail(l,!0)).status!=200&&m("Problem on sending email"),i("Email sent successfully"))})},U=async()=>{R.fire({icon:"info",title:"Are you sure?",showCancelButton:!0,showDenyButton:!0,confirmButtonText:"Send",denyButtonText:"Send With Attachment",denyButtonColor:"#000000",padding:"2em",customClass:{container:"sweet-alerts",denyButton:"btn btn-info "}}).then(async a=>{a.isConfirmed&&(i("Processing Sending Email"),(await n.quotationEmailProactive(l)).status!=200&&m("Problem on sending email"),i("Email sent successfully")),a.isDenied&&(i("Processing Sending Email"),(await n.quotationEmailProactive(l,!0)).status!=200&&m("Problem on sending email"),i("Email sent successfully"))})};c.useEffect(()=>{W().then(()=>{F(!1)})},[l]),c.useEffect(()=>{e.quote_file&&ee("quote","quote_file",e.quote_file).then(a=>{u(I({quote_file_preview:a}))})},[]);const f={leftObjects:[{label:"Converted By",value:`${e.converted_by?((y=e.converted_by)==null?void 0:y.first_name)+" "+((_=e.converted_by)==null?void 0:_.last_name):""}`},{label:"Customer RFQ No",value:e.customer_rfq_no},{label:"Quote Chance",value:`${e.quote_chance}`},{label:"Currency",value:`${e.currency}`}],rightObjects:[{label:"PM User",value:`${(($=e.pm_user)==null?void 0:$.first_name)??""} ${((w=e.pm_user)==null?void 0:w.last_name)??""}`},{label:"Deals Name",value:`${(S=e.deal)==null?void 0:S.deal_name}`},{label:"Quote Stage",value:`${e.quote_stage}`},{label:"Quote File(Excel)",value:t(ne,{formAttribute:"quote_file",modelName:"quote",formState:e})},{label:"Exchange Rate ",value:`${e.exchange_rate}`}]},h={leftObjects:[{label:"Quote valid",value:`${e.quote_valid}`},{label:"Proactive Offer",value:`${e.proactive_offer}`}],rightObjects:[{label:"Rating",value:`${e.rating}`}]},p={leftObjects:[{label:"Product Name",value:`${(j=e.product)==null?void 0:j.product_name}`},{label:"Customer part ID",value:`${e.customer_part_id}`}],rightObjects:[{label:"Quantity",value:`${e.quantity}`},{label:"List Price",value:`${e.list_price}`},{label:"Lead Time",value:`${e.lead_time}`}]},g={leftObjects:[{label:"Vendor",value:`${(C=e.vendor)==null?void 0:C.vendor_name}`},{label:"Availability No",value:`${e.availability_no}`},{label:"Availability Date",value:`${e.availability_date}`},{label:"Availability",value:`${(O=e.availability)==null?void 0:O.availability_name}`}],rightObjects:[{label:"Cost",value:`${e.cost}`},{label:"LT vendor",value:`${e.lt_vendor}`},{label:"SPQ",value:`${e.spq}`},{label:"Quantity in Stock",value:`${e.quantity_in_stock}`}]},v={leftObjects:[{label:"Billing Street",value:`${e.billing_street}`},{label:"Billing City",value:`${e.billing_city}`},{label:"Billing State",value:`${e.billing_state}`},{label:"Billing Code",value:`${e.billing_code}`},{label:"Billing Country",value:`${e.billing_country}`}],rightObjects:[{label:"Shipping Street",value:`${e.shipping_street}`},{label:"Shipping City",value:`${e.shipping_city}`},{label:"Shipping State",value:`${e.shipping_state}`},{label:"Shipping Code",value:`${e.shipping_code}`},{label:"Shipping Country",value:`${e.shipping_country}`}]},V=[{key:"product_name",label:"Product Name",model:"product"},{key:"customer_part_id",label:"Customer Part ID"},{key:"quantity",label:"Quantity"},{key:"spq",label:"SPQ"},{key:"list_price",label:"List Price"},{key:"lead_time",label:"Lead Time"},{key:"date_code",label:"Date Code"},{key:"amount",label:"Amount"},{key:"comment",label:"Comment"}],X=[{label:"Account Name",value:`${((q=e.account)==null?void 0:q.account_name)??""} `},{label:"Contact Name",value:`${((N=e.contact)==null?void 0:N.first_name)??""} ${((P=e.contact)==null?void 0:P.last_name)??""} `},{label:"RFQ Name",value:`${((E=e.rfq)==null?void 0:E.rfq_name)??""} `},{label:"Subject",value:`${e.subject??""} `},{label:"Quote Owner",value:`${((k=e.owner)==null?void 0:k.first_name)??""} ${((Q=e.owner)==null?void 0:Q.last_name)??""}`},{label:"Created By",value:`${((D=e.creator)==null?void 0:D.first_name)??""} ${((B=e.creator)==null?void 0:B.last_name)??""}`},{label:"Modified By",value:`${((x=e.modifier)==null?void 0:x.first_name)??""} ${((A=e.modifier)==null?void 0:A.last_name)??""}`}];return b?t(L,{}):!d("read-quote")||b?t(L,{}):o("div",{children:[o("div",{className:"flex items-center lg:justify-end justify-center flex-wrap gap-4 mb-6",children:[t(ie,{loading:b,hasPermission:d,modelId:l,exportTable:G,routeModel:"quotes",permissionModel:"quote",hasDownloadPdf:!0}),o("button",{type:"button",className:"btn btn-info gap-2",onClick:H,children:[t(re,{}),"Quotation Email"]}),o("button",{type:"button",className:"btn btn-info gap-2",onClick:U,children:[t(ce,{}),"Quotation Proactive Email"]})]}),o("div",{className:"panel",children:[o("div",{className:"flex justify-between flex-wrap gap-4 px-4",children:[t("div",{className:"text-2xl font-semibold uppercase",children:"Quote"}),t("div",{className:"shrink-0",children:t("img",{src:te(e.image_data),alt:"Quote image",className:"w-20 ltr:ml-auto rtl:mr-auto"})})]}),t(le,{data:X}),t("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t(s,{title:"Header",leftObjects:f.leftObjects,rightObjects:f.rightObjects}),t("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t(s,{title:"Status",leftObjects:h.leftObjects,rightObjects:h.rightObjects}),t("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t(oe,{title:"Quote Items",items:e.items,columns:V,total:e.quote_total}),t("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t(s,{title:"Quote Line",leftObjects:p.leftObjects,rightObjects:p.rightObjects}),t("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t(s,{title:"Source",leftObjects:g.leftObjects,rightObjects:g.rightObjects}),t("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t(s,{title:"Address Information",leftObjects:v.leftObjects,rightObjects:v.rightObjects}),t("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t(M,{sectionTitle:"Terms And Conditions",data:[{label:"Terms and Conditions",value:e.terms_and_conditions}]}),t("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t(M,{sectionTitle:"Description ",data:[{label:"Description",value:e.description}]}),t("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t(s,{title:"Date information",leftObjects:[{label:"Created Date",value:T(e.created_at)}],rightObjects:[{label:"Modified Date",value:T(e.updated_at)}]}),t("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t(se,{modelId:l,modelName:"quote"}),t("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t(me,{permissionName:"read-quote",type:"call",routeName:"fetchQuoteCall",modelId:l,title:"Call Logs"}),t("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),t(ue,{permissionName:"read-quote",type:"email-log",routeName:"fetchQuoteEmailLogs",modelId:l,title:"Email Logs"})]})]})};export{Oe as default};
